#!name=哔哩哔哩去广告
#!desc=过滤哔哩哔哩广告、移除青少年模式弹窗和交互式弹幕、移除无用功能和链接跟踪参数，增加空降助手以便跳过视频中插入的广告。此插件仅建议iOS 15以上设备使用，且必须启用MitM-over-HTTP/2功能。\n\n空降助手是第三方提供的功能，依赖于Android版空降助手的服务器数据运作，可能会存在不准确或者失效的问题，此功能与哔哩哔哩官方无关。
#!author=kokoryh[https://github.com/kokoryh]
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Bilibili.png
#!category=Jacob

#!openUrl=https://apps.apple.com/app/id736536022
#!tag=去广告
#!system=ios
#!system_version=15
#!loon_version=3.2.9(837)
#!homepage=https://hub.kelee.one
#!date=2025-11-20 01:32:11
#!arguments=showUpList:"auto",purifyTopReplies:true,airborne:false,logLevel:"off"

[Rule]
DOMAIN,api.biliapi.com,REJECT
DOMAIN,app.biliapi.com,REJECT
DOMAIN,api.biliapi.net,REJECT
DOMAIN,app.biliapi.net,REJECT
DOMAIN,line3-h5-mobile-api.biligame.com,REJECT
DOMAIN-SUFFIX,chat.bilibili.com,REJECT
AND,((DOMAIN-SUFFIX,chat.bilibili.com),(OR,((DOMAIN-KEYWORD,stun),(DOMAIN-KEYWORD,tracker)))),REJECT

[Body Rewrite]
http-response-jq ^https:\/\/api\.bilibili\.com\/x\/pd-proxy\/tracker\? '.data[][]?="stun.chat.bilibili.com:3478"'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/splash\/(list|show|event\/list2)\? '.data |= with_entries(if .key | IN("show", "event_list") then .value = [] else . end)'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/tab\/v2\? '<!DOCTYPE html><html lang="en-US"><head><title>Just a moment...</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="robots" content="noindex,nofollow"><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{box-sizing:border-box;margin:0;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%;color:#313131;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}body{display:flex;flex-direction:column;height:100vh;min-height:100vh}.main-content{margin:8rem auto;padding-left:1.5rem;max-width:60rem}@media (width <= 720px){.main-content{margin-top:4rem}}.h2{line-height:2.25rem;font-size:1.5rem;font-weight:500}@media (width <= 720px){.h2{line-height:1.5rem;font-size:1.25rem}}#challenge-error-text{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI0IyMEYwMyIgZD0iTTE2IDNhMTMgMTMgMCAxIDAgMTMgMTNBMTMuMDE1IDEzLjAxNSAwIDAgMCAxNiAzbTAgMjRhMTEgMTEgMCAxIDEgMTEtMTEgMTEuMDEgMTEuMDEgMCAwIDEtMTEgMTEiLz48cGF0aCBmaWxsPSIjQjIwRjAzIiBkPSJNMTcuMDM4IDE4LjYxNUgxNC44N0wxNC41NjMgOS41aDIuNzgzem0tMS4wODQgMS40MjdxLjY2IDAgMS4wNTcuMzg4LjQwNy4zODkuNDA3Ljk5NCAwIC41OTYtLjQwNy45ODQtLjM5Ny4zOS0xLjA1Ny4zODktLjY1IDAtMS4wNTYtLjM4OS0uMzk4LS4zODktLjM5OC0uOTg0IDAtLjU5Ny4zOTgtLjk4NS40MDYtLjM5NyAxLjA1Ni0uMzk3Ii8+PC9zdmc+");background-repeat:no-repeat;background-size:contain;padding-left:34px}@media (prefers-color-scheme: dark){body{background-color:#222;color:#d9d9d9}}</style><meta http-equiv="refresh" content="360"></head><body><div class="main-wrapper" role="main"><div class="main-content"><noscript><div class="h2"><span id="challenge-error-text">Enable JavaScript and cookies to continue</span></div></noscript></div></div><script>(function(){window._cf_chl_opt = {cvId: '3',cZone: 'kelee.one',cType: 'managed',cRay: '9a1760867deffb28',cH: 'cogRX3ZXM1TdLmyYkaX7AbhJ9jfCA_Rwa0c7nJZIXCs-1763635728-1.2.1.1-pBCBBzccJhBPLpwUhxz6mNnQEY_5zBv4Q12QjGlMCj0O7SsVBvOrbNbM._ThprRd',cUPMDTk:"\/Resource\/JQLang\/Bilibili\/tab_Bilibili_remove_ads.jq?__cf_chl_tk=ToyXOHznso_2c5TlQ3LJuv6IHuYhh6r.RwMemQean78-1763635728-1.0.1.1-aGgasyRV.J2yEdX2fglOqxZaco6jAC843lNt1UECQFY",cFPWv: 'g',cITimeS: '1763635728',cTplC:0,cTplV:5,cTplB: '0',fa:"\/Resource\/JQLang\/Bilibili\/tab_Bilibili_remove_ads.jq?__cf_chl_f_tk=ToyXOHznso_2c5TlQ3LJuv6IHuYhh6r.RwMemQean78-1763635728-1.0.1.1-aGgasyRV.J2yEdX2fglOqxZaco6jAC843lNt1UECQFY",md: 'Shf.e1bgwUIIycyzVKzQqJDI2UrHT7ckr80SYmzxW5w-1763635728-1.2.1.1-Uj6szSJMLTjQ5kt7sJZlU900SWB8LZxitoydxY1e4bVe261ftc0Va2jDdNXGIUveYyGoWY6PkXfcqh.jvTAV141v16vxoqubtdEwj3c0fd.Zybh0_7sRboRUHgLERyLT9ZTGuhe3dCdAFIVlZ2mujVj4zHkRbddXH.uh_CS0gS1DfeluL50Yg0nBNYlNQVqVyxH87ExdH1u3ZEPM1NWI1cw9Mzpfv44kNQv4MEXv8ZhUgt3zhFQVPb_IYDTNPDErGH1ama2tGJkohxvL3OQnYIkyBpnp4ocUKnJxGr_yuCAIJOOCwDzGR7W3vITOKYVYkr_8y5Fk1bjC2ErQIH7DwGvVM6qXNgAK8Ayr.j884BzbxdVEA8ivcp7LRShvnDM6S8ECY4vX5ByI9htIoAr8OrnUMfmfGo4r9dOe5w1XY9gMlRkqWpz_bqQzwpjnRFsSStY3479Utr8hEwH0kM9zyDF8fkJVdQ9W4ug6D77xUMwL.Y6nczwDlv40CmBKBCgFAz5uOKUrZEu4WynJSV6h9E_LQR7iwS67Dgl90vXrJhX9oesp861sgsnEAunY7ASy3LqKQ47dC.pw10EwAJAS16XE4oYSuv_08Hf71.5okqnMVWtFFMfCdjsorU3j58_wrYI5lUw.MN.7eh2aYtz1.4UQ6421o4FA6amstxw.OTjH1C5dQo6SPq2m9dJmKpKagOfsAHFWJmEik4r8FnLdgWabwRwgDu67G2ohxJuXb0w4yxbysQ5Ac0zIqt03cftmVPjGkW9zV5WhtZLPDrJMqRfzoaMK0FYvtMVIqyocadWlQBke9cUhGwq9cVDcs0HNjH_LU43ZGqofxTOkuwmbaaBJmNTqigEU1yxNgCRgJQo',mdrd: 'uGeH2P3EUTXVe.kQrdzA2OJeFD5mh1kUltb0h4Nh8.0-1763635728-1.2.1.1-JQnTmOXG89IUKvgEsa5ZGBmRFR3fk0A0rA0QybGXINkUkUsVF.upzL6tE4pU2yqlmCNW8dvWXDCfDpnUiTNafFaE4w4T7SQgar0Ak_aP9bDLvDEIZxcKdmKkGVcGmJVBj4v7KIGv6lStKaUZyCYA31aHtR9qY83y_Hon8i8D0Hp6mu.UIAQpNDA.Rwvn6GNyBVvZgno_RXLl2RJwVNeHGMOLNfZ8ZeuuKsihEqNkzL6n7sPkvRkQ0F73mor1LHTfgGPm07aWMEHJ0J.kZGDiQBTRURbzFB7_tDwQE0YUx5QtTaqD58ifCHpKb9i6VYM8.ScMa7Zz2sHMolSLB6OcCY1qMzGFN.8SttD3q4mNsrrGVjwbvAl12kWsPT_D5jsg1HolxlrSbfXYWScQt4ynyI92lDHl9OA.Ga8FC39viaLdRM7buv9GqufUKZ8k2wxW6dSu9VlrMljRktJcct98f017xk82raunWqg4dkCpPJ6qQQgCUOEE7ZSPMxyh4J0B2Xm4G3y5KjymRlNf9V0V9MJvdmdknaL7i5czjHjItTJ9WIWbAQ1cMe_y_ruQfYjx4qLWoJ_s4tJAoECz4bh3MU1Q2v4aCaXMOMuQgeGnVhgsyNNDVTDlSeIF93SCaJcqoVjLTGlVkBIl5J.7PJK6eIQcYfCPy1v07R2NW0sFnFRGNgD3fY8XRouCWlGMLXNfzhBUndrhzV2cIc3PF1KccMRirLALf7ZS7DRTHyp3Itq1OIDe2oYcMm7i0fRWEXEK.vxiysJvqLbcyY165KXdeMDiB.rEY5PM.Knds9YouQuhxm1ZSAotFp8O_3WZkVB_DWoaByV8_gvqbCpGBsrzwv411v9B6_icQgKgtD.uJ_mepwpiDdgP.liOPB8_bfD.LWSyvALOHl9q3KNYtTCI.weyhiCfMdwZtUiwHaVhMVtm4Bzq0rPHQ68BRsp2n2p_.2AfEKbZevUDZHMOm74I37JO20XF5dSA7Cqa1vzHvhxUOfs_KYPsXa_bWdBUW47eEl_xuNrBdQBKoeLB9c6b2K7FKdU862RVRTGtmj5nhv09CAlgLns1d1m4P536jg52KPzINyvokpd6POa9vyJCAO3o5uVPqjESFL.ixpl71ZwTrzFXkTY6OzfY2Xb7FhNGB19AAWdVgHWnrJKNmC5T7I6o3f5dGrdthZGm.2mEZ3nerQJt_5mf95oMbFif3YQfKmpghH39UxkKqQ8SHrSvh2lKtMbPv.gcKYdwyehkMXKAlBVzNA_NCpwm5WerCR7lsr6ClrqxEEP0l3.p4Y9cG8AKYWu2tUXxObJuttTMqQW6KnX_MlUg4yB4kjvvP1NGBhqRU99cQCTu8MmbMYQx9Y5EVu1rYgZg8qM3rb2VQy5GyQ.ZxDAlrhC.w_7rGh4B7bApwP.7Ie8uIerOtk34gJU5xWb_How6p747ddLXSe.j1SJovjlR65MN.xNVsaWH.FSJUfMh3xZUshnUm6__JmvrpoI305HZRdOuunJ25M2_pWMLTdiz9MS9wHYBuoRn_WvF33Z.Qye4XvZIePHDVDmd.ysUSJez6szqZdEYwgYf.AdWkwrWCQ__i3HoATyQhvSgJ4_xmPpP2BWcZjqF9nz2L4EefY7k9Sno3qO3yBFAqeLwr6aehW_b_zTAE.TqzCY_nrI1RAfB8ohm8ACK0VLV0j_k_0MT4p9zEwrZWryNi_E27sk_Zd448zg7zsBjb7vDr2RnAvXPZivjdwZZMXSW09yI2tfwgUjtzG6v8W.BKc_xT4RvJ0GebllO3KMtsKby3_G5tH8GpEaIayuQ_bug8fXxmR6IIc_vhOFfii5bl7DdOWy8_T5R72ewdU1SY7llhj7EeQlZgsledgBUL6ZVzS5cWKPQ42K7DMc3cVwDhEO6j39gNhzg3UlK7AuTxNOUNyonoOQ6gku3zLBJaLit0dWoZ9jKfaHNiTtsxPIKBAPUMwCKKLS1ssPM0qwG5qqZPDA5_t9wK2bARNfSHq.09c3iQXcP8HgQswx9QbBkkwNdm4IOZ1AsCYyMbjW0zfjli7sHCXO02GSso1n0TWM4shtS28zZV5wZ5eqg6n2ywIswPk8shlrXhzYA_ocwaeEgp70YLYgaZIhcdOrLm3nwHoO_GazH1OFRBpE4KhbGNUsuHjdkufuRMmQVpvWqG0WPNqv4E0E1.fCMLNRo4Nj0ecJHXydSXIUbRPJWLYZkk4431NWBZLHobIeBdLNB3qIbFrKd0Z9KnD5QI49lPWYKWxTvywKtfTUNMjle47EXeqzefOgnHsqZxRozI8NQHvl6xLUUQ1t.mygdzUgM5X65yE4GVrjD5kLz3SiY4Yuz8uvHGVfbY3dj3A152cCwVJkbe8OMaFPLn47YaLjVrnGG_y1Irue8MrBCz_IMzStVwQPN52i_5UGR4NC6LnbOLZI06W1Eq08qKmzdCxzDfQ',};var a = document.createElement('script');a.src = '/cdn-cgi/challenge-platform/h/g/orchestrate/chl_page/v1?ray=9a1760867deffb28';window._cf_chl_opt.cOgUHash = location.hash === '' && location.href.indexOf('#') !== -1 ? '#' : location.hash;window._cf_chl_opt.cOgUQuery = location.search === '' && location.href.slice(0, location.href.length - window._cf_chl_opt.cOgUHash.length).indexOf('?') !== -1 ? '?' : location.search;if (window.history && window.history.replaceState) {var ogU = location.pathname + window._cf_chl_opt.cOgUQuery + window._cf_chl_opt.cOgUHash;history.replaceState(null, null,"\/Resource\/JQLang\/Bilibili\/tab_Bilibili_remove_ads.jq?__cf_chl_rt_tk=ToyXOHznso_2c5TlQ3LJuv6IHuYhh6r.RwMemQean78-1763635728-1.0.1.1-aGgasyRV.J2yEdX2fglOqxZaco6jAC843lNt1UECQFY"+ window._cf_chl_opt.cOgUHash);a.onload = function() {history.replaceState(null, null, ogU);}}document.getElementsByTagName('head')[0].appendChild(a);}());</script></body></html>'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/feed\/index\? 'if .data.items then .data.items |= map(select((.banner_item == null) and (.ad_info == null) and (.card_goto == "av") and (.card_type | IN("small_cover_v2", "large_cover_single_v9", "large_cover_v1")))) end'
http-response-jq ^https:\/\/api\.bilibili\.com\/pgc\/view\/v2\/app\/season\? 'del(.data.payment)'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/feed\/index\/story\? 'if .data.items then .data.items |= map(select((.ad_info == null) and (.card_goto | IN("vertical_ad_av", "vertical_ad_live", "vertical_ad_picture") | not)) | del(.story_cart_icon, .free_flow_toast, .image_infos, .course_info, .game_info)) end'
http-response-jq ^https:\/\/api\.live\.bilibili\.com\/xlive\/(app-interface\/v2\/index\/feed|app-room\/v1\/index\/getInfoBy(Room|User))\? '.data |= (del(.play_together_info, .play_together_info_v2, .activity_banner_info) | if .function_card then .function_card[] = null end | if .new_tab_info.outer_list then .new_tab_info.outer_list |= map(select(.biz_id != 33)) end | if .card_list then .card_list |= map(select(.card_type | IN("banner_v2", "activity_card_v1") | not)) end | reduce ([["show_reserve_status"], false], [["reserve_info", "show_reserve_status"], false], [["shopping_info", "is_show"], 0]) as [$path, $value] (.; if getpath($path) then setpath($path; $value) end))'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/skin\? 'delpaths([["data","common_equip"]])'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/account\/mine(\/ipad)?\? '<!DOCTYPE html><html lang="en-US"><head><title>Just a moment...</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="robots" content="noindex,nofollow"><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{box-sizing:border-box;margin:0;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%;color:#313131;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}body{display:flex;flex-direction:column;height:100vh;min-height:100vh}.main-content{margin:8rem auto;padding-left:1.5rem;max-width:60rem}@media (width <= 720px){.main-content{margin-top:4rem}}.h2{line-height:2.25rem;font-size:1.5rem;font-weight:500}@media (width <= 720px){.h2{line-height:1.5rem;font-size:1.25rem}}#challenge-error-text{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI0IyMEYwMyIgZD0iTTE2IDNhMTMgMTMgMCAxIDAgMTMgMTNBMTMuMDE1IDEzLjAxNSAwIDAgMCAxNiAzbTAgMjRhMTEgMTEgMCAxIDEgMTEtMTEgMTEuMDEgMTEuMDEgMCAwIDEtMTEgMTEiLz48cGF0aCBmaWxsPSIjQjIwRjAzIiBkPSJNMTcuMDM4IDE4LjYxNUgxNC44N0wxNC41NjMgOS41aDIuNzgzem0tMS4wODQgMS40MjdxLjY2IDAgMS4wNTcuMzg4LjQwNy4zODkuNDA3Ljk5NCAwIC41OTYtLjQwNy45ODQtLjM5Ny4zOS0xLjA1Ny4zODktLjY1IDAtMS4wNTYtLjM4OS0uMzk4LS4zODktLjM5OC0uOTg0IDAtLjU5Ny4zOTgtLjk4NS40MDYtLjM5NyAxLjA1Ni0uMzk3Ii8+PC9zdmc+");background-repeat:no-repeat;background-size:contain;padding-left:34px}@media (prefers-color-scheme: dark){body{background-color:#222;color:#d9d9d9}}</style><meta http-equiv="refresh" content="360"></head><body><div class="main-wrapper" role="main"><div class="main-content"><noscript><div class="h2"><span id="challenge-error-text">Enable JavaScript and cookies to continue</span></div></noscript></div></div><script>(function(){window._cf_chl_opt = {cvId: '3',cZone: 'kelee.one',cType: 'managed',cRay: '9a176087191d944c',cH: 'P4G0x.z3kXWcM3egCZ6SQ4Df_BsuAbGcY4KPFLe8_UE-1763635728-1.2.1.1-iXLxFwcXskIKlnrxgsbVl9KTmiYY15BeEFSqbhEPdJiMnO8_DjjmZ_FkXzheUPSE',cUPMDTk:"\/Resource\/JQLang\/Bilibili\/mine_Bilibili_remove_ads.jq?__cf_chl_tk=GkA4rsISSKwFTnImcyWxmpvdvbcHK2TU2u9hOYLzq5k-1763635728-1.0.1.1-Bxr754CcapEocPJVMZ0olCVMY3GGIXuzv37Cn.yOSEs",cFPWv: 'g',cITimeS: '1763635728',cTplC:0,cTplV:5,cTplB: '0',fa:"\/Resource\/JQLang\/Bilibili\/mine_Bilibili_remove_ads.jq?__cf_chl_f_tk=GkA4rsISSKwFTnImcyWxmpvdvbcHK2TU2u9hOYLzq5k-1763635728-1.0.1.1-Bxr754CcapEocPJVMZ0olCVMY3GGIXuzv37Cn.yOSEs",md: '0Uz_wtPhp9AMQ4F4AoTWWCNgEdPWDffiiOCDGHqJR1c-1763635728-1.2.1.1-cL89sa5_fCtujWBfL3m7unf3HsL3l9RbT9nVV9ETOr7MhzZi8JZukJTzCd5d0tCY2zHnCxO1ndQ59q7bstharIuVukONThCQKHbjGnrgyrN5mlUFb42cAhZS116YJySA7lp7iZe7Lbc74U0h4Dz0uNeSrCdCUtRKW6H_L1oHv9dyHn.sznpK5vIEv.sYx21SwlQy8L1kgECJClpXL0dcu5mMQrJTRpQRoG5drEXnplJiLs7SWhh0r0UNPb9wBa9HzGl4okxies4BQ3YGAOylpUr8cvmnUHfdaKfPu_qO7Tkif8U4Sh.CaG8fwXjLbehbWH4u3Qj4i7eZY2KIA2NK44aq81B8jpZ4sjIIDtrnj65GfB6lhmuUNMivL6V.qB4_59iQ6qzUjNDbU_GYPs90jUBglwDVwOqSG9IA.BTi0fl0NYqrVIltqFv52LY_uvdMFVLR7RcPtWE3EGzxfoNg4NsAZ4NctWxIR9q9VkPaY6RNG_zMgXbKZxBYwo_gJ0UUjh6YbIYru0KADBg90fei7KeIeFFfRnuANTbek90nK8Se0aO_NsPHtskKWt09IFBqe1wGO_ie3EvE6AfQVIxUmC.sbYVl_LTD5ouURJ3NVklzEcpKMVGr.PELd5BnJJbi8.2iiud8wxSxO8aM11qtnadBr_hVOQLTEHiVQvUD8Ozv._.HeLOt7wNS4DhB2biDntt55Wgmo_CEDkO0wQ.3ZIilvBuRD.nAzRKIi1LC28u8dgFEdx.qKhHWVnrvYvLoVzGfbHeMV_lFH94VzzZ2Uea7WmSF5.iS3aAfLToFZFJQAi9ZeFZGkulNoLt4fcNStId6ODHej7T9C37iyMIrRQdrOHEm.Dli_NQPF89l.MY',mdrd: 'UfiMXaZ.oArzHBSlKVrGXbi0Tvw0wb4pikn3uwBPho0-1763635728-1.2.1.1-ml98MZ1owgTx8yN8BZLS_w2XNawdRRCagyO0xAx4BJ1y8KirgOAKceodxCQVdhLHWZCN.YPTtqBjRgRJP3DhPaYKdrKED8taqng0N2GPj1Upd.r8JpiXLqrfLqsyN4o1IQNzlgjpjmJd2myWNv8GOCliBhGMU39neBqqBmduW_xy41WYw.S5f3MGMx9AVKlmjmxlxjPx9P2j3XxRWsFqK2WqGPswFD0xdDmzFEtAt3b4vxnvEkfMgXSWEiDvQTi3tCNgWLLtodGMvHYiFEj.CiZtC.BPcO1gXjAuSYgEuHW7kbW1rr9TLwnFMqle557NleEc_SYKEIv78B_6cST1lokbPIfQPxYpzWoOqHXvzE9dxingEWID1MA84ChBj.gaxNES0QLdfHY.upDm84fmgw3x0mH6stVgQVc6Icqtywfd.OHWHyeIEWUURoVvfI7nyy3rCPeJJ5FhutyrkRdw6di0LHGvsF_gCNLgmgccyTnq4kVO4AB7QqhDq2KC27PMy.8x4tc6r2hcfdDv0XIskar99wxBBJoPVKPshEUFzeXl.s7jFO0IJ4MZ367xBCjD2q8.Nf6jzvsxzS2JbnMrCZZitK6gZPJpkPCBAbdwBDEUomRwwdgps2APeTAd4OD1ApQks2HHub3PAR5kp1CUwC.5ZdoqUgLAulNPcKVKWCdAdVOQHI_4NGYC4h0WfvkMbMs2MQ74pLfjQ9x.ryw21JOg1WkROf4VcQQz.lvWFH7AD8eIXdXVarlHdRvXGakEyHnVFmBJQTP0Cz_OodBcCaChjDeLsCf7ViIUmQqz6feLT22pG8nNKd5r79aTm37c50yYc81LIjdyg3S98fEPVaJFKZuvNXeh_TKPI4ldmgwSjxHushRY4UrP7h20UZjlWRJaJlBYlS9Sle3tVA1VW1F4ciRqYsX2qfpxsCfikGadcEO7N3QRymxLsAAfBulRnfaQsKq4sBa5SsRiprFNWBmkghhDMQ2be_3Y_j_rx0_Q1s_VowOlAxtHFkeE5gjkvCV75vK8hnpnabzWQWi1x3BOc8RRXXL7lt4OcO71TtKEkyQl4oUCiuRJcHEv84ivbnbKapVyApkVYXq3wMd_jqIEpxgiYuTnoZS.Mw8isMHFUtvGeLKPCJINgzr9Dc_dEfYu87rdL4pGL9bYA72gpzLHpWveGEfqCSet3TubZRYfzOR_tBrtqEv9pjIQbSrl3Fe15RF8POF62qmiKLMHPZwO17EzMt2nO7yBZ7.2L3iJCUhzoboyfejKLILbGgR3Mb171lp.2ERXfqF_dmxq4zkT8xbzbdy7lNUvDvAp15qAvg6BIWaTJhEMrobkG5qMhbVw9hTipkWF3bksys9B8cvSDZjoUEKVrAiQhWvNWgFHVTqMLiozgphNXUynWjYZM.6oK_lRrrlSWN0mTI5prLsFS7CJADrIjKCuDulouqfMBZCepCTA0XwHbmY_r9HIuYBVWhU4atybMzPMU1fjB1wzrXp3pnqVmynLKAuk5gF375O4lKlRpT1oB8wKB974IREMEZoMrc7zlc0ZQiRTcwter7hFYxKuzpRnidVFiUpAu3PYBO7ALUXmWPLgoG8ceIitkObVahubWtmFj.glyUUiPgo8LqPb8y.zPSNI22Ab.RriYvQKEOJ2ZibOIiWK4n12UfN95zyKIfSh.h9VnLKS0sy6cup3iNW6X3.etFt5dEd1FHXBjwFZohskfG8KC8SkAN.rXMAMdRz9A4wG7xvbWR1yOVs0YuZBJcJrW91XR75JjidWmevuCjzyG3Wd1XsAhB4cdl64zPzenWXHGKCWjdzdsBcq5kkVH9Lcps3WUtmqUDBuGdY0DZvfg3omzLMhYQg1QlxEOXe4ECzOUlNUZCeM5iXqX.41VvLe3PgK9xanBTzGy1Pn1cBOcgRkWd9XiCdGIWkw07VLXv93_hllI049hZ_GvOK5k2UDRmnRfAknPt3JV3rndeLtHdTb.9ZjBBkjWGGEqnz07gdhx0wJ3aZP.5HG0ZmuJ8d5.GTX.BXE6owrdvVoxPf2P.2GBqqKW_y81EW.oES_A28MGCTrzdNh2SeDVqRWXwwYMQJV3PHNSvWUXNQ.SsAUkbhlK89hdee.oHLkysCmX1dA0gR61ejy5l24rGuKZgZFwGufegMRIe18K4JE7owMcM3S.2leiPpOOFKBN6OYO.LxJjd5xTlG1Ln8yW4YSfWOq3vJlzfxcITgSISP6kPf3wNAdKAo1.q7XHxZ9sL1x.tL6i_99zOCYThnWa2fyREtRe4KHF_807lfqf4r9wl5FTIy3nDulbWuIYEVrT6M2D4JzSrxrS9o0OLBdM_FMOs417e..kUpJZAdH6f8qD9yomq.iU6HIM0GbcrF1wuR8ywAd7P_xj74q9s_BCeEBu8s2sF27f_gUPeIV0d7W_OpXXvQ049gX4ChWRsc6P506fYTUQ',};var a = document.createElement('script');a.src = '/cdn-cgi/challenge-platform/h/g/orchestrate/chl_page/v1?ray=9a176087191d944c';window._cf_chl_opt.cOgUHash = location.hash === '' && location.href.indexOf('#') !== -1 ? '#' : location.hash;window._cf_chl_opt.cOgUQuery = location.search === '' && location.href.slice(0, location.href.length - window._cf_chl_opt.cOgUHash.length).indexOf('?') !== -1 ? '?' : location.search;if (window.history && window.history.replaceState) {var ogU = location.pathname + window._cf_chl_opt.cOgUQuery + window._cf_chl_opt.cOgUHash;history.replaceState(null, null,"\/Resource\/JQLang\/Bilibili\/mine_Bilibili_remove_ads.jq?__cf_chl_rt_tk=GkA4rsISSKwFTnImcyWxmpvdvbcHK2TU2u9hOYLzq5k-1763635728-1.0.1.1-Bxr754CcapEocPJVMZ0olCVMY3GGIXuzv37Cn.yOSEs"+ window._cf_chl_opt.cOgUHash);a.onload = function() {history.replaceState(null, null, ogU);}}document.getElementsByTagName('head')[0].appendChild(a);}());</script></body></html>'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/account\/myinfo\? '.data.vip |= if . != null and .status == 0 then . + { status: 1, type: 2, due_date: 9005270400000, role: 15 } else . end'

[Map Local]
^https:\/\/line3-h5-mobile-api\.biligame\.com\/game\/live\/large_card_material\? data-type=text data="{}" status-code=200 header="Content-Type:application/json"

^https:\/\/api\.live\.bilibili\.com\/xlive\/e-commerce-interface\/v1\/ecommerce-user\/get_shopping_info\? data-type=text data="{}" status-code=200 header="Content-Type:application/json"

^https:\/\/api\.bilibili\.com\/pgc\/activity\/deliver\/material\/receive\? data-type=text data="{"code":0,"data":{"closeType":"close_win","container":[],"showTime":""},"message":"success"}" status-code=200 header="Content-Type:text/plain"

^https:\/\/ap[ip]\.bilibili\.com\/x\/(resource\/(top\/activity|patch\/tab)|v2\/search\/square|vip\/ads\/materials)\? data-type=text data="{"code":-404,"message":"-404","ttl":1,"data":null}" status-code=200 header="Content-Type:text/plain"

^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.interface\.v1\.Teenagers\/ModeStatus$ data-type=base64 data="AAAAABMKEQgCEgl0ZWVuYWdlcnMgAioA"

^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.interface\.v1\.Search\/DefaultWords$ data-type=base64 data="AAAAACkaHeaQnOe0ouinhumikeOAgeeVquWJp+aIlnVw5Li7IgAoAToAQgBKAA=="

^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.(view\.v1\.View\/TFInfo|viewunite\.v1\.View\/ViewEndPage)$ data-type=base64 data="AAAAAAA="

[Script]
空降助手 = type=http-request, pattern=^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.community\.service\.dm\.v1\.DM\/DmSegMobile$, script-path=https://github.com/ifflagged/Romeo/raw/main/Modules/JS/Kelee/Bilibili_remove_ads/Bilibili_proto_request_kokoryh.js, requires-body=true, binary-body-mode=true, argument=[{{{logLevel}}}]

ProtoBuf处理 = type=http-response, pattern=^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.(app\.(show\.v1\.Popular\/Index|dynamic\.v2\.Dynamic\/DynAll|view(unite)?\.v1\.View\/(View|ViewProgress|RelatesFeed)|playurl\.v1\.PlayURL\/PlayView|playerunite\.v1\.Player\/PlayViewUnite)|polymer\.app\.search\.v1\.Search\/SearchAll|community\.service\.dm\.v1\.DM\/DmView|main\.community\.reply\.v1\.Reply\/MainList|pgc\.gateway\.player\.v2\.PlayURL\/PlayView)$, script-path=https://github.com/ifflagged/Romeo/raw/main/Modules/JS/Kelee/Bilibili_remove_ads/Bilibili_proto_response_kokoryh.js, requires-body=true, binary-body-mode=true, argument="[{{{showUpList}}}, {{{purifyTopReplies}}}, {{{airborne}}}, {{{logLevel}}}]"

[MITM]
hostname = %APPEND% grpc.biliapi.net, app.bilibili.com, api.bilibili.com, api.live.bilibili.com, line3-h5-mobile-api.biligame.com

