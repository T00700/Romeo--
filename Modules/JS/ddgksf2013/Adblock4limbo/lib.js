!function(){var e,t,r,n={338:function(e,t,r){"use strict";r.d(t,{P:function(){return i},T:function(){return o}});var n=r(5950),i=(0,n.A)("Impression ready"),o=(0,n.A)("Tracking parameters loaded")},479:function(e,t,r){"use strict";r.d(t,{N5:function(){return o},g3:function(){return s},jv:function(){return n},ky:function(){return i}});var n=["s","s","e","n","i","s","u","b","m","a","c","e","h","t"].reverse().join(""),i=["h","s","a","c","p","i","r","t","s"].reverse().join(""),o=["t","a","h","c","p","i","r","t","s"].reverse().join(""),a=function(e){return e.Alpha="alpha",e.Beta="beta",e.Gamma="gamma",e.Zeta="zeta",e}(a||{}),s=Object.values(a)},662:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".icon{height:17px;width:17px}",""]),t.A=i},681:function(e,t,r){"use strict";r.d(t,{A:function(){return u}});var n=r(479),i=r(8062),o=r(5419),a=e=>{var{hostname:t}=e;return t.replace(/^(creative|vr|gate)\./,"")},s=/(\..*){2,}/,u=e=>{var{hostname:t,protocol:r="https:",search:u=""}=e,l=(0,i.qy)(u.replace("?",""));if(l.goDomain&&s.test(l.goDomain))return"".concat(r,"//").concat(l.goDomain);var c=null;return n.g3.forEach(e=>{t.includes("-".concat(e,"."))&&(c="-".concat(e,"."))}),c?"".concat(r,"//go").concat(c).concat(n.ky,".com"):t.includes("creative.",0)||t==="".concat(n.N5,".com")||(0,o.A)({hostname:t})?"".concat(r,"//go.").concat(a({hostname:t})):"".concat(r,"//g").concat(t.slice(1))}},846:function(e,t,r){"use strict";r.d(t,{GN:function(){return I},ih:function(){return R},Io:function(){return D},L9:function(){return N},g8:function(){return j}});var n=r(2712),i=r(3911),o=(e,t)=>function(){return e(...arguments)&&t(...arguments)},a=r(9773),s=r(8062),u=r(9418),l=e=>{var{prevailingGender:t}=e;return t},c=r(1761),d=r(6579);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=e=>{var{modelsMeta:t}=e;return t||{}},v=(0,c.A)(g,d.zj,(0,u.IV)("isNewModelApi"),(e,t,r)=>{var{player:n}=t,{enabled:o}=r;return(0,i.A)(e)?null:"".concat(n,"-").concat(o?"newAPI":"oldAPI")}),m=(0,c.A)(g,e=>{var{modelsList:t=[]}=e;return t.length},v,(e,t,r)=>h(h({},e),{},{modelsCount:t,segment:r})),_=r(6628),y=r(3208),b=["queryParams","landing","path","referrer","modelPromotion"],E=["queryParams","landing","referrer"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var M,L=e=>(t,r)=>e.includes(r),A={referrer:!0},P=(0,a.A)((e,t)=>A[t],(M=i.A,function(){return!M(...arguments)})),j=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{isIncognito:i,trackingParameters:a,referrer:s,mlHash:u,mlHashTime:l}=e,c=(0,d.zj)(e),{queryParams:f={},landing:h,path:p,referrer:g,modelPromotion:v}=c,y=T(c,b),E=g||s;return(0,_.A)((0,n.A)(o(P,L([...a,"mlHash","mlHashTime","notifyAfterAV","modelPromotionId","modelId"])),S(S(S(S(S(S(S(S({},f),y),r),m(e)),{},{path:t||f.path||p||"/",i:i,landing:h,referrer:E},u?{mlHash:u}:{}),l?{mlHashTime:l}:{}),null!=f&&f.notifyAfterAV?{notifyAfterAV:f.notifyAfterAV}:{}),{},{modelPromotion:v})))},D=(e,t)=>{var{hash:r=""}=t,{isIncognito:i,impressionParameters:a,referrer:u,modelsList:l}=e,c=(0,d.zj)(e),{queryParams:f,landing:h,referrer:p}=c,g=T(c,E),v=p||u,b=r.substring(1),O=S(S(S({},f),b?(0,s.qy)(b):{}),g),w=S({landing:h,referrer:v,i:i},(0,y.xp)(e));return(0,_.A)((0,n.A)(o(P,L(a)),S(S(S(S({},O),m(e)),w),{},{filtersMatch:l&&l.some(e=>{var{strict:t}=e;return t})})))},R=function(e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click",n=j(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=l(e),o=S(S(S({},n),"/"===n.path&&"male"===i?{path:"men"}:{}),(0,y.xp)(e));return(0,s.dF)((0,u.FB)(e,r),(0,d.zj)(e).encrypted?{e:btoa((0,s.x7)(o))}:o)},N=function(e,t){return{href:R(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click"),target:"_blank",rel:"noopener"}},I=function(e,t,r){var n=R(t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),[i,o]=n.split("?");return"".concat(i).concat("/"===i[i.length-1]?"":"/","api/").concat(e,"?").concat(o)}},889:function(e,t){"use strict";t.A="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMzgzODM4IiB2aWV3Qm94PSIwIDAgMjE3IDQyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik02MS4zNTggMjMuNzU5aC00LjM1M2MtLjAxOSAxLjI2LjIxIDIuMzQ4LjY4OCAzLjI2NGE2LjQzNiA2LjQzNiAwIDAwMS45MzMgMi4yNjJjLjgxMS41OTIgMS43NDYgMS4wMjcgMi44MDYgMS4zMDMgMS4wNi4yNzcgMi4xNTMuNDE2IDMuMjc5LjQxNiAxLjM5NCAwIDIuNjItLjE2MyAzLjY4LS40ODcgMS4wNi0uMzI1IDEuOTQ3LS43NzggMi42NjMtMS4zNmE1LjY2MSA1LjY2MSAwIDAwMS42MTgtMi4wNzdjLjM2My0uODAxLjU0NC0xLjY3LjU0NC0yLjYwNSAwLTEuMTQ2LS4yNDMtMi4wODYtLjczLTIuODIxLS40ODctLjczNS0xLjA2NS0xLjMyMi0xLjczMy0xLjc2MWE3LjYxNiA3LjYxNiAwIDAwLTIuMDE5LS45NmMtLjY3Ny0uMi0xLjIwNy0uMzM4LTEuNTg5LS40MTUtMS4yOC0uMzI0LTIuMzE1LS41OTItMy4xMDctLjgwMi0uNzkyLS4yMS0xLjQxMy0uNDItMS44NjEtLjYzLS40NDktLjIxLS43NS0uNDM5LS45MDItLjY4Ny0uMTUzLS4yNDgtLjIzLS41NzMtLjIzLS45NzQgMC0uNDM5LjA5Ni0uODAxLjI4Ny0xLjA4OGEyLjQ4IDIuNDggMCAwMS43My0uNzE2IDIuOTEgMi45MSAwIDAxLjk4OC0uNCA1LjI3IDUuMjcgMCAwMTEuMDg4LS4xMTVjLjU1NCAwIDEuMDY0LjA0OCAxLjUzMi4xNDMuNDY4LjA5Ni44ODMuMjU4IDEuMjQ2LjQ4Ny4zNjMuMjI5LjY1NC41NDQuODczLjk0NS4yMi40LjM0OS45MDcuMzg3IDEuNTE4aDQuMzUzYzAtMS4xODQtLjIyNS0yLjE5MS0uNjczLTMuMDIyYTUuODY3IDUuODY3IDAgMDAtMS44MTktMi4wNDcgNy42NzggNy42NzggMCAwMC0yLjYyLTEuMTYgMTMuMDA4IDEzLjAwOCAwIDAwLTMuMDc4LS4zNThjLS45MTcgMC0xLjgzMy4xMjQtMi43NS4zNzNhNy42NzUgNy42NzUgMCAwMC0yLjQ2MiAxLjE0NSA2LjA5OCA2LjA5OCAwIDAwLTEuNzYxIDEuOTMzYy0uNDQ5Ljc3My0uNjczIDEuNjg1LS42NzMgMi43MzUgMCAuOTM1LjE3NiAxLjczMi41MyAyLjM5YTUuMDU3IDUuMDU3IDAgMDAxLjM4OCAxLjY0N2MuNTczLjQ0IDEuMjIyLjc5NyAxLjk0OCAxLjA3NC43MjUuMjc3IDEuNDcuNTExIDIuMjMzLjcwMi43NDUuMjEgMS40OC40IDIuMjA1LjU3My43MjYuMTcxIDEuMzc1LjM3MiAxLjk0OC42MDEuNTcyLjIzIDEuMDM1LjUxNSAxLjM4OC44Ni4zNTQuMzQzLjUzLjc5MS41MyAxLjM0NSAwIC41MTUtLjEzMy45NC0uNCAxLjI3NGEyLjgxMSAyLjgxMSAwIDAxLTEuMDAzLjc4OGMtLjQuMTktLjgzLjMyLTEuMjg5LjM4Ni0uNDU4LjA2Ny0uODg3LjEtMS4yODguMWE2LjgzNCA2LjgzNCAwIDAxLTEuNzE4LS4yMTQgNC4yNzcgNC4yNzcgMCAwMS0xLjQ0Ny0uNjU5IDMuMjUzIDMuMjUzIDAgMDEtLjk4OC0xLjE2Yy0uMjQ4LS40NzctLjM3Mi0xLjA2LS4zNzItMS43NDZ6bTIwLjA0Ni05Ljg4djE2LjY2Nkg4NS45VjEzLjg4aDYuMTI4VjEwLjFINzUuMjc1djMuNzhoNi4xMjl6bTE3LjQ2OCA1LjQ3di01Ljc1Nmg0LjkyNWMxLjAzMSAwIDEuODA0LjIyNCAyLjMyLjY3My41MTUuNDQ4Ljc3MyAxLjE2OS43NzMgMi4xNjIgMCAxLjAzLS4yNTggMS43NzUtLjc3MyAyLjIzMy0uNTE2LjQ1OS0xLjI4OS42ODgtMi4zMi42ODhoLTQuOTI1em0tNC40OTYtOS4yNXYyMC40NDZoNC40OTZ2LTcuOTloNC40OTZjMS4xMjYgMCAxLjkzNy4yNSAyLjQzNC43NDUuNDk2LjQ5Ny44MiAxLjI4Ljk3MyAyLjM0OS4xMTUuODIuMiAxLjY4LjI1OCAyLjU3Ny4wNTcuODk3LjIxIDEuNjcuNDU4IDIuMzJoNC40OTZhMy4wMSAzLjAxIDAgMDEtLjQ3Mi0xLjA0NiA5LjAyOSA5LjAyOSAwIDAxLS4yMy0xLjMwMyAyMi4zNzQgMjIuMzc0IDAgMDEtLjEtMS4zNDZjLS4wMTktLjQzOS0uMDM4LS44Mi0uMDU3LTEuMTQ1YTEyLjIyNSAxMi4yMjUgMCAwMC0uMjE1LTEuNTQ2IDUuMiA1LjIgMCAwMC0uNS0xLjQxOCAzLjg5IDMuODkgMCAwMC0uODg4LTEuMTE3Yy0uMzYzLS4zMTUtLjgyMS0uNTQ5LTEuMzc1LS43MDF2LS4wNThjMS4xNDUtLjQ1OCAxLjk3MS0xLjEyNiAyLjQ3Ny0yLjAwNC41MDYtLjg3OC43NTktMS45MTkuNzU5LTMuMTIyIDAtLjc4Mi0uMTM4LTEuNTEyLS40MTUtMi4xOWE1LjI4MyA1LjI4MyAwIDAwLTEuMjAzLTEuNzkgNS43MDEgNS43MDEgMCAwMC0xLjg5LTEuMjE3Yy0uNzM1LS4yOTYtMS41Ni0uNDQ0LTIuNDc3LS40NDRIOTQuMzc2em0yMC42NzUgMHYyMC40NDZoNC40OTZWMTAuMWgtNC40OTZ6bTEyLjk0NCA5LjYyMnYtNi4xMjhoMy40OTRhOS40NyA5LjQ3IDAgMDExLjQ4OS4xMTQgMy40OSAzLjQ5IDAgMDExLjI2LjQ0NGMuMzYyLjIyLjY1NC41My44NzMuOTMuMjIuNDAyLjMzLjkyNy4zMyAxLjU3NnMtLjExIDEuMTc0LS4zMyAxLjU3NWMtLjIyLjQtLjUxLjcxMS0uODczLjkzLS4zNjMuMjItLjc4My4zNjgtMS4yNi40NDRhOS40MTYgOS40MTYgMCAwMS0xLjQ5LjExNWgtMy40OTN6bS00LjQ5Ni05LjYyMnYyMC40NDZoNC40OTZ2LTcuMzNoNC43MjVjMS4yOCAwIDIuMzY3LS4xODcgMy4yNjUtLjU1OS44OTctLjM3MiAxLjYyNy0uODY0IDIuMTktMS40NzVhNS42NDYgNS42NDYgMCAwMDEuMjMyLTIuMTA0IDcuNzc2IDcuNzc2IDAgMDAuMzg2LTIuNDIgNy43NSA3Ljc1IDAgMDAtLjM4Ni0yLjQzNCA1LjY2NSA1LjY2NSAwIDAwLTEuMjMyLTIuMDljLS41NjMtLjYxMi0xLjI5My0xLjEwMy0yLjE5LTEuNDc1LS44OTgtLjM3My0xLjk4Ni0uNTU5LTMuMjY1LS41NTloLTkuMjJ6bTMzLjczNCA2LjE1N2gyLjcyYy0uMTUzLTEuMDg4LS40NzctMi4wNDgtLjk3My0yLjg3OGE3LjA4MSA3LjA4MSAwIDAwLTEuODYyLTIuMDc2IDguMTYgOC4xNiAwIDAwLTIuNTQ4LTEuMjYgMTAuNTEgMTAuNTEgMCAwMC0zLjAzNi0uNDNjLTEuNTY1IDAtMi45NTQuMjgyLTQuMTY2Ljg0NS0xLjIxMy41NjMtMi4yMjUgMS4zMzItMy4wMzYgMi4zMDUtLjgxMS45NzQtMS40MjcgMi4xMTUtMS44NDcgMy40MjItLjQyIDEuMzA4LS42MyAyLjcwNi0uNjMgNC4xOTYgMCAxLjQ4OS4xOTYgMi44ODIuNTg3IDQuMTguMzkxIDEuMjk5Ljk3OCAyLjQyNSAxLjc2MSAzLjM4Ljc4My45NTQgMS43NjYgMS43MDMgMi45NSAyLjI0NyAxLjE4My41NDUgMi41NjcuODE3IDQuMTUyLjgxNyAyLjYxNSAwIDQuNjc3LS43MTYgNi4xODUtMi4xNDggMS41MDktMS40MzIgMi4zOTYtMy40MzYgMi42NjQtNi4wMTRoLTIuNzJhNy44MDIgNy44MDIgMCAwMS0uNTE2IDIuMzQ4IDUuNjY3IDUuNjY3IDAgMDEtMS4xODkgMS44NzYgNS40MTMgNS40MTMgMCAwMS0xLjgwNCAxLjIzMmMtLjY5Ny4yOTUtMS40OTQuNDQzLTIuMzkuNDQzLTEuMjIzIDAtMi4yNzMtLjIyOS0zLjE1LS42ODdhNi4xNTIgNi4xNTIgMCAwMS0yLjE2My0xLjg0N2MtLjU2My0uNzczLS45NzgtMS42OC0xLjI0Ni0yLjcyYTEzLjI1IDEzLjI1IDAgMDEtLjQtMy4zMDhjMC0xLjA2OS4xMzMtMi4xLjQtMy4wOTNhNy45NzIgNy45NzIgMCAwMTEuMjQ2LTIuNjQ4IDYuMTg5IDYuMTg5IDAgMDEyLjE0OC0xLjg0OGMuODY4LS40NTggMS45MTQtLjY4NyAzLjEzNS0uNjg3IDEuNDMyIDAgMi42NjguMzYzIDMuNzA5IDEuMDg4IDEuMDQuNzI2IDEuNzEzIDEuODE0IDIuMDE5IDMuMjY1em02LjMtNi4xNTd2MjAuNDQ2aDIuNzJ2LTkuMzY0aDEwLjc2N3Y5LjM2NGgyLjcyVjEwLjFoLTIuNzJ2OC43OTFoLTEwLjc2N1YxMC4xaC0yLjcyem0yNC4xOTcgMTEuOTk5bDMuNDY1LTkuNTM2aC4wNThsMy40MDcgOS41MzZoLTYuOTN6bTIuMDM0LTExLjk5OWwtNy45NjEgMjAuNDQ2aDIuNzc3bDIuMjkxLTYuMTU2aDguNjQ5bDIuMjMzIDYuMTU2aDMuMDA3TDE5Mi43NyAxMC4xaC0zLjAwNnptMTcuNjQgMi4yOTF2MTguMTU1aDIuNzJWMTIuMzloNi44MTZWMTAuMWgtMTYuMzUydjIuMjloNi44MTZ6TTE3LjcgMzcuNzZzLS4yNzItLjA1LS4zMjEtLjA2NGMtLjc5NS0uMjEyLTEuNjE4LS4wMDMtMi4yMDguMjg1LS41NzQuMjgtLjMzLjE2My0uMzMuMTYzLS45NTguNDc1LTEuOTczLjkxMy0zLjAzOCAxLjMxNS0yLjg5NSAxLjA5MS02LjAyOCAxLjg3LTkuMTgyIDIuMzguMjgtLjQxNy41MzctLjgxNi43NzEtMS4xOTguNjMyLTEuMDMgMS40NDEtMi40OTkgMi4zODYtNC4yOTYgMCAwIC43OC0xLjM2IDEuMDktMi4wNzIuMzA4LS43MDYtLjA0OC0xLjM3Mi0uNDktMS44MDMtLjQ0NC0uNDMtMS4zNDQtMS4zOTgtMS4zNDQtMS4zOThDMS43NzcgMjcuNjgxIDAgMjMuNTA4IDAgMTkuMTMgMCA4LjczIDEwLjExNyAwIDIyLjkxIDAgMzUuNyAwIDQ1LjgxNyA4LjczIDQ1LjgxNyAxOS4xMjljMCA5LjgyOS05LjA0IDE4LjE2OC0yMC44MzUgMTkuMDUxLS4yNi4wMi0uNzgzLS4xODEtLjc4OS0uODE2LS4wMzUtMy44MTUtLjA3LTExLjQzMS0uMDctMTEuNDMxIDAtLjM1OC4yNDktLjc5NS41NTYtLjk3NWw4Ljc1OC05LjI0NmMuMjMtLjI0NC40MS0uNzEzLjQtMS4wNGwuMDE4LjU5YS44MTguODE4IDAgMDAtLjgxNy0uNzkybC0yMC43MDkuMDFjLS40MzggMC0uOC4zNTctLjgwOS43ODdsLjAxMi0uNjA0Yy0uMDA3LjMzMy4xOC44MDYuNDA1IDEuMDQ1bDguNzMyIDkuMjM3Yy4zMDMuMTg4LjU1LjYzLjU1Ljk4OCAwIDAtLjAxIDcuNjM4LjAxNCAxMS40NTguMDA0LjU4NC0uNTg0LjgwOC0uODcyLjc3OWEyOS4yMiAyOS4yMiAwIDAxLTIuNjYxLS40MXoiLz48L3N2Zz4="},1373:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,'.root--JrRdn{color:inherit;position:relative;display:block;height:100%;width:100%;overflow:hidden;background-position:center;background-size:cover;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-family:Arimo,sans-serif}.img--YWbK3{backdrop-filter:blur(5px);height:100%;width:100%}.background--CX6MD{position:absolute;left:0;right:0;top:0;bottom:0;background-position:center;background-size:cover;-webkit-filter:blur(8px);filter:blur(8px)}.with-shadow--z1XLV::after{background:-webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(transparent), color-stop(rgba(0, 0, 0, 0.2)), to(rgba(0, 0, 0, 0.9)));background:linear-gradient(transparent, transparent, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.9));bottom:0;content:" ";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}.header--COb0Z{position:absolute;z-index:2;top:6px;left:0;right:0;container-type:inline-size}.footer--AApH4{position:absolute;bottom:0;left:0;right:0}.footer--AApH4>*{bottom:0}.play-button--GJikc{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}',""]),i.locals={root:"root--JrRdn",img:"img--YWbK3",background:"background--CX6MD","with-shadow":"with-shadow--z1XLV",withShadow:"with-shadow--z1XLV",header:"header--COb0Z",footer:"footer--AApH4","play-button":"play-button--GJikc",playButton:"play-button--GJikc"},t.A=i},1385:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--VkRIi{opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-family:Arimo,sans-serif;text-align:center;position:absolute;top:0;text-shadow:0 0 9px #000;-webkit-animation:fade-in--GiAtF .5s .8s forwards;animation:fade-in--GiAtF .5s .8s forwards}.head--GQ8uD{font-size:1.8em;margin-bottom:1.8em}@-webkit-keyframes fade-in--GiAtF{from{opacity:0}to{opacity:1}}@keyframes fade-in--GiAtF{from{opacity:0}to{opacity:1}}",""]),i.locals={root:"root--VkRIi","fade-in":"fade-in--GiAtF",fadeIn:"fade-in--GiAtF",head:"head--GQ8uD"},t.A=i},1761:function(e,t){"use strict";t.A=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var{length:n}=t;if(n<2)throw new Error("Selector should receive more than one argument!");var i=t[n-1],o=t.slice(0,n-1);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i(...o.map(e=>e(...t)))}}},1967:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r}).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&i[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},1981:function(e,t){"use strict";t.A={INT:"int",UNSIGNED_INT:"unsigned_int",INT_LIST:"int_list",BOOL:"bool",STRING:"string",ENUM:"enum",STRING_LIST:"string_list",HEX_COLOR:"hex_color",HEX_LIST:"hex_list",LP_EXPERIENCE_HEX_LIST:"lp_experience_hex_list",LP_AKIRA_HEX_LIST:"lp_akira_hex_list"}},2712:function(e,t){"use strict";t.A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((r,n)=>(e(t[n],n)&&(r[n]=t[n]),r),{})}},2929:function(e,t){"use strict";t.A=function(e){return 0===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").indexOf(e)}},3208:function(e,t,r){"use strict";r.d(t,{FB:function(){return s},IV:function(){return u},JO:function(){return l},xp:function(){return d}});var n=r(1761),i=r(6579);r(7727);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=(e,t)=>{var{urls:r}=e;return r[t]},u=e=>t=>{var{features:r={}}=t;return r[e]||{}},l=e=>{var{whiteLabelData:t}=e;return t||{}},c=e=>{var{abTest:t}=e;return t},d=((0,n.A)(i.zj,c,(e,t)=>{var{landing:r}=e;if(!t||String(t.landing).toLowerCase()!==String(r).toLowerCase())return{};var{selectedVariant:n,variants:i}=t,{params:o={}}=i.find(e=>e.name===n)||{};return o}),(0,n.A)(i.zj,c,(e,t)=>{var{landing:r}=e;return t&&String(t.landing).toLowerCase()===String(r).toLowerCase()?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({abTest:t.name,abTestVariant:t.selectedVariant},t.uniquenessParams):{}}))},3246:function(e,t){"use strict";var r=e=>Array.isArray(e)?e:[e];t.A=e=>{var t=[],n=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(e=>t.find(t=>t.event===e))(e);i?i.handlers.push([r,n]):t.push({event:e,handlers:[[r,n]]})};return{initialState:e,on(e,t){return r(e).forEach(e=>{n(e,t)}),this},once(e,t){return r(e).forEach(e=>{n(e,t,{once:!0})}),this},bind(e,r){t.forEach(t=>{var{event:n,handlers:i}=t;i.forEach(t=>{var[i,{once:o}]=t,a=e=>r(i(e));o?e.once(n,a):e.on(n,a)})})}}}},3292:function(e,t){"use strict";t.A=e=>{var t=[],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.map(e=>{if(e in r)return r[e];throw new Error('Dependency "'.concat(e,'" is empty!'))});return e(...n)};return r.requires=function(){return t.push(...arguments),r},r}},3520:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--LhO1W{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.left--Vf4-s{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:0}.left--Vf4-s:only-child{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.right--gI-QO{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:auto}",""]),i.locals={root:"root--LhO1W",left:"left--Vf4-s",right:"right--gI-QO"},t.A=i},3554:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r[(e=0,t=r.length-1,Math.floor(Math.random()*(t-e+1)+e))]}},3614:function(e,t){"use strict";t.A=e=>{for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}},3698:function(e,t,r){"use strict";r.r(t),r.d(t,{modelThumbRenderedEvent:function(){return l},modelsApiCacheResponseSuccess:function(){return h},modelsApiLoaded:function(){return g},modelsApiParametersLoaded:function(){return d},modelsLoadedEvent:function(){return a},modelsLoadingStarted:function(){return o},modelsMlDataReceived:function(){return v},modelsNotLoadedEvent:function(){return s},modelsReadyEvent:function(){return u},replaceModelByModel:function(){return c},replaceModelWithRandomModel:function(){return p},startLoadingModels:function(){return i},updateModelsApiCache:function(){return f}});var n=r(5950),i=(0,n.A)("Call to starts models loading"),o=(0,n.A)("Models started loading"),a=(0,n.A)("Models loaded"),s=(0,n.A)("Models not loaded"),u=(0,n.A)("Models ready"),l=(0,n.A)("Model thumb rendered"),c=(0,n.A)("replace model"),d=(0,n.A)("Models api parameters loaded"),f=(0,n.A)("models, loading data from api"),h=(0,n.A)("models, api response cached"),p=(0,n.A)("models, replace by random models"),g=(0,n.A)("models, api data loaded"),v=(0,n.A)("models, set ml-event hash")},3711:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=s(e),a=o[0],u=o[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,u)),c=0,d=u>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[c++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(l(e,s,s+a>u?u:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function l(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(u(n));return i.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3847:function(e,t,r){var n;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return function(e,t){var r,n,a,s,u,l,c,d,f,h=1,p=e.length,g="";for(n=0;n<p;n++)if("string"==typeof e[n])g+=e[n];else if("object"==typeof e[n]){if((s=e[n]).keys)for(r=t[h],a=0;a<s.keys.length;a++){if(null==r)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));r=r[s.keys[a]]}else r=s.param_no?t[s.param_no]:t[h++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(s.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(o("[sprintf] expecting number but found %T",r));switch(i.number.test(s.type)&&(d=r>=0),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?g+=r:(!i.number.test(s.type)||d&&!s.sign?f="":(f=d?"+":"-",r=r.toString().replace(i.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",c=s.width-(f+r).length,u=s.width&&c>0?l.repeat(c):"",g+=s.align?f+r+u:"0"===l?f+u+r:u+f+r)}return g}(function(e){if(s[e])return s[e];var t,r=e,n=[],o=0;for(;r;){if(null!==(t=i.text.exec(r)))n.push(t[0]);else if(null!==(t=i.modulo.exec(r)))n.push("%");else{if(null===(t=i.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var a=[],u=t[2],l=[];if(null===(l=i.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(l[1]);""!==(u=u.substring(l[0].length));)if(null!==(l=i.key_access.exec(u)))a.push(l[1]);else{if(null===(l=i.index_access.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(l[1])}t[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return s[e]=n}(e),arguments)}function a(e,t){return o.apply(null,[e].concat(t||[]))}var s=Object.create(null);t.sprintf=o,t.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=a,void 0===(n=function(){return{sprintf:o,vsprintf:a}}.call(t,r,t,e))||(e.exports=n))}()},3911:function(e,t,r){"use strict";var n=r(6773);t.A=e=>(0,n.A)(e)||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&e!=e},3957:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--aFfDV{position:absolute;left:5px;right:5px;z-index:1}.big--3hd8C{left:25px;right:25px;top:25px}",""]),i.locals={root:"root--aFfDV",big:"big--3hd8C"},t.A=i},4343:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S},generateProxyLink:function(){return d.ih},getProxyLinkProps:function(){return d.L9},getTrackingParameters:function(){return d.g8},impressionReadyEvent:function(){return c.P},trackingParametersLoaded:function(){return c.T}});var n=r(9266),i=r.n(n),o=r(3292),a=r(3246),s=r(6579),u=r(3614),l=r(5419),c=r(338),d=r(846),f=r(1981),h={acceptedParamsConfig:[{key:"referrer",title:"Referrer param from url",type:f.A.STRING,private:!0},{key:"trackOff",title:"trackOff",type:f.A.BOOL,default:!1}]},p=r(8062),g=r(9418),v=["m","mh"];var m=e=>{var{params:t,state:r,encrypted:n}=e,{m:i,mh:o}=t,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,v),s=(0,g.FB)(r,"impression");return n?i?(0,p.dF)(s,{e:btoa((0,p.x7)(a)),m:i,mh:o}):(0,p.dF)(s,{e:btoa((0,p.x7)(t))}):(0,p.dF)(s,t)};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=(e,t,r,n)=>{var i=c.P.effect(()=>n=>{var{trackOff:i,encrypted:o}=(0,s.zj)(n);if(!i){var a=r&&!1;if(!(0,l.A)(t)){var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=JSON.stringify(t);return t&&t.length>0?y(y({},e),{},{m:r,mh:(0,u.A)(r)}):e}((0,d.Io)(n,t),a),f=new Image;f.style.cssText="position: fixed; top: -1px; left: -1px; width: 1px; height: 1px",f.src=m({params:c,state:n,encrypted:o}),e.appendChild(f)}}});return{reducer:(0,a.A)(y({impressionParameters:[],trackingParameters:[]},n)).on(c.T,e=>{var{impression:t=[],tracking:r=[]}=e;return{impressionParameters:t,trackingParameters:r}}),effects:[i,(0,s.I0)(h)]}},O=(0,o.A)((e,t,r)=>i()().catch(()=>0).then(Number).then(n=>{var{reducer:i,effects:o}=E(e,t,r,{isIncognito:n});return{reducer:i,effects:o}})).requires("body","location","performance"),S=O},5319:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--8jrgo{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:12px;padding:0 8px;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;width:100%;z-index:1}.big--E4iSN{padding:0 25px 10px}.model-name--rPs-X{max-width:calc(100% - 17px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:5px}.model-name-responsive--oEXtj{font-size:calc(12px + 2vh);margin-right:calc(5px + .3vh)}.root--8jrgo .icon-responsive--NFVpB{height:100%;width:auto}@media screen and (max-height: 89px){.hide-on-small-spots--953LV{display:none}}",""]),i.locals={root:"root--8jrgo",big:"big--E4iSN","model-name":"model-name--rPs-X",modelName:"model-name--rPs-X","model-name-responsive":"model-name-responsive--oEXtj",modelNameResponsive:"model-name-responsive--oEXtj","icon-responsive":"icon-responsive--NFVpB",iconResponsive:"icon-responsive--NFVpB","hide-on-small-spots":"hide-on-small-spots--953LV",hideOnSmallSpots:"hide-on-small-spots--953LV"},t.A=i},5419:function(e,t,r){"use strict";var n=r(2929);t.A=e=>{var{hostname:t}=e;return(0,n.A)("gate.",t)}},5950:function(e,t,r){"use strict";r.d(t,{A:function(){return i}});var n=function(e,t){return{event:e,effect:t,options:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}},i=e=>{var t=t=>({name:e,payload:t});return t.effect=e=>n(t,e),t.effectOnce=e=>n(t,e,{once:!0}),t.eventName=e,t}},5983:function(e,t){"use strict";t.A="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjZjFmMWYxIiB2aWV3Qm94PSIwIDAgMjE3IDQyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik02MS4zNTggMjMuNzU5aC00LjM1M2MtLjAxOSAxLjI2LjIxIDIuMzQ4LjY4OCAzLjI2NGE2LjQzNiA2LjQzNiAwIDAwMS45MzMgMi4yNjJjLjgxMS41OTIgMS43NDYgMS4wMjcgMi44MDYgMS4zMDMgMS4wNi4yNzcgMi4xNTMuNDE2IDMuMjc5LjQxNiAxLjM5NCAwIDIuNjItLjE2MyAzLjY4LS40ODcgMS4wNi0uMzI1IDEuOTQ3LS43NzggMi42NjMtMS4zNmE1LjY2MSA1LjY2MSAwIDAwMS42MTgtMi4wNzdjLjM2My0uODAxLjU0NC0xLjY3LjU0NC0yLjYwNSAwLTEuMTQ2LS4yNDMtMi4wODYtLjczLTIuODIxLS40ODctLjczNS0xLjA2NS0xLjMyMi0xLjczMy0xLjc2MWE3LjYxNiA3LjYxNiAwIDAwLTIuMDE5LS45NmMtLjY3Ny0uMi0xLjIwNy0uMzM4LTEuNTg5LS40MTUtMS4yOC0uMzI0LTIuMzE1LS41OTItMy4xMDctLjgwMi0uNzkyLS4yMS0xLjQxMy0uNDItMS44NjEtLjYzLS40NDktLjIxLS43NS0uNDM5LS45MDItLjY4Ny0uMTUzLS4yNDgtLjIzLS41NzMtLjIzLS45NzQgMC0uNDM5LjA5Ni0uODAxLjI4Ny0xLjA4OGEyLjQ4IDIuNDggMCAwMS43My0uNzE2IDIuOTEgMi45MSAwIDAxLjk4OC0uNCA1LjI3IDUuMjcgMCAwMTEuMDg4LS4xMTVjLjU1NCAwIDEuMDY0LjA0OCAxLjUzMi4xNDMuNDY4LjA5Ni44ODMuMjU4IDEuMjQ2LjQ4Ny4zNjMuMjI5LjY1NC41NDQuODczLjk0NS4yMi40LjM0OS45MDcuMzg3IDEuNTE4aDQuMzUzYzAtMS4xODQtLjIyNS0yLjE5MS0uNjczLTMuMDIyYTUuODY3IDUuODY3IDAgMDAtMS44MTktMi4wNDcgNy42NzggNy42NzggMCAwMC0yLjYyLTEuMTYgMTMuMDA4IDEzLjAwOCAwIDAwLTMuMDc4LS4zNThjLS45MTcgMC0xLjgzMy4xMjQtMi43NS4zNzNhNy42NzUgNy42NzUgMCAwMC0yLjQ2MiAxLjE0NSA2LjA5OCA2LjA5OCAwIDAwLTEuNzYxIDEuOTMzYy0uNDQ5Ljc3My0uNjczIDEuNjg1LS42NzMgMi43MzUgMCAuOTM1LjE3NiAxLjczMi41MyAyLjM5YTUuMDU3IDUuMDU3IDAgMDAxLjM4OCAxLjY0N2MuNTczLjQ0IDEuMjIyLjc5NyAxLjk0OCAxLjA3NC43MjUuMjc3IDEuNDcuNTExIDIuMjMzLjcwMi43NDUuMjEgMS40OC40IDIuMjA1LjU3My43MjYuMTcxIDEuMzc1LjM3MiAxLjk0OC42MDEuNTcyLjIzIDEuMDM1LjUxNSAxLjM4OC44Ni4zNTQuMzQzLjUzLjc5MS41MyAxLjM0NSAwIC41MTUtLjEzMy45NC0uNCAxLjI3NGEyLjgxMSAyLjgxMSAwIDAxLTEuMDAzLjc4OGMtLjQuMTktLjgzLjMyLTEuMjg5LjM4Ni0uNDU4LjA2Ny0uODg3LjEtMS4yODguMWE2LjgzNCA2LjgzNCAwIDAxLTEuNzE4LS4yMTQgNC4yNzcgNC4yNzcgMCAwMS0xLjQ0Ny0uNjU5IDMuMjUzIDMuMjUzIDAgMDEtLjk4OC0xLjE2Yy0uMjQ4LS40NzctLjM3Mi0xLjA2LS4zNzItMS43NDZ6bTIwLjA0Ni05Ljg4djE2LjY2Nkg4NS45VjEzLjg4aDYuMTI4VjEwLjFINzUuMjc1djMuNzhoNi4xMjl6bTE3LjQ2OCA1LjQ3di01Ljc1Nmg0LjkyNWMxLjAzMSAwIDEuODA0LjIyNCAyLjMyLjY3My41MTUuNDQ4Ljc3MyAxLjE2OS43NzMgMi4xNjIgMCAxLjAzLS4yNTggMS43NzUtLjc3MyAyLjIzMy0uNTE2LjQ1OS0xLjI4OS42ODgtMi4zMi42ODhoLTQuOTI1em0tNC40OTYtOS4yNXYyMC40NDZoNC40OTZ2LTcuOTloNC40OTZjMS4xMjYgMCAxLjkzNy4yNSAyLjQzNC43NDUuNDk2LjQ5Ny44MiAxLjI4Ljk3MyAyLjM0OS4xMTUuODIuMiAxLjY4LjI1OCAyLjU3Ny4wNTcuODk3LjIxIDEuNjcuNDU4IDIuMzJoNC40OTZhMy4wMSAzLjAxIDAgMDEtLjQ3Mi0xLjA0NiA5LjAyOSA5LjAyOSAwIDAxLS4yMy0xLjMwMyAyMi4zNzQgMjIuMzc0IDAgMDEtLjEtMS4zNDZjLS4wMTktLjQzOS0uMDM4LS44Mi0uMDU3LTEuMTQ1YTEyLjIyNSAxMi4yMjUgMCAwMC0uMjE1LTEuNTQ2IDUuMiA1LjIgMCAwMC0uNS0xLjQxOCAzLjg5IDMuODkgMCAwMC0uODg4LTEuMTE3Yy0uMzYzLS4zMTUtLjgyMS0uNTQ5LTEuMzc1LS43MDF2LS4wNThjMS4xNDUtLjQ1OCAxLjk3MS0xLjEyNiAyLjQ3Ny0yLjAwNC41MDYtLjg3OC43NTktMS45MTkuNzU5LTMuMTIyIDAtLjc4Mi0uMTM4LTEuNTEyLS40MTUtMi4xOWE1LjI4MyA1LjI4MyAwIDAwLTEuMjAzLTEuNzkgNS43MDEgNS43MDEgMCAwMC0xLjg5LTEuMjE3Yy0uNzM1LS4yOTYtMS41Ni0uNDQ0LTIuNDc3LS40NDRIOTQuMzc2em0yMC42NzUgMHYyMC40NDZoNC40OTZWMTAuMWgtNC40OTZ6bTEyLjk0NCA5LjYyMnYtNi4xMjhoMy40OTRhOS40NyA5LjQ3IDAgMDExLjQ4OS4xMTQgMy40OSAzLjQ5IDAgMDExLjI2LjQ0NGMuMzYyLjIyLjY1NC41My44NzMuOTMuMjIuNDAyLjMzLjkyNy4zMyAxLjU3NnMtLjExIDEuMTc0LS4zMyAxLjU3NWMtLjIyLjQtLjUxLjcxMS0uODczLjkzLS4zNjMuMjItLjc4My4zNjgtMS4yNi40NDRhOS40MTYgOS40MTYgMCAwMS0xLjQ5LjExNWgtMy40OTN6bS00LjQ5Ni05LjYyMnYyMC40NDZoNC40OTZ2LTcuMzNoNC43MjVjMS4yOCAwIDIuMzY3LS4xODcgMy4yNjUtLjU1OS44OTctLjM3MiAxLjYyNy0uODY0IDIuMTktMS40NzVhNS42NDYgNS42NDYgMCAwMDEuMjMyLTIuMTA0IDcuNzc2IDcuNzc2IDAgMDAuMzg2LTIuNDIgNy43NSA3Ljc1IDAgMDAtLjM4Ni0yLjQzNCA1LjY2NSA1LjY2NSAwIDAwLTEuMjMyLTIuMDljLS41NjMtLjYxMi0xLjI5My0xLjEwMy0yLjE5LTEuNDc1LS44OTgtLjM3My0xLjk4Ni0uNTU5LTMuMjY1LS41NTloLTkuMjJ6bTMzLjczNCA2LjE1N2gyLjcyYy0uMTUzLTEuMDg4LS40NzctMi4wNDgtLjk3My0yLjg3OGE3LjA4MSA3LjA4MSAwIDAwLTEuODYyLTIuMDc2IDguMTYgOC4xNiAwIDAwLTIuNTQ4LTEuMjYgMTAuNTEgMTAuNTEgMCAwMC0zLjAzNi0uNDNjLTEuNTY1IDAtMi45NTQuMjgyLTQuMTY2Ljg0NS0xLjIxMy41NjMtMi4yMjUgMS4zMzItMy4wMzYgMi4zMDUtLjgxMS45NzQtMS40MjcgMi4xMTUtMS44NDcgMy40MjItLjQyIDEuMzA4LS42MyAyLjcwNi0uNjMgNC4xOTYgMCAxLjQ4OS4xOTYgMi44ODIuNTg3IDQuMTguMzkxIDEuMjk5Ljk3OCAyLjQyNSAxLjc2MSAzLjM4Ljc4My45NTQgMS43NjYgMS43MDMgMi45NSAyLjI0NyAxLjE4My41NDUgMi41NjcuODE3IDQuMTUyLjgxNyAyLjYxNSAwIDQuNjc3LS43MTYgNi4xODUtMi4xNDggMS41MDktMS40MzIgMi4zOTYtMy40MzYgMi42NjQtNi4wMTRoLTIuNzJhNy44MDIgNy44MDIgMCAwMS0uNTE2IDIuMzQ4IDUuNjY3IDUuNjY3IDAgMDEtMS4xODkgMS44NzYgNS40MTMgNS40MTMgMCAwMS0xLjgwNCAxLjIzMmMtLjY5Ny4yOTUtMS40OTQuNDQzLTIuMzkuNDQzLTEuMjIzIDAtMi4yNzMtLjIyOS0zLjE1LS42ODdhNi4xNTIgNi4xNTIgMCAwMS0yLjE2My0xLjg0N2MtLjU2My0uNzczLS45NzgtMS42OC0xLjI0Ni0yLjcyYTEzLjI1IDEzLjI1IDAgMDEtLjQtMy4zMDhjMC0xLjA2OS4xMzMtMi4xLjQtMy4wOTNhNy45NzIgNy45NzIgMCAwMTEuMjQ2LTIuNjQ4IDYuMTg5IDYuMTg5IDAgMDEyLjE0OC0xLjg0OGMuODY4LS40NTggMS45MTQtLjY4NyAzLjEzNS0uNjg3IDEuNDMyIDAgMi42NjguMzYzIDMuNzA5IDEuMDg4IDEuMDQuNzI2IDEuNzEzIDEuODE0IDIuMDE5IDMuMjY1em02LjMtNi4xNTd2MjAuNDQ2aDIuNzJ2LTkuMzY0aDEwLjc2N3Y5LjM2NGgyLjcyVjEwLjFoLTIuNzJ2OC43OTFoLTEwLjc2N1YxMC4xaC0yLjcyem0yNC4xOTcgMTEuOTk5bDMuNDY1LTkuNTM2aC4wNThsMy40MDcgOS41MzZoLTYuOTN6bTIuMDM0LTExLjk5OWwtNy45NjEgMjAuNDQ2aDIuNzc3bDIuMjkxLTYuMTU2aDguNjQ5bDIuMjMzIDYuMTU2aDMuMDA3TDE5Mi43NyAxMC4xaC0zLjAwNnptMTcuNjQgMi4yOTF2MTguMTU1aDIuNzJWMTIuMzloNi44MTZWMTAuMWgtMTYuMzUydjIuMjloNi44MTZ6TTE3LjcgMzcuNzZzLS4yNzItLjA1LS4zMjEtLjA2NGMtLjc5NS0uMjEyLTEuNjE4LS4wMDMtMi4yMDguMjg1LS41NzQuMjgtLjMzLjE2My0uMzMuMTYzLS45NTguNDc1LTEuOTczLjkxMy0zLjAzOCAxLjMxNS0yLjg5NSAxLjA5MS02LjAyOCAxLjg3LTkuMTgyIDIuMzguMjgtLjQxNy41MzctLjgxNi43NzEtMS4xOTguNjMyLTEuMDMgMS40NDEtMi40OTkgMi4zODYtNC4yOTYgMCAwIC43OC0xLjM2IDEuMDktMi4wNzIuMzA4LS43MDYtLjA0OC0xLjM3Mi0uNDktMS44MDMtLjQ0NC0uNDMtMS4zNDQtMS4zOTgtMS4zNDQtMS4zOThDMS43NzcgMjcuNjgxIDAgMjMuNTA4IDAgMTkuMTMgMCA4LjczIDEwLjExNyAwIDIyLjkxIDAgMzUuNyAwIDQ1LjgxNyA4LjczIDQ1LjgxNyAxOS4xMjljMCA5LjgyOS05LjA0IDE4LjE2OC0yMC44MzUgMTkuMDUxLS4yNi4wMi0uNzgzLS4xODEtLjc4OS0uODE2LS4wMzUtMy44MTUtLjA3LTExLjQzMS0uMDctMTEuNDMxIDAtLjM1OC4yNDktLjc5NS41NTYtLjk3NWw4Ljc1OC05LjI0NmMuMjMtLjI0NC40MS0uNzEzLjQtMS4wNGwuMDE4LjU5YS44MTguODE4IDAgMDAtLjgxNy0uNzkybC0yMC43MDkuMDFjLS40MzggMC0uOC4zNTctLjgwOS43ODdsLjAxMi0uNjA0Yy0uMDA3LjMzMy4xOC44MDYuNDA1IDEuMDQ1bDguNzMyIDkuMjM3Yy4zMDMuMTg4LjU1LjYzLjU1Ljk4OCAwIDAtLjAxIDcuNjM4LjAxNCAxMS40NTguMDA0LjU4NC0uNTg0LjgwOC0uODcyLjc3OWEyOS4yMiAyOS4yMiAwIDAxLTIuNjYxLS40MXoiLz48L3N2Zz4="},6478:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--ujvuu{position:fixed;border:1px solid #555;z-index:2000000}.topLeft--gfCc0{top:10px;left:10px}.topRight--4kMk9{top:10px;right:10px}.bottomLeft--rwhF2{bottom:10px;left:10px}.bottomRight--sO8K2{bottom:10px;right:10px}.rootFullscreen--P6dU4{position:fixed;top:0;left:0;bottom:0;right:0;border:1px solid #555;z-index:2000000}.rootContent--aEiRU{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;width:100%;height:100%}.modelWrapper---3u9F{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ctaButton--sN1kS{z-index:1;bottom:20px;-ms-flex-item-align:center;align-self:center;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px 14px;background:-webkit-gradient(linear, left bottom, left top, from(rgba(162, 36, 44, 0.2)), to(rgba(162, 36, 44, 0.2))),red;background:linear-gradient(0deg, rgba(162, 36, 44, 0.2), rgba(162, 36, 44, 0.2)),red;-webkit-box-shadow:0 0 60px rgba(0,0,0,.08);box-shadow:0 0 60px rgba(0,0,0,.08);border-radius:16px;position:absolute;color:#fff;text-transform:uppercase;text-decoration:none;font-size:14px;font-family:Source Sans Pro,sans-serif;line-height:1.3}.ctaButtonSingle--THX6v{bottom:6px}.topRight--4kMk9.slideAnimation--K36g6,.bottomRight--sO8K2.slideAnimation--K36g6{-webkit-animation:slideInRight--dbosq .3s ease-in;animation:slideInRight--dbosq .3s ease-in}.topLeft--gfCc0.slideAnimation--K36g6,.bottomLeft--rwhF2.slideAnimation--K36g6{-webkit-animation:slideInLeft--V5X9D .3s ease-in;animation:slideInLeft--V5X9D .3s ease-in}.close-button--wsOv0{background:rgba(0,0,0,.7);border:1px solid #888;border-radius:0;outline:none;color:#fff;padding:5px 8px;top:0;right:0;position:absolute;cursor:pointer}@-webkit-keyframes slideInRight--dbosq{from{-webkit-transform:translateX(100%);transform:translateX(100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}@keyframes slideInRight--dbosq{from{-webkit-transform:translateX(100%);transform:translateX(100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}@-webkit-keyframes slideInLeft--V5X9D{from{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}@keyframes slideInLeft--V5X9D{from{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}",""]),i.locals={root:"root--ujvuu",topLeft:"topLeft--gfCc0",topRight:"topRight--4kMk9",bottomLeft:"bottomLeft--rwhF2",bottomRight:"bottomRight--sO8K2",rootFullscreen:"rootFullscreen--P6dU4",rootContent:"rootContent--aEiRU",modelWrapper:"modelWrapper---3u9F",ctaButton:"ctaButton--sN1kS",ctaButtonSingle:"ctaButtonSingle--THX6v",slideAnimation:"slideAnimation--K36g6",slideInRight:"slideInRight--dbosq",slideInLeft:"slideInLeft--V5X9D","close-button":"close-button--wsOv0",closeButton:"close-button--wsOv0"},t.A=i},6561:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,o),!0;case 6:return c.fn.call(c.context,t,n,i,o,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,i);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},6579:function(e,t,r){"use strict";r.d(t,{I0:function(){return N},Ay:function(){return C},zj:function(){return I},_M:function(){return L}});var n=r(6773),i=r(1981),o=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s/g,"")},a=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,s=/[^0-9-]/,u=(e,t,r)=>{var{min:o,max:a,disableNonNumeric:u}=t,l=String(e),c=parseInt(e,10),d=r===i.A.UNSIGNED_INT?Math.abs(c):c;switch(!0){case s.test(l)&&u:case Number.isNaN(d):case!(0,n.A)(o)&&d<o:case!(0,n.A)(a)&&d>a:return!1;default:return!0}},l=r(2929),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return""===e?[]:(e||"").split(",").map(e=>e.trim()).filter(e=>e||t)},d=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,f=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s/g,"")},h=(e,t,r,n)=>{var{allowEmpty:o}=n;switch(r){case i.A.UNSIGNED_INT:return Math.abs(parseInt(e,10));case i.A.INT:return parseInt(e,10);case i.A.INT_LIST:return(e||"").split(",").map(e=>parseInt(e,10)).filter(Boolean);case i.A.BOOL:return"boolean"==typeof e?e:1===parseInt(e,10);case i.A.STRING:case i.A.ENUM:return"".concat(e).trim();case i.A.STRING_LIST:return c(e,o);case i.A.HEX_COLOR:return f(e)&&(0,l.A)("#",e)?e:"#".concat(e);case i.A.HEX_LIST:return(e||"").split(",").map(f).filter(e=>d.test(e)).map(e=>(0,l.A)("#",e)?e:"#".concat(e));default:throw new Error("Unknown type ".concat(r))}},p=["key","default","type","convertValue","isAccepted"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(e,t)=>"function"==typeof e?e(t):e,y=(e,t)=>e.reduce((e,r)=>{var{key:s,default:l,type:c,convertValue:d=h,isAccepted:f}=r,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(r,p),m=!(s in t),y=(0,n.A)(l);if(m&&y)return e;var b=t[s],E=f?f(b,t):(e=>{var{value:t,type:r,options:n}=e;switch(r){case i.A.UNSIGNED_INT:case i.A.INT:return u(t,n,r);case i.A.INT_LIST:return(t||"").split(",").some(e=>u(e,n));case i.A.BOOL:return["1",1,"0",0].includes(t);case i.A.STRING:return"".concat(t).trim();case i.A.ENUM:return n.enum.includes(o(t));case i.A.STRING_LIST:return(t||"").split(",").some(e=>!!o(e));case i.A.HEX_COLOR:return a.test(t);case i.A.HEX_LIST:return(t||"").split(",").some(e=>a.test(o(e)));default:throw new Error("Unknown type ".concat(r))}})({value:b,type:c,options:g});return y&&!E?e:v(v({},e),{},{[s]:d(E&&b||_(l,t),t,c,g)})},{}),b=r(8062),E=r(6905),O=r(3292),S=r(3246),w=r(5950),T=(0,w.A)("App configuration"),M=(0,w.A)("Update config"),L=(0,w.A)("Update query");function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=e=>t=>{var{config:r}=t;return{config:P(P({},r),e)}},R=(0,O.A)((e,t)=>{var{fixedQueryParams:r}=t,n={acceptedParamsConfig:[],initialConfig:{}},i=P(P({},(0,b.Vw)(e.href)),r),o=()=>D(P(P(P({},n.initialConfig),y(n.acceptedParamsConfig||[],i)),{},{acceptedQueryParamsConfig:n.acceptedParamsConfig,queryParams:i}));return{reducer:(0,S.A)({config:{queryParams:{}}}).on(E.z,()=>o()).on(L,e=>(Object.assign(i,e),o())).on(M,D),effects:[T.effect(e=>{var{acceptedParamsConfig:t=[],initialConfig:r={}}=e;n.acceptedParamsConfig=[...n.acceptedParamsConfig,...t],n.initialConfig=P(P({},n.initialConfig),r)})]}}).requires("location","globals"),N=e=>E.$.effect(()=>(t,r)=>r(T(e))),I=e=>{var{config:t={queryParams:{}}}=e;return t},C=R},6617:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".layoutWrapper--zyz7H{height:100%;color:#fff;overflow:hidden;position:relative;font-size:22px}",""]),i.locals={layoutWrapper:"layoutWrapper--zyz7H"},t.A=i},6628:function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.A=e=>Object.keys(e).reduce((t,r)=>{return n(n({},t),{},{[r]:"boolean"!=typeof e[r]?e[r]:(i=e[r],!0===i?1:0)});var i},{})},6773:function(e,t){"use strict";t.A=e=>null==e},6862:function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=l}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+h]=255&a,h+=p,a/=256,l-=8);e[r+h-p]|=128*g}},6905:function(e,t,r){"use strict";r.d(t,{$:function(){return i},z:function(){return o}});var n=r(5950),i=(0,n.A)("App bootstrap"),o=(0,n.A)("App initialization")},7727:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n=function(e){return e.Count="count",e.Weight="weight",e}({})},8062:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{$_:function(){return h},EW:function(){return g},Jr:function(){return p},Vw:function(){return f},dF:function(){return d},qy:function(){return c},x7:function(){return l}});var a=e=>t=>{try{return e(t)}catch(r){return t}},s=a(decodeURIComponent),u=a(encodeURIComponent);function l(e){return Object.keys(e).reduce((t,r)=>{var n=e[r];return[...t,[u(r),void 0===n?null:u(n&&"object"==typeof n&&!Array.isArray(n)?JSON.stringify(n):n)].filter(Boolean).join("=")]},[]).join("&")}function c(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("&").reduce((e,t)=>{var r=t.indexOf("="),n=-1===r,i=n?t:t.slice(0,r);return e[s(i)]=n?void 0:s(t.slice(r+1)),e},{})}function d(e,t){var[r,n=""]=e.split("?"),[o,a]=n.split("#"),s=l(i(i({},o?c(o):{}),t));return s?"".concat(r,"?").concat(s).concat(a?"#".concat(a):""):e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=document.createElement("a");t.href=e;var r=t.search.substring(1);return r?c(r):{}}function h(e){return(e||"").replace(/(.*?\.[^?/]+)([?:/]{1}|$).*/,"$1")}var p=e=>e.split("//")[0],g=e=>h(e).split("//")[1]},8273:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--tVeSu{background-color:rgba(0,0,0,.32);border-radius:2px;color:#fff;font-size:10px;padding:1px 5px;display:inline-block;position:relative;z-index:2}.root--tVeSu+.root--tVeSu{margin-left:3px}.big--nv2ND{font-weight:600;padding:5px 12px;font-size:15px;border-radius:3px}@media(max-height: 160px){.root--tVeSu,.root--tVeSu.big--nv2ND{font-size:8px;line-height:normal;padding:1px 3px}}",""]),i.locals={root:"root--tVeSu",big:"big--nv2ND"},t.A=i},8547:function(e,t,r){"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}e[t]=r}return e[t]}}(),a=[];function s(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function u(e,t){for(var r={},n=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],l=r[u]||0,c="".concat(u," ").concat(l);r[u]=l+1;var d=s(c),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(a[d].references++,a[d].updater(f)):a.push({identifier:c,updater:v(f,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,g=0;function v(e,t){var r,n,i;if(t.singleton){var o=g++;r=p||(p=l(t)),n=f.bind(null,r,o,!1),i=f.bind(null,r,o,!0)}else r=l(t),n=h.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var r=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=s(r[n]);a[i].references--}for(var o=u(e,t),l=0;l<r.length;l++){var c=s(r[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}r=o}}}},8562:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--\\+9vNo{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow:hidden}.root--\\+9vNo video{opacity:1;min-width:100%;min-height:100%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);font-size:0;display:block}.root--\\+9vNo video[metaloaded]{-webkit-animation:videoFadeIn--R67vo .3s ease-in forwards;animation:videoFadeIn--R67vo .3s ease-in forwards}.inner--w8Qlv{min-width:100%;min-height:100%;border-radius:18px;overflow:hidden}.circle--tsF0N{border-radius:100%;position:relative}@-webkit-keyframes videoFadeIn--R67vo{from{opacity:0}to{opacity:1}}@keyframes videoFadeIn--R67vo{from{opacity:0}to{opacity:1}}",""]),i.locals={root:"root--+9vNo",videoFadeIn:"videoFadeIn--R67vo",inner:"inner--w8Qlv",circle:"circle--tsF0N"},t.A=i},8960:function(e,t,r){"use strict";var n=r(3711),i=r(6862),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=u,t.IS=50;var a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|g(e,t),n=s(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||X(e.length)?s(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),s(e<0?0:0|p(e))}function f(e){for(var t=e.length<0?0:0|p(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(i)return n?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){d=!1;break}if(d)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o,a=t.length;for(n>a/2&&(n=a/2),o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(X(s))return o;e[r+o]=s}return o}function E(e,t,r,n){return Q(G(t,e.length-r),e,r,n)}function O(e,t,r,n){return Q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return Q(H(t),e,r,n)}function w(e,t,r,n){return Q(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u=void 0,l=void 0,c=void 0,d=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(u=e[i+1]))&&(d=(31&o)<<6|63&u)>127&&(a=d);break;case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(d=(15&o)<<12|(63&u)<<6|63&l)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(d=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=L));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(K(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(K(o,Uint8Array))i+o.length>n.length?(u.isBuffer(o)||(o=u.from(o)),o.copy(n,i)):Uint8Array.prototype.set.call(n,o,i);else{if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(K(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=e.slice(t,r),d=0;d<s;++d)if(l[d]!==c[d]){o=l[d],a=c[d];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return O(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function j(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=J[e[o]];return i}function D(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function I(e,t,r,n,i){V(t,n,i,e,r,7);var o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function C(e,t,r,n,i){V(t,n,i,e,r,7);var o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function k(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,n,o){return t=+t,r>>>=0,o||k(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return t=+t,r>>>=0,o||k(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=$(function(e){q(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);var n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))}),u.prototype.readBigUInt64BE=$(function(e){q(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);var n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=$(function(e){q(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);var n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),u.prototype.readBigInt64BE=$(function(e){q(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);var n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||N(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||N(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=$(function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=$(function(e){return C(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=$(function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=$(function(e){return C(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:u.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var F={};function U(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function z(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function V(e,t,r,n,i,o){if(e>r||e<t){var a,s="bigint"==typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(r).concat(s),new F.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,o)}function q(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=" It must be ".concat(t,". Received ").concat(i)},RangeError);var Y=/[^+/0-9A-Za-z-_]/g;function G(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Q(e,t,r,n){var i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}var J=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}();function $(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},9266:function(e){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";function n(){var e=window.navigator.userAgent;return e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){var e=window,t=e.chrome,r=e.navigator,n=e.opr,i=r.vendor,o=r.userAgent,a=void 0!==n,s=o.indexOf("Edge")>-1,u=o.match("CriOS"),l=o.match("Chromium");return u||null!==t&&"undefined"!==t&&"Google Inc."===i&&!1===a&&!1===s||l}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){return window.navigator.userAgent.indexOf("Edge/")>0}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/");return t>0||r>0}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){var e=window.opera||window.opr,t=window.navigator.userAgent.match(/Opera|OPR\//);return e&&t}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){var e=window.navigator,t=e.vendor,r=e.userAgent,n=t&&t.indexOf("Apple")>-1,i=r&&-1==r.indexOf("CriOS")&&-1==r.indexOf("FxiOS");return n&&i}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";function n(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"ANDROID",function(){return i}),r.d(n,"CHROME",function(){return o}),r.d(n,"EDGE",function(){return a}),r.d(n,"FIREFOX",function(){return s}),r.d(n,"IE",function(){return u}),r.d(n,"OPERA",function(){return l}),r.d(n,"SAFARI",function(){return c}),r.d(n,"UNKNOWN",function(){return d});var i="android",o="chrome",a="edge",s="firefox",u="ie",l="opera",c="safari",d="unknown",f=r(0),h=r(1),p=r(2),g=r(3),v=r(4),m=r(7),_=r(5),y=r(6);function b(){return Object(h.default)()?o:Object(y.default)()?c:Object(p.default)()?a:Object(g.default)()?s:Object(v.default)()?u:Object(f.default)()?i:Object(_.default)()?l:d}r.d(t,"detect",function(){return b}),r.d(t,"browsers",function(){return n}),r.d(t,"isAndroid",function(){return f.default}),r.d(t,"isChrome",function(){return h.default}),r.d(t,"isEdge",function(){return p.default}),r.d(t,"isFirefox",function(){return g.default}),r.d(t,"isIE",function(){return v.default}),r.d(t,"isMobile",function(){return m.default}),r.d(t,"isOpera",function(){return _.default}),r.d(t,"isSafari",function(){return y.default})}])},function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return a});var n=r(0),i="cd1394e6-3fd1-4a2d-ae60-c9ae01f7ee89",o=new Error("Cannot identify whether incognito mode is active");function a(){var e=Object(n.detect)();return new Promise(function(t,r){var a=function(){return t(!0)},s=function(){return t(!1)},u=function(){return r(o)};if(e===n.browsers.CHROME||e===n.browsers.OPERA){var l=window.RequestFileSystem||window.webkitRequestFileSystem;return l?l(0,0,s,a):u()}if(e===n.browsers.FIREFOX){if(!window.indexedDB)return a();var c=window.indexedDB.open(i);c.onerror=a,c.onsuccess=s}if(e===n.browsers.IE||e===n.browsers.EDGE)return window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?s():a();if(e===n.browsers.SAFARI){try{localStorage[i]=i,localStorage.removeItem(i)}catch(e){return a()}try{window.openDatabase(null,null,null,null)}catch(e){return a()}return s()}return u()})}}])},9318:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},9322:function(e,t){"use strict";t.A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAADEBAMAAAAyiJNYAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTJ4pL50oLp0oLp0oLp0oLp0pL50pL50oLqEsMqYyN54rMJwoLjw/TZYAAAAMdFJOUwBJ1J649YRn5R4NM2Y4jIcAAAVaSURBVHja7ZzPTxNBFMe3oMKuHmr8gRoONRoV0kMREw5yqL8gmh5E/BGkh+KPgKaHejEBOVRJMGgPaMR48FCNJh57MWrCQbvddgnzR8lvlnZn5r03MwdNv1eafjq7M++9+b4ZLKuppppq6r/Qm6e9ly+euXXrxcnLveNHtX+9/fRcge2Qf2l8XiPg04M0C5E3cEwT4MdZxtWJZxoAe+8xoU6VFAHOgQKTyO8pqhAiVxhAN6N0wvsCA8l/RCUcZGBdoC2FCYbQLGGR2A8ZSrfRDAdJWGEUTROwDAoByTjCSHoOJ7xjRF2FEtrSVISXAwa+OCOrDAqKTpYpqAp55W+ZkroAwTWthvDkYTfLFFU1Nl/BMzdSUEf44kc1zTSoJlx0TItyJt+19I23Mk1KcBH9uhAuj/CFadM1DiKlD+EafhP8t5HViagZXBOitXFIL2IoJNel9SK8xvz3jWnWK3PLjjtv25h21b/wBf2IkTpEXD+ivJOwhxlQZgei0wTij+nnVPek2pgRBefUVzOIuybXXcPq22uGEIxTuwwhWNLslN05beOmEGXTr2JFJRN1QXiV8NEcYsRE6RFa3ToFcwi/aDJABcNUi0lEzPTbZmxJ3+ZLXHimTCIqaxOKUwY+2Y8S51u81SkVAdUPUvGeRZQfPnQhVkNIO2fRIBG8aJ1f+dsieteJ2p0sC+ZsFYWYFmWlLKyYIw5i7ZemSFZGnTqFC6NAsjLAPtnKtHGgNalI3wXru8hbeVvLBuSJpoVf0obbdYbqpzhjtOJ2naF9iIK4QhCWH69BiA+SIkRYbPqQvocTlxSd4rQ6B0B8lqXWdnHFKB+GI0lpeQmCdUsRMqMsb+2WFL5FaqLY1HVrH9GCAxtlv2WjWM/vAkn3cNdl70KWmuSeQF6OcBUbBTFAuZlRc8BjgK1kVc3GT0J2qzklGx+EqBHyaXC6QGyiqErfKQMa6x9CPg085gjEaIji82lgX2xDPjaKz6eB8sCC/JTQDGuDtqE+1J2YQ+fTYIwDeVEhGdaBOSdV8FavC5tPg4sKtmFtSE2yfBos/tthH+0mNp7ycB+nUqQ1nhIIfyJJazytrlob+FmX1ItY2xSDbbsExWOvoOyoKqV7VsPZLBmCAb6Ec2lrhLZ4EvmTcngXfz0NOGmGfBvwQfhYU34jpiN83c0ftYi0XRG+7hLalY9hzcQk2tBGI6LoXjoWUcE3F7CI5S1EiynEdnSOmELM4/MLEuESmrhIxAgh/CMRGUIDFIcoU9q4OMQoJdvjEBlK9YhClCm7ERxilHS8AYXIkI4VxRDBv0I7aoIZRTdt44YYRZjn16kXsUx0AhCIHPEIFhxRpR4kgyMS1ONwYIRLPtQHRiRotjEC4VJ9YziC7yfacT0IV+HoNBCRIXcioIghclMIivBLxP4cHCE5Pi056gBBuDIjv18VIb9ZkAUgWhUeExAhGsVtemccOArA5QibKSG8x/JB7FFDQC6qLCghjkMajf1yF46PuAPqlqYVEMOga0mtjP6ggJfEZFaFYBSzwKtVKTLiJZAg3RxzEYPQIwQtRATiYuM0DTEMv54pPxeXDwkBXh/iDp28cA4ZBe6qrHwXE6sfxcwk7vxReK7wB590nE0HS7DNiecPYK9gh0ePytq7tA9fZNvHBFaXj39pDH+vNHTRuluP2u64P7X50nrHfpHuxoZFj+F5S6dS5NAGPoDUSDhd1EpojB7eeUuz6qNHeUo3oT56zJR0E+oDT4+lXwvE2EmbsooX9OVT1hssWUa0FWVnjlmGtBFlT0yaAqy3MPT9TwnO0r7RV7JMamLgqGVYRauppv4V/QUPoG/hUBLkNwAAAABJRU5ErkJggg=="},9418:function(e,t,r){"use strict";r.d(t,{Ay:function(){return N},IV:function(){return R.IV},FB:function(){return R.FB},JO:function(){return R.JO}});var n=r(6905),i=r(3292),o=r(3246),a=r(3698),s=r(338),u=r(3554),l=r(479),c=r(6579),d=r(7727);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=(e,t)=>new Array(e[t]).fill(null).map((r,n)=>h(h({},e),{},{name:t===d.v.Count?"".concat(e.name,"_").concat(n+1):e.name})),v=r(9322),m=r(889),_=r(5983),y=r(681),b="https:",E=e=>{var{href:t,hostname:r,protocol:n=b,search:i}=e;return"".concat((0,y.A)({hostname:r,protocol:n,search:i}),"/config?url=").concat(encodeURIComponent(t))},O=r(5950),S=(0,O.A)("App initialized"),w=(0,O.A)("Uniqueness params calculated");function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){L(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A,P={headerLogoUrlBlack:m.A,headerLogoUrl:_.A,siteName:(A=l.N5,A?A[0].toUpperCase()+A.slice(1).toLowerCase():""),domain:"".concat(l.N5,".com"),appIconUrl:v.A},j=(e,t)=>t.get(E(e)),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return(0,i.A)((t,r,i)=>e(t,r).then(e=>{var{whiteLabel:r,urls:l,features:f,parameters:{modelsApi:h,impression:p,tracking:v}={},abTest:m}=e;if(m){var _="scab_".concat(m.name),y=!1!==m.sticky,b=y?i.get(_):null;if(m.variants=m.variants.reduce((e,t)=>(d.v.Weight in t?e.push(...g(t,d.v.Weight)):d.v.Count in t?e.push(...g(t,d.v.Count)):e.push(t),e),[]),b&&m.variants.some(e=>e.name===b))m.selectedVariant=b;else{var E=(0,u.A)(m.variants);y&&i.set(_,E.name),m.selectedVariant=E.name}}var O=n.z.effect(()=>(e,r)=>{if(e.abTest){var{params:n}=e.abTest.variants.find(t=>t.name===e.abTest.selectedVariant)||{};n&&r((0,c._M)(n));var o=Date.now(),a=["seenAbTest_".concat(e.abTest.name),"seenDomain_".concat(t.hostname),"seenLanding_".concat((0,c.zj)(e).landing)].reduce((e,t)=>{var r,[n]=t.split("_"),a=(e=>parseInt(i.get(e),10))(t),s=!(r=parseInt(String(a),10))||o-r>31968e7;return s&&i.set(t,o),M(M({},e),{},{[n]:Number(!s)})},{});r(w(a))}});return{effects:[n.$.effect(()=>(e,t)=>t((0,a.modelsApiParametersLoaded)(h),(0,s.T)({impression:p,tracking:v}))),n.z.effect(()=>(e,t)=>t(S())),O],reducer:(0,o.A)({appInitialized:!1,origin:t.origin,urls:l,features:f,abTest:m,whiteLabelData:r||M(M({},P),t.hostname.endsWith(".local")?{domain:t.hostname.split(".").slice(-2).join(".")}:{})}).on(w,e=>t=>({abTest:M(M({},t.abTest),{},{uniquenessParams:e})})).on(n.z,()=>({appInitialized:!0}))}})).requires("location","Api","LocalStorage")},R=r(3208),N=D},9679:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".root--3KIsO{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.root--3KIsO small{font-size:smaller}.online--\\+zD2p{display:block;width:5px;height:5px;background-color:#fff;border-radius:50%;margin-right:5px}.big--e2RNt{width:13px;height:13px}.dotLive--DZxi7{width:6px;height:6px;border-radius:50%;display:block}",""]),i.locals={root:"root--3KIsO",online:"online--+zD2p",big:"big--e2RNt",dotLive:"dotLive--DZxi7"},t.A=i},9773:function(e,t){"use strict";t.A=(e,t)=>function(){return e(...arguments)||t(...arguments)}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,o.amdO={},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);o.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(function(e){a[e]=function(){return r[e]}});return a.default=function(){return r},o.d(i,a),i},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce(function(t,r){return o.f[r](e,t),t},[]))},o.u=function(e){return e+".dbb67ec6455c8be7674b.js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r={},o.l=function(e,t,n,i){if(r[e])r[e].push(t);else{var a,s;if(void 0!==n)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var c=u[l];if(c.getAttribute("src")==e){a=c;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",o.nc&&a.setAttribute("nonce",o.nc),a.src=e),r[e]=[t];var d=function(t,n){a.onerror=a.onload=null,clearTimeout(f);var i=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(function(e){return e(n)}),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),s&&document.head.appendChild(a)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/static/912b1285/s/widgets/Spot/",function(){var e={628:0};o.f.j=function(t,r){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(function(r,i){n=e[t]=[r,i]});r.push(n[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,function(r){if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}},"chunk-"+t,t)}};var t=function(t,r){var n,i,a=r[0],s=r[1],u=r[2],l=0;if(a.some(function(t){return 0!==e[t]})){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(u)u(o)}for(t&&t(r);l<a.length;l++)i=a[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),o.nc=void 0,function(){"use strict";function e(e,t){for(var r=[],n=[],i=arguments.length;i-- >2;)r.push(arguments[i]);for(;r.length;){var o=r.pop();if(o&&o.pop)for(i=o.length;i--;)r.push(o[i]);else null!=o&&!0!==o&&!1!==o&&n.push(o)}return"function"==typeof e?e(t||{},n):{nodeName:e,attributes:t||{},children:n,key:t&&t.key}}function t(e,t,r,n){var i,o=[].map,a=n&&n.children[0]||null,s=a&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:o.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(a),u=[],l=!0,c=g(e),d=function e(t,r,n){for(var i in n)"function"==typeof n[i]?function(e,i){n[e]=function(e){var o=i(e);return"function"==typeof o&&(o=o(m(t,c),n)),o&&o!==(r=m(t,c))&&!o.then&&p(c=v(t,g(r,o),c)),o}}(i,n[i]):e(t.concat(i),r[i]=g(r[i]),n[i]=g(n[i]));return n}([],c,g(t));return p(),d;function f(e){return"function"==typeof e?f(e(c,d)):null!=e?e:""}function h(){i=!i;var e=f(r);for(n&&!i&&(a=w(n,a,s,s=e)),l=!1;u.length;)u.pop()()}function p(){i||(i=!0,setTimeout(h))}function g(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function v(e,t,r){var n={};return e.length?(n[e[0]]=e.length>1?v(e.slice(1),t,r[e[0]]):t,g(r,n)):t}function m(e,t){for(var r=0;r<e.length;)t=t[e[r++]];return t}function _(e){return e?e.key:null}function y(e){return e.currentTarget.events[e.type](e)}function b(e,t,r,n,i){if("key"===t);else if("style"===t)if("string"==typeof r)e.style.cssText=r;else for(var o in"string"==typeof n&&(n=e.style.cssText=""),g(n,r)){var a=null==r||null==r[o]?"":r[o];"-"===o[0]?e.style.setProperty(o,a):e.style[o]=a}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?n||(n=e.events[t]):e.events={},e.events[t]=r,r?n||e.addEventListener(t,y):e.removeEventListener(t,y)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!i?e[t]=null==r?"":r:null!=r&&!1!==r&&e.setAttribute(t,r),null!=r&&!1!==r||e.removeAttribute(t)}function E(e,t){var r="string"==typeof e||"number"==typeof e?document.createTextNode(e):(t=t||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),n=e.attributes;if(n){n.oncreate&&u.push(function(){n.oncreate(r)});for(var i=0;i<e.children.length;i++)r.appendChild(E(e.children[i]=f(e.children[i]),t));for(var o in n)b(r,o,n[o],null,t)}return r}function O(e,t){var r=t.attributes;if(r){for(var n=0;n<t.children.length;n++)O(e.childNodes[n],t.children[n]);r.ondestroy&&r.ondestroy(e)}return e}function S(e,t,r){function n(){e.removeChild(O(t,r))}var i=r.attributes&&r.attributes.onremove;i?i(t,n):n()}function w(e,t,r,n,i){if(n===r);else if(null==r||r.nodeName!==n.nodeName){var o=E(n,i);e.insertBefore(o,t),null!=r&&S(e,t,r),t=o}else if(null==r.nodeName)t.nodeValue=n;else{!function(e,t,r,n){for(var i in g(t,r))r[i]!==("value"===i||"checked"===i?e[i]:t[i])&&b(e,i,r[i],t[i],n);var o=l?r.oncreate:r.onupdate;o&&u.push(function(){o(e,t)})}(t,r.attributes,n.attributes,i=i||"svg"===n.nodeName);for(var a={},s={},c=[],d=r.children,h=n.children,p=0;p<d.length;p++){c[p]=t.childNodes[p],null!=(m=_(d[p]))&&(a[m]=[c[p],d[p]])}p=0;for(var v=0;v<h.length;){var m=_(d[p]),y=_(h[v]=f(h[v]));if(s[m])p++;else if(null==y||y!==_(d[p+1]))if(null==y||l)null==m&&(w(t,c[p],d[p],h[v],i),v++),p++;else{var O=a[y]||[];m===y?(w(t,O[0],O[1],h[v],i),p++):O[0]?w(t,t.insertBefore(O[0],c[p]),O[1],h[v],i):w(t,c[p],null,h[v],i),s[y]=h[v],v++}else null==m&&S(t,c[p],d[p]),p++}for(;p<d.length;)null==_(d[p])&&S(t,c[p],d[p]),p++;for(var p in a)s[p]||S(t,a[p][0],a[p][1])}return t}}var r=o(8062);function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=new class{constructor(){n(this,"subscribers",[])}get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,r.dF)(e,t);return window.fetch(i,n).then(t=>{if(!t.ok)throw new Error("".concat(t.status," - ").concat(t.statusText));this.onApiCall(e,"get",!0);var r=t.headers.get("Content-Type");return r&&r.includes("json")?t.json():t.text()}).catch(t=>{throw this.onApiCall(e,"get",!1),t})}post(e,t){return window.fetch(e,{method:"POST",body:JSON.stringify(t)}).then(t=>{if(!t.ok)throw t;this.onApiCall(e,"post",!0);var r=t.headers.get("Content-Type");return r&&r.includes("json")?t.json():t.text()}).catch(t=>{throw this.onApiCall(e,"post",!1),t})}subscribe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.subscribers.push({callback:e,conditionFunction:t,deleteAfterCall:r})}onApiCall(e,t,r){this.subscribers=this.subscribers.filter(n=>{var{callback:i,conditionFunction:o,deleteAfterCall:a}=n;return!(!o||o(e,t,r))||(i(e,t,r),!a)})}},a=i;class s{static getIsLocalStorageAvailable(){try{var e="___localStorageTest___";window.localStorage.setItem(e,"123");var t=window.localStorage.getItem(e);return window.localStorage.removeItem(e),"123"===t}catch(nc){return!1}}static get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.getIsLocalStorageAvailable()?window.localStorage.getItem(e):t}static set(e,t){return!!s.getIsLocalStorageAvailable()&&window.localStorage.setItem(e,t)}static delete(e){s.getIsLocalStorageAvailable()&&window.localStorage.removeItem(e)}static has(e){return!!s.getIsLocalStorageAvailable()&&Object.prototype.hasOwnProperty.call(window.localStorage,e)}}var u=e=>e,l=!1,c=e=>{if(!l){l=!0;try{o.p="".concat((0,r.$_)(e)).concat(o.p)}catch(Ev){console.error("webpack path cannot be resolved",Ev)}}},d="stripchatWidgets_",f={HAS_USER_AUTHORIZED_EVER:"".concat(d,"_hasUserAuthorizedEver"),HAS_WIDGET_ISABELLA_SHOWN:"".concat(d,"_hasIsabellaWidgetShown"),HAS_WIDGET_JOIN_SHOW_SHOWN:"".concat(d,"_hasJoinHerShowWidgetShown"),HAS_WIDGET_STRIPBOT_SHOWN:"".concat(d,"_hasStripbotWidgetShown"),IS_EXIT_POP_SHOWN_IN_SESSION:"".concat(d,"_isExitPopShownInSession"),LAST_TEST_PARAMS:"".concat(d,"_lastTestParams"),LAST_VIEWED_TIME:"".concat(d,"_lastViewedTime"),WIDGET_CLOSED_BY_CLICK:"".concat(d,"_widgetClosedByClick")},h=Promise.resolve.bind(Promise),p=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return class{constructor(e){this.params=e||{},this.playerEnabled=!0}mount(u){var l,{body:d,referrer:p}=document;if(this.params.limitAfterClosure>0){var g=s.get(f.LAST_VIEWED_TIME);if(g)Date.now()-new Date(g).getTime()>6e4*this.params.limitAfterClosure?(s.delete(f.LAST_VIEWED_TIME),this.playerEnabled=!0):this.playerEnabled=!1}return this.playerEnabled?Promise.resolve(e).then((l=c,e=>{var t=l(e);return t&&t.then?t.then(()=>e):e})).then(e=>n.init(o({Api:a,referrer:p,location:{hostname:(0,r.EW)(e),href:(0,r.dF)(e,this.params),origin:"".concat((0,r.Jr)(e),"//").concat((0,r.EW)(e))},body:d,window:window,globals:{},performance:performance,LocalStorage:s})).mount(t,i,u)).then(e=>{var t=0,r={play:()=>(e.play(),t=1,Promise.resolve()),pause:()=>(e.pause(),t=0,Promise.resolve()),setParams:n=>{var i=!!t;return(i?r.pause():h()).then(()=>e.setParams(n).then(()=>i?r.play():h()))},destroy:()=>(e.terminate(),[...u.childNodes].reverse().forEach(e=>{u.removeChild(e)}),r.play=h,r.pause=h,r.destroy=h,Promise.resolve())};return r}):Promise.reject()}}},g=e=>{var t="script#".concat(e),r=document.querySelectorAll("script"),n=1===r.length?r[0]:document.querySelector(t);if(!n)throw new Error("Script #".concat(e," not found"));return n},v=o(9318),m=o.n(v),_=o(6579),y=(e,t)=>e&&t?{width:"".concat(e,"px"),height:"".concat(t,"px")}:e?{width:"".concat(e,"px"),height:"".concat(e*(185/330),"px")}:t?{width:"".concat(t*(330/185),"px"),height:"".concat(t,"px")}:{width:"".concat(330,"px"),height:"".concat(185,"px")},b={Cover:"cover",Contain:"contain"},E={Top:"top",Bottom:"bottom",Left:"left",Right:"right"},O="win_blur",S="win_focus",w="thumb_appear",T="thumb_disappear",M={TopRight:"topRight",TopLeft:"topLeft",BottomRight:"bottomRight",BottomLeft:"bottomLeft"},L=o(8547),A=o.n(L),P=o(6478),j={insert:"head",singleton:!1},D=(A()(P.A,j),P.A.locals||{}),R=o(846),N=o(889),I=o(5983),C=o(9322),k=o(479),x={small:{width:150,height:113},middle:{width:180,height:135},big:{width:240,height:180}},B={small:{width:150,height:146},middle:{width:180,height:175},big:{width:240,height:232}},F={ON_HOVER:"onHover",ALL:"all",NOT_AT_ALL:"notAtAll"},U={HLS:"hls",CANVAS:"canvas"},z=(N.A,I.A,"".concat(k.N5,".com"),C.A,{S_CHAT_BEST:"SChatBest",DEFAULT:"default",SNAPSHOT:"snapshot",PREVIEW:"preview",AVATAR:"avatar"}),V={best:z.DEFAULT,SCBest:z.S_CHAT_BEST},q={Direct:"direct",IfOnline:"ifOnline",IfOnlineNew:"ifOnlineNew"},W=[{models:[]}];function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){H(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function H(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=(e,t,r,n)=>{var i=(0,_.zj)(e),{path:o,query:a={}}=function(e){var{linkToModel:t,modelPromotion:r}=e,{username:n="",modelPromotionId:i,id:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r?{modelPromotionId:i,modelId:o}:{};switch(t){case q.IfOnline:case q.IfOnlineNew:return{path:"/",query:G({onlineModels:n},a)};default:return{path:"/".concat(n),query:G({},a)}}}(i,t);return(0,R.ih)(e,o,G(G(G(G(G({},r),i.thumbType===z.DEFAULT?{thumbModelId:t.id,thumbUrl:t.thumbUrl}:{}),((e,t)=>{var{sortBy:r}=e,{hasSignupRate:n}=t;return"signupRateSort"===r?{fromSignupRate:n}:{}})(i,t)),a),{},{filtersMatch:t.strict,modelId:t.id}),n)},K=o(6773),X=o(1761),J=function(e){return e.Default="default",e.XH="xh",e.CB="cb",e}({}),$=(0,X.A)(_.zj,e=>{var{thumbSizeKey:t,design:r}=e;return t?r===J.CB?B[t]:x[t]:{}}),Z=o(3292),ee=e=>{var t=[];return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=>(t.find(t=>t.args.length===e.length&&t.args.every((t,r)=>t===e[r]))||{}).result)(n)||((e,r)=>(t.push({args:e,result:r}),r))(n,e(...n))}},te=o(6905),re=o(3246),ne=e=>!e.hidden;function ie(e){try{return e.self!==e.top}catch(Ev){return!0}}var oe=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout(()=>{t=null,e(...i)},r)}},ae=o(5950),se=(0,ae.A)("Terminate"),ue=(0,ae.A)("Window blurred"),le=(0,ae.A)("Window focused"),ce=(0,ae.A)("Window scrolled"),de=(0,ae.A)("Window resized");function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach(function(t){pe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=e=>t=>{var{window:r}=t;return{window:he(he({},r),e)}},ve=(0,Z.A)((e,t)=>{var r=ee(e=>()=>e(ue())),n=ee(e=>()=>e(le())),i=ee(t=>()=>t(ce(e.scrollY))),o=t=>t(de({height:e.innerHeight,width:e.innerWidth})),a=ee(e=>oe(()=>o(e),300)),s=te.z.effect(()=>(t,s)=>{e.addEventListener("blur",r(s)),e.addEventListener("focus",n(s)),e.addEventListener("scroll",i(s)),e.addEventListener("resize",a(s)),o(s)}),u=se.effect(()=>(t,o)=>{e.removeEventListener("blur",r(o)),e.removeEventListener("focus",n(o)),e.removeEventListener("scroll",i(o)),e.removeEventListener("resize",a(o))});return{reducer:(0,re.A)({referrer:t,window:{iFramed:ie(e),hasFocus:ne(e.document),scrollTop:0,height:e.innerHeight,width:e.innerWidth}}).on(ce,e=>ge({scrollTop:e})).on(de,ge).on(ue,()=>ge({hasFocus:!1})).on(le,()=>ge({hasFocus:!0})),effects:[s,u],actions:{terminate:()=>(e,t)=>t(se())}}}).requires("window","referrer"),me=o(1981),_e="appearance_and_behaviour",ye={acceptedParamsConfig:[{key:"nonNudeContent",title:"Non nude content",description:"Show only non nude content, if nonNudeContent=1, autoplay forced to notAtAll, backgroundImage Will be forsed to non nude",section:_e,type:me.A.BOOL,default:!1}]},be=((0,Z.A)(()=>({effects:[(0,_.I0)(ye)]})),(0,X.A)(_.zj,e=>{var{nonNudeContent:t}=e;return!!t})),Ee=(0,X.A)(be,_.zj,(e,t)=>{var{autoplay:r,queryParams:n}=t;return e&&!n.autoplay||r===F.NOT_AT_ALL}),Oe=((0,X.A)(_.zj,e=>{var{autoplayForce:t}=e;return t}),e=>!Ee(e)),Se=["ar-SA","zh-CN","hr-HR","cs-CZ","nl-NL","fi-FI","fr-FR","de-DE","el-GR","he-IL","hu-HU","it-IT","ja-JP","ko-KR","nb-NO","es-ES","pl-PL","pt-PT","pt-BR","ro-RO","ru-RU","sv-SE","th-TH","tr-TR","uk-UA","vi-VN"],we="en",Te=()=>{};function Me(){var e=window.MediaSource||window.WebKitMediaSource;if(!e)return!1;var t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}var Le=o(8562),Ae={insert:"head",singleton:!1},Pe=(A()(Le.A,Ae),Le.A.locals||{}),je=e=>{var{createVideo:t,stream:r,modelId:n}=e;return e=>{t({video:e,stream:r,modelId:n})}},De=t=>{var{modelId:r,stream:n,isCircleView:i,muted:o=!0}=t;return(t,a)=>{var{createVideo:s=Te}=a,u=Me(),l=n.url.includes(".mp4");return e("div",{className:Pe.root},e("div",{className:m()(Pe.inner,{[Pe.circle]:i})},e("video",{key:r,id:r,oncreate:je({createVideo:s,stream:n,modelId:r}),autoplay:u&&!l,playsinline:!0,preload:"none",muted:o,disableRemotePlayback:!0})))}},Re=t=>{var{player:r,modelId:n,key:i,model:o,isCircleView:a,muted:s}=t;switch(!0){case o.stream.local:case r===U.HLS:return e(De,{stream:o.stream,key:i,modelId:n,isCircleView:a,muted:s});default:return null}},Ne=o(1373),Ie={insert:"head",singleton:!1},Ce=(A()(Ne.A,Ie),Ne.A.locals||{});function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach(function(t){Be(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fe=null,Ue=()=>{},ze=(e,t)=>{var{play:r=Ue}=t;return()=>{r(e)}},Ve=(e,t)=>{var{pause:r=Ue}=t;return()=>{r(e)}},qe=(e,t)=>{var{pause:r=Ue,play:n=Ue}=t;return t=>{Array.from(document.querySelectorAll("button")).some(e=>e===t.target||e.contains(t.target))||(r(),Fe=setTimeout(()=>{n(e)},300))}},We=(e,t,r)=>{var{onItemCreate:n=Ue,observeIntersections:i=Ue}=r;return t=>{n({modelId:e}),i({key:"thumb",node:t,selector:()=>({modelId:e})})}},Ye=()=>{clearTimeout(Fe)},Ge=t=>{var{key:r,model:n,linkToSection:i,isPlayOnHoverEnabled:o,isPlayingEnabled:a,showModelName:s,className:u,content:l=()=>null,blurredBackground:c=!1,blurredPrivate:d=!0,header:f=null,footer:h=null,additionalClickParams:p={},modelUrlName:g="click"}=t;return(t,v)=>{var{onExitLinkClick:y=Ue}=v,{player:E,playButton:O,thumbFit:S,thumbPlace:w}=(0,_.zj)(t),{id:T,stream:M}=n,L=o&&(!be(t)||M.local),A=(e=>{var{thumbWidth:t,thumbHeight:r}=e;return(0,K.A)(t)||(0,K.A)(r)?$(e):{width:t,height:r}})(t),P=(null==n?void 0:n.prerollImageUrl)||(M.static?n.staticImageUrl:n.thumbUrl),j=xe(xe(xe({},"public"!==n.status&&d?{filter:"blur(25px)",transform:"scale(1.1)"}:{}),S===b.Contain?{backgroundImage:"url(".concat(P,")")}:{}),t.isThumbsSizeFixed?{width:"".concat(A.width,"px"),height:"".concat(A.height,"px")}:{}),D=((e,t)=>(e.playingState||{})[t])(t,T),N=i?(0,R.ih)(t):Q(t,n,p,g);return e("a",{class:m()(Ce.root,u,{[Ce.withShadow]:s}),href:N,id:"model-".concat(T),key:T,oncreate:We(T,0,v),onmouseenter:L?ze(T,v):Ue,onmouseleave:L?Ve(T,v):Ue,ontouchcancel:L?Ye:Ue,ontouchend:L?Ye:Ue,ontouchstart:L||D?qe(T,v):Ue,style:j,onclick:y,target:"_blank",rel:"noopener"},e("img",{style:{objectFit:S,objectPosition:w||"center"},class:Ce.img,src:P,alt:t.i18n&&t.i18n.locale===we?t.i18n.t("{$username} webcam, sex chat, nude photos, and sex videos").replace("{$username}",n.username):n.username}),c&&e("div",{className:Ce.background,style:{backgroundImage:j.backgroundImage}}),e("div",{class:Ce.header},f),a&&e(Re,{player:E,modelId:T,key:r,model:n,actions:v}),!D&&O&&e("svg",{class:Ce.playButton,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("rect",{width:"48",height:"48",rx:"24",fill:"black","fill-opacity":"0.4"}),e("path",{d:"M18.5 18.618C18.5 17.8747 19.2823 17.3912 19.9472 17.7236L30.7111 23.1056C31.4482 23.4741 31.4482 24.5259 30.7111 24.8944L19.9472 30.2764C19.2823 30.6088 18.5 30.1253 18.5 29.382V18.618Z",fill:"white",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"})),e(l,null),e("div",{className:Ce.footer},h))}},He=o(662),Qe={insert:"head",singleton:!1},Ke=(A()(He.A,Qe),He.A.locals,()=>e("svg",{style:{display:"none"}},e("defs",null,e("symbol",{id:"icon-female"},e("path",{d:"m27,24.1c14.3,0 26,11.6 26,25.9c0,13.2 -9.8,24 -22.5,25.7l0,5.7l5.5,0l0,5.5l-5.5,0l0,5.5l-6.8,0l0,-5.5l-5.5,0l0,-5.5l5.5,0l0,-5.7c-12.8,-1.7 -22.6,-12.5 -22.6,-25.7c0,-14.3 11.6,-25.9 25.9,-25.9zm0,6.8c-10.6,0 -19.1,8.5 -19.1,19.1s8.5,19.1 19.1,19.1c10.6,0 19.1,-8.5 19.1,-19.1s-8.5,-19.1 -19.1,-19.1z",fill:"#D63F9B"})),e("symbol",{id:"icon-females"},e("g",{fill:"#D63F9B"},e("path",{d:"M33.4 24.1c5.1 0 9.8 1.5 13.8 4 3.9 2.5 7.1 5.9 9.2 10 1.9 3.6 2.9 7.6 2.9 11.9 0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.5-1.6.7-3.3.7-5.1 0-1.8-.2-3.5-.7-5.1-1.4-5-4.8-9.2-9.2-11.6-2.7-1.5-5.8-2.3-9.2-2.3-10.5 0-19.1 8.6-19.1 19.1s8.6 19.1 19.1 19.1c3.3 0 6.5-.9 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7h5.5v5.5h-5.5v5.5H30v-5.5h-5.5v-5.5H30v-5.7C17.3 74.1 7.5 63.2 7.5 50c0-14.3 11.6-25.9 25.9-25.9z"}),e("path",{d:"M66.6 24.1c14.3 0 25.9 11.6 25.9 25.9 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5H70v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7c-3.8-.5-7.3-1.8-10.4-3.8-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.6 19.1-19.1s-8.6-19.1-19.1-19.1c-3.3 0-6.5.9-9.2 2.4-1.3-1.9-2.9-3.7-4.6-5.2 4-2.6 8.7-4 13.8-4z"}))),e("symbol",{id:"icon-femaleTranny"},e("g",null,e("path",{d:"M30.1 24.1c5.1 0 9.8 1.5 13.8 4 3.9 2.5 7.1 5.9 9.2 10C55 41.7 56 45.7 56 50c0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.5-1.6.7-3.3.7-5.1 0-1.8-.2-3.5-.7-5.1-1.4-5-4.8-9.2-9.2-11.6-2.7-1.5-5.8-2.3-9.2-2.3C19.6 31 11 39.5 11 50.1s8.5 19.1 19.1 19.1c3.3 0 6.4-.8 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7H39v5.5h-5.5v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7C14 74 4.2 63.2 4.2 50c0-14.3 11.6-25.9 25.9-25.9z",fill:"#D63F9B"}),e("path",{d:"M49.5 71.9c-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1s-8.5-19.1-19.1-19.1c-3.3 0-6.5.9-9.2 2.4-1.3-1.9-2.9-3.7-4.6-5.2 4-2.5 8.8-4 13.8-4 6 0 11.4 2 15.8 5.4l5.1-5.1-4.7-4.7 16.2-1.9L93.8 34l-4.7-4.7-5.1 5c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5h-5.5v5.5H60v-5.5h-5.5v-5.5H60v-5.7c-3.9-.5-7.4-1.8-10.5-3.8zM31.3 20.7c4.2.2 8.1 1.3 11.7 3l4.1-4.1L31 17.7l.3 3z",fill:"#A862FF"}))),e("symbol",{id:"icon-male"},e("path",{d:"M82.4 17.7l-1.9 16.2-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7C75.9 64.4 64.3 76 50 76c-14.3 0-25.9-11.6-25.9-25.9s11.6-26 25.9-26c6 0 11.4 2 15.8 5.4l5.1-5.2-4.7-4.7 16.2-1.9zM50 30.9c-10.5 0-19.1 8.6-19.1 19.1S39.5 69.1 50 69.1c10.5 0 19.1-8.6 19.1-19.1S60.6 30.9 50 30.9z",fill:"#61ACEC"})),e("symbol",{id:"icon-maleFemale"},e("g",null,e("path",{d:"M95.8 17.7l-1.9 16.2-4.7-4.7-5.2 5.1c3.3 4.4 5.3 9.8 5.3 15.7 0 14.3-11.6 25.9-25.9 25.9-5.1 0-9.8-1.5-13.9-4-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1 0-10.1-7.9-18.4-17.9-19.1h-1.2c-3.3 0-6.5.9-9.2 2.4-1.3-1.9-2.9-3.7-4.6-5.2 4-2.5 8.8-4 13.8-4 5.7 0 11.3 1.9 15.8 5.4l5.1-5.1-4.7-4.7 16.3-2z",fill:"#61ACEC"}),e("path",{d:"M30.1 24.1c5.1 0 9.8 1.5 13.8 4 3.9 2.5 7.1 5.9 9.2 10C55 41.7 56 45.7 56 50c0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.5-1.6.7-3.3.7-5.1 0-1.8-.2-3.5-.7-5.1-1.4-5-4.8-9.2-9.2-11.6-2.7-1.5-5.8-2.3-9.2-2.3C19.6 31 11 39.5 11 50.1s8.5 19.1 19.1 19.1c3.3 0 6.4-.8 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7H39v5.5h-5.5v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7C14 74 4.2 63.2 4.2 50c0-14.3 11.6-25.9 25.9-25.9z",fill:"#D63F9B"}))),e("symbol",{id:"icon-males"},e("g",{fill:"#61ACEC"},e("path",{d:"M62.6 17.7l-1.9 16.2-4.7-4.8-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 4.3-1 8.4-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8 0 0 .7-3.4.7-5.2 0-10.6-8.6-19.1-19.1-19.1-10.6.1-19.2 8.7-19.2 19.3s8.6 19.1 19.1 19.1c3.3 0 6.4-.8 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2h-.2C39.7 74.6 35 76 30 76 15.7 76 4 64.4 4 50s11.6-26 26-26c6 0 11.5 2 15.8 5.4l5.2-5.2-4.7-4.7 16.3-1.8z"}),e("path",{d:"M95.8 17.7l-1.9 16.2-4.7-4.7-5.2 5.1c3.3 4.4 5.3 9.8 5.3 15.7 0 14.3-11.6 26-26 26-5.1 0-9.9-1.5-13.9-4-3.9-2.5-7.1-6-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.6 0 19.1-8.6 19.1-19.1 0-10.2-7.9-18.5-17.9-19.1l.8-6.8c5.2.4 9.9 2.3 13.8 5.3l5.2-5.2-4.7-4.7 16.3-1.9z"}))),e("symbol",{id:"icon-maleTranny"},e("g",null,e("path",{d:"M49.5 71.9c-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1 0-10.1-7.9-18.4-17.9-19.1l.8-6.8c5.2.4 9.9 2.3 13.8 5.3l5.1-5.1-4.7-4.7 16.2-1.9-1.9 16.2-4.7-4.7-5.1 5.1c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5h-5.5v5.5H60v-5.5h-5.5v-5.5H60v-5.7c-3.9-.5-7.4-1.8-10.5-3.8zM31.3 20.7c4.2.2 8.1 1.3 11.7 3l1.4-1.4-3.4-3.4-10-1.2.3 3z",fill:"#A862FF"}),e("path",{d:"M62.6 17.7l-1.9 16.2-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 4.3-1 8.4-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8 0 0 .7-3.4.7-5.2 0-10.5-8.5-19.1-19.1-19.1-10.5 0-19.1 8.5-19.1 19.1s8.5 19.1 19.1 19.1c3.3 0 6.4-.8 9.1-2.3 1.3 1.9 2.9 3.7 4.6 5.2h-.2c-4 2.5-8.6 3.9-13.7 3.9C15.8 75.9 4.2 64.3 4.2 50s11.6-25.9 25.9-25.9c6 0 11.4 2 15.8 5.4l5.1-5.1-4.7-4.7 16.3-2z",fill:"#61ACEC"}))),e("symbol",{id:"icon-tranny"},e("path",{d:"M50 24.1c6 0 11.4 2 15.8 5.4l5.1-5.1-4.7-4.7 16.2-1.9L80.5 34l-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5h-5.5v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7C33.9 74 24.1 63.2 24.1 50c0-5.9 2-11.4 5.3-15.8l-5.1-5.1-4.7 4.7-1.9-16.2 16.2 1.9-4.7 4.7 5.1 5.1c4.3-3.2 9.8-5.2 15.7-5.2zm0 6.8c-10.5 0-19.1 8.5-19.1 19.1S39.5 69.1 50 69.1c10.5 0 19.1-8.5 19.1-19.1S60.6 30.9 50 30.9z",fill:"#A862FF"})),e("symbol",{id:"icon-trannies"},e("g",{fill:"#A862FF"},e("path",{d:"M33.4 24.1c5.7 0 11.3 1.9 15.8 5.4l5.1-5.1-4.7-4.7 16.2-1.9L63.9 34l-4.7-4.7-5.2 5c3.4 4.5 5.3 10 5.3 15.7 0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.4-1.6.7-3.3.7-5.1 0-10.5-8.5-19.1-19.1-19.1-10.5 0-19.1 8.5-19.1 19.1s8.5 19.1 19.1 19.1c3.3 0 6.5-.9 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7h5.5V87h-5.5v5.5H30V87h-5.5v-5.5H30v-5.7C17.2 74 7.4 63.2 7.4 50c0-5.9 2-11.4 5.3-15.8l-5.1-5.1-4.7 4.7L1 17.7l16.2 1.9-4.7 4.7 5.1 5.1c4.4-3.3 9.8-5.3 15.8-5.3z"}),e("path",{d:"M52.7 71.9c-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1 0-10.1-7.9-18.4-17.9-19.1l.8-6.8c5.2.4 9.9 2.3 13.8 5.3l5.1-5.1-4.7-4.7L99 17.7l-1.9 16.2-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5V87H70v5.5h-6.8V87h-5.5v-5.5h5.5v-5.7c-3.8-.6-7.4-1.9-10.5-3.9zM34.6 20.7c4.2.2 8.1 1.3 11.7 3l1.4-1.4-3.4-3.4-10.1-1.2.4 3z"})))))),Xe=o(8273),Je={insert:"head",singleton:!1},$e=(A()(Xe.A,Je),Xe.A.locals||{}),Ze=(t,r)=>{var{color:n,big:i}=t;return e("div",{class:m()($e.root,{[$e.big]:i}),style:{backgroundColor:n}},r)},et=o(9679),tt={insert:"head",singleton:!1},rt=(A()(et.A,tt),et.A.locals||{}),nt=t=>{var{color:r,big:n,dotColor:i,capitalize:o,hideDot:a,onlyDot:s,className:u}=t,l=n?"small":"span",c=o?"Live":"LIVE";return s?e("div",{className:rt.dotLive,style:{backgroundColor:r}}):e(Ze,{color:r,big:n},e("div",{className:m()(rt.root,u)},!a&&e("span",{className:m()(rt.online,{[rt.big]:n}),style:{backgroundColor:i}}),e(l,null,c)))},it=t=>{var{big:r}=t;return e(Ze,{color:"#566fff",big:r},"VR")},ot=o(3520),at={insert:"head",singleton:!1},st=(A()(ot.A,at),ot.A.locals||{}),ut=t=>{var{left:r,right:n}=t;return e("div",{class:st.root},r&&e("div",{class:st.left},r),n&&e("div",{class:st.right},n))},lt=o(3957),ct={insert:"head",singleton:!1},dt=(A()(lt.A,ct),lt.A.locals||{}),ft=t=>{var{liveBadge:r,showVRBadge:n,big:i}=t;return e("div",{class:m()(dt.root,{[dt.big]:i})},e(ut,{left:r,right:n?e(it,{big:i}):null}))},ht=e=>{var{broadcastGender:t,gender:r}=e;return"group"===t?r:t},pt=e=>{return e.broadcastVR||(t=e.tags,r="autoTagVr",t&&t.length&&-1!==t.indexOf(r));var t,r};function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gt.apply(null,arguments)}var vt=(t,r)=>{var{href:n}=t,i="http://www.w3.org/1999/xlink",o=(e,t)=>{n?e.setAttributeNS(i,"href",n):t&&n===t.href||e.removeAttributeNS(i,"href")};return e("use",gt({},t,{oncreate:o,onupdate:o}),r)},mt=t=>{var{href:r,className:n,viewBox:i="0 0 100 100"}=t;return e("svg",{class:m()("icon",[n]),viewBox:i},e(vt,{href:r}))},_t=o(5319),yt={insert:"head",singleton:!1},bt=(A()(_t.A,yt),_t.A.locals||{}),Et=t=>{var{rightBadges:r,leftBadges:n,model:i,responsive:o,hideOnSmallSpots:a,hideModelName:s=!1,genderIcon:u=!0,big:l,modelName:c=""}=t;return e("div",{class:m()(bt.root,{[bt.big]:l,[bt.hideOnSmallSpots]:a})},e(ut,{left:i&&!s&&[e("div",{"qa-element":"model-name",className:m()(bt.modelName,{[bt.modelNameResponsive]:o})},c||i.screenName||i.username),...u?[e(mt,{href:"#icon-".concat(ht(i)),className:o?bt.iconResponsive:null})]:[],...n?[n]:[]],right:r}))},Ot=o(6617),St={insert:"head",singleton:!1},wt=(A()(Ot.A,St),Ot.A.locals||{}),Tt=o(9418),Mt=o(1385),Lt={insert:"head",singleton:!1},At=(A()(Mt.A,Lt),Mt.A.locals||{}),Pt=e=>!e,jt=t=>{var{username:r,status:n}=t;return t=>{var{siteName:i,themePalette:{primary:o="#a2252d"}={}}=(0,Tt.JO)(t);return e("div",{className:At.root},e("div",null,e("h1",{className:At.head},r," is currently"," ",Pt(n)?"offline":"on private session"),Pt(n)?e("div",null,"Check out similar models on"," ",e("a",{target:"_blank",style:{color:o},href:(0,R.GN)("goToTheRoom",t)},i)):e("div",null,"Check out her room on"," ",e("a",{target:"_blank",style:{color:o},href:(0,R.ih)(t,"/".concat(r))},i))))}},Dt={},Rt=t=>{var{fontSize:r="22px",lpomega:n=!1,model:i=null}=t;return t=>{var{hideModelName:o,hideLiveBadge:a,liveBadgeColor:s,modelName:u}=(0,_.zj)(t),l=i||t.modelsList[0]||Dt,c="public"===l.status;return e("div",{className:wt.layoutWrapper,style:{fontSize:r}},e(Ke,null),l===Dt?e(jt,{username:u}):[e(Ge,{key:"player",model:l,header:e(ft,{showVRBadge:pt(l)&&!n,liveBadge:!n&&!a&&e(nt,{color:s})}),footer:!o&&!n&&e(Et,{model:l}),isPlayingEnabled:Oe(t)&&c,blurredBackground:n}),c?null:e(jt,{username:l.username,status:l.status})])}},Nt=o(3847);function It(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}var Ct=function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){It(o,n,i,a,s,"next",e)}function s(e){It(o,n,i,a,s,"throw",e)}a(void 0)})}}(function*(e){for(var t of e)try{return yield t()}catch(r){}return null});return function(t){return e.apply(this,arguments)}}(),kt=Ct,xt=["ar","br","cz","de","en","es","fr","gr","hu","it","jp","nl","no","pl","pt","ro","ru","sw","tr","ja","sv","el","cs","zh","ko"];var Bt=(e,t,n)=>{var i,o,{hostname:a,href:s}=e,u=function(e){var t=e.match(new RegExp("^(.*\\.|)(".concat(xt.join("|"),")\\..*$")));return t&&t[2]}(a)||(i=s,null!==(o=(0,r.Vw)(i).language)&&void 0!==o?o:null)||t.language,l={hit:[],partialHit:[]};return n.forEach(e=>{if(e!==u){if(2===u.length||"-"===u[2]){var t=u.slice(0,2);e.startsWith(t)&&l.partialHit.push(e)}}else l.hit.push(e)}),[...l.hit,...l.partialHit,we]};function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach(function(t){qt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zt(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function Vt(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){zt(o,n,i,a,s,"next",e)}function s(e){zt(o,n,i,a,s,"throw",e)}a(void 0)})}}function qt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Wt{constructor(e,t){qt(this,"i18nPaths",void 0),qt(this,"data",{}),qt(this,"locale",we),qt(this,"hostname",void 0),qt(this,"checkSameLocale",(e,t)=>e.every(e=>{var{locale:r}=e;return r===t})),this.hostname=t,this.i18nPaths=e}init(e){var t=this;return Vt(function*(){var r,n,i=yield Promise.all(t.i18nPaths.map(r=>t.loadTranslationFile(r,e))),o=i.reduce((e,t)=>{var{data:r}=t;return Ut(Ut({},e),r)},{}),a=null!==(r=null===(n=i[0])||void 0===n?void 0:n.locale)&&void 0!==r?r:we;return t.checkSameLocale(i,a)?t.locale=a:t.locale=we,t.data=o,t})()}loadTranslationFile(e,t){var r=this;return Vt(function*(){var n=e.startsWith("/")?"/static/912b1285/s":o.p||"",i=e.startsWith("http")?e:"https://".concat(r.hostname).concat(n).concat(e),s=t.map(e=>Vt(function*(){return{data:yield a.get("".concat(i,"/").concat(e,".json")),locale:e}})),u=yield kt(s);return null!=u?u:{data:{},locale:we}})()}t(e,t){var r="number"==typeof t,n=r?function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("|");return r[((e,t)=>{switch(t){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":default:return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1===e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"hy":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1===e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1===e?0:e>=2&&e<=4?1:2;case"ga":return 1===e?0:2===e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1===e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1===e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1===e?0:2===e?1:8===e||11===e?2:3;case"ro":return 1===e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1===e?1:2===e?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5}})(e,t.slice(0,2))]||r[0]||void 0}(this.data[e],t,this.locale):this.data[e];if(void 0===n)return e;try{return r?(0,Nt.sprintf)(n,t):n}catch(nc){return console.error(nc),n}}}var Yt=(t,r)=>{var{message:n,count:i,context:o}=t;return t=>e("span",null,t.i18n.t(n||r[0],i,o))};var Gt,Ht,Qt,Kt=t=>{var{actions:r}=t;return t=>{var{spot:{closable:n},modelsList:i}=t,{hideButton:o,thumbsMargin:a}=(0,_.zj)(t),s=1===i.length;return e("div",{style:{gap:s?"0px":"".concat(a,"px")},className:D.rootContent},i.map(r=>e("div",{className:D.modelWrapper},!o&&e("a",{className:m()(D.ctaButton,{[D.ctaButtonSingle]:s}),target:"_blank",href:Q(t,r)},e(Yt,null,"Live sex")),e(Rt,{model:r,fontSize:"16px"}))),n&&e("button",{className:D.closeButton,onclick:r.handleClose,type:"button"},"Close ad "))}},Xt=o(3698),Jt=o(3208),$t=o(6628),Zt=o(3614),er=(Gt=Array.isArray.bind(Array),Ht=e=>"[".concat(e.reduce((e,t)=>{var{key:r,value:n}=t;return(0,K.A)(n)?e:[...e,"".concat(r,"=").concat(n)]},[]).join("|"),"]"),Qt=u,function(){return Gt(...arguments)?Ht(...arguments):Qt(...arguments)}),tr=["filterOptions"],rr=["models","defaultTags","total","prevailingGender"];function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach(function(t){or(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function or(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var sr=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{filterOptions:n}=r,i=ar(r,tr),o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4?arguments[4]:void 0;return e.get((0,Jt.FB)(t,a||"modelsApi"),(0,$t.A)(ir(ir(ir({landing:(0,_.zj)(t).landing},i),n?{filterOptions:er(n)}:{}),i.stripcashR?{cb:Math.abs((0,Zt.A)("".concat(Math.random()).concat(Date.now())))}:{})),o?{credentials:"include",mode:"cors"}:{}).then(e=>{var{models:t,defaultTags:r=[],total:n,prevailingGender:i}=e;return{prevailingGender:i,tags:r,meta:ar(e,rr),total:n,models:t}})},ur=e=>t=>t.reduce((t,r)=>t+(r[e]?1:0),0),lr=ur("inWatchHistory"),cr=ur("inFavorites");function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach(function(t){hr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pr={acceptedParamsConfig:[{key:"forceClient",type:me.A.BOOL,default:!0,private:!0},{key:"usePreroll",section:_e,type:me.A.BOOL},{key:"strict",type:me.A.BOOL,private:!0},{key:"tag",type:me.A.STRING,convertValue:e=>"couple"===e?"couples":e,private:!0},{key:"limit",title:"Limit of models to show",description:"Limit can not be greater than defined by creative",type:me.A.INT,min:1,private:!0},{key:"stripcashR",title:"Retargeting",description:"Parameter to get in resposne necessary data and sorting for retargeting campaigns",section:_e,type:me.A.BOOL,default:!1},{key:"sortBy",private:!0,type:me.A.ENUM,enum:["signupRateSort"]},{key:"linkToModel",title:"Link to model",description:"determines location of click by model, direct to models page or throw checking her online status",section:_e,type:me.A.ENUM,multiple:!1,enum:Object.values(q),default:q.IfOnlineNew,private:!0},{key:"modelPromotion",title:"Model promotion",description:"",section:_e,type:me.A.BOOL,default:!1}]},gr=o(2712),vr=o(3911);function mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(r),!0).forEach(function(t){yr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var br=(0,X.A)(_.zj,e=>{var{modelsLimit:t,limit:r=1/0}=e;return Math.min(r,t)}),Er=(0,X.A)(_.zj,e=>{var{lovescapeModelsLimit:t,limit:r=1/0}=e;return Math.min(r,t)}),Or=["".concat(k.ky,"R"),"forceClient","usePreroll","modelPromotion"],Sr=(0,X.A)(_.zj,e=>{var{modelsApiParameters:t}=e;return t},(e,t)=>_r(_r({},(0,gr.A)((e,r)=>!(0,vr.A)(e)&&t.includes(r),e.queryParams)),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((e,r)=>(Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]),e),{})}(Or,e))),wr=(0,X.A)(Sr,br,(e,t)=>_r(_r({},e),{},{limit:t})),Tr=(0,X.A)(Sr,Er,(e,t)=>_r(_r({},e),{},{limit:t})),Mr=(0,X.A)(_.zj,e=>{var{quality:t}=e;return t});function Lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(r),!0).forEach(function(t){Pr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jr=(e,t)=>Object.keys(e.stream.urls).reduce((e,r)=>Ar(Ar({},e),{},{[r]:t}),{});function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach(function(t){Nr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Nr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ir=(e,t)=>{var r;return 0===(null==t||null===(r=t.models)||void 0===r?void 0:r.length)?e:Rr(Rr({},e),{},{models:null==e?void 0:e.models.map((r,n)=>{if(n<e.meta.requestedLimit){var i=null==t?void 0:t.models[n];return i?Rr(Rr(Rr({},r),i),{},{stream:Rr(Rr(Rr({},r.stream),i.stream),{},{urls:jr(r,i.stream.url)})}):r}return r})})};var Cr=function(e){return new Promise((t,r)=>{var n=document.createElement("video");n.src=e,n.crossOrigin="anonymous",n.currentTime=1,n.onloadeddata=()=>{var e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0,e.width,e.height),t(e.toDataURL("image/jpeg"))},n.onerror=e=>r(e)})},kr=()=>({models:[]}),xr=(e,t,n,i)=>{var o=(0,r.dF)((0,Tt.FB)(n,"prerollsUrl"),{videosList:i.join(",")});return e.get(o).then(e=>{var{videos:t=[]}=e;return Promise.all(t.map(e=>Cr(e).then(e=>e).catch(()=>""))).then(e=>({models:e.map((e,r)=>{var n=t[r],i=(e=>{var t=e.split("/");return t[t.length-1].split(".").shift()})(n);return{screenName:i,prerollImageUrl:e,stream:{url:n,urls:{original:n}}}})})).catch(kr)}).catch(kr)};function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach(function(t){Ur(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ur(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zr=e=>e.slice(0,2).reduce((e,t)=>Fr(Fr(Fr({},t),e),{},{models:[...e.models,...t.models]}),{models:[]}),{impressionReadyEvent:Vr}=o(4343),{modelsApiLoaded:qr}=o(3698),Wr=qr.effectOnce(()=>(e,t)=>{t(Vr())});function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach(function(t){Hr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Hr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modelsApi",t=arguments.length>1?arguments[1]:void 0;return(0,Z.A)((r,n)=>{var i=Xt.modelsLoadedEvent.effect(()=>(e,t)=>t((0,Xt.modelsReadyEvent)())),o=Xt.replaceModelByModel.effect(e=>{var{replaceBy:{id:t}}=e;return(e,r)=>r((0,Xt.modelsReadyEvent)({id:t}))}),a=Xt.startLoadingModels.effect(t=>(i,o)=>{o((0,Xt.modelsLoadingStarted)());var{videosList:a=[],landing:s="",queryParams:u}=(0,_.zj)(i),l=a.length>0&&"LPAkira"===s,c=Gr(Gr({},wr(i)),t),d=[sr(r,i,c,"verticalModelsApi"!==e,e)];return"ls"===(null==u?void 0:u.lpversion)&&d.push(((e,t,r,n)=>new Promise(i=>sr(e,t,n,!0,r).then(e=>i(e)).catch(()=>i(W))))(r,i,"loveScapeModelsApi",Gr(Gr({},Tr(i)),t))),l&&d.push(xr(r,n,i,a)),Promise.all(d).then(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[W],r=t[0];return"ls"===(null==u?void 0:u.lpversion)&&(r=zr(t)),l&&(r=Ir(r,t[t.length-1])),o((null===(e=r)||void 0===e||null===(e=e.models)||void 0===e?void 0:e.length)>0?(0,Xt.modelsLoadedEvent)(r):(0,Xt.modelsNotLoadedEvent)(Gr(Gr({},r),{},{requestParams:c})),(0,Xt.modelsApiLoaded)(r))})});return{reducer:(0,re.A)({prevailingGender:"female",isLoading:!1,modelsApiParameters:[],modelsList:[],isThumbsSizeFixed:!1,modelsMeta:{shownModelsCount:0,modelsInWatchHistoryCount:-1,modelsInFavoritesCount:-1}}).on(Xt.replaceModelByModel,e=>{var{modelId:t,replaceBy:r}=e;return e=>{var{modelsList:n}=e;return{modelsList:n.map(e=>e.id===t?r:e)}}}).on(Xt.modelsApiParametersLoaded,function(){return{modelsApiParameters:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}).on(Xt.modelThumbRenderedEvent,()=>e=>{var{modelsMeta:t}=e;return{modelsMeta:fr(fr({},t),{},{shownModelsCount:t.shownModelsCount+1})}}).on(Xt.modelsLoadingStarted,()=>()=>({isLoading:!0})).on(Xt.modelsApiLoaded,e=>{var{tags:t,meta:r,prevailingGender:n}=e;return e=>({prevailingGender:n||e.prevailingGender,tags:t,isLoading:!1,modelsMeta:fr(fr(fr({},e.modelsMeta),r),{},{shownModelsCount:0})})}).on(Xt.modelsLoadedEvent,e=>{var{models:t}=e;return e=>({modelsList:t,modelsMeta:fr(fr({},e.modelsMeta),{},{modelsInWatchHistoryCount:(0,_.zj)(e).stripcashR?lr(t):-1,modelsInFavoritesCount:(0,_.zj)(e).stripcashR?cr(t):-1})})}),effects:[(0,_.I0)(pr),i,o,...void 0===t?[Wr]:[],a],actions:{onItemCreate:e=>{var{modelId:t}=e;return(e,r)=>r((0,Xt.modelThumbRenderedEvent)({modelId:t}))}}}}).requires("Api","location")},Kr=Qr,Xr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.forEach(t=>t(e))},Jr=(e,t,r)=>function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te,o=[],a=()=>Xr(...o)();t&&o.push(e(t,Xr(n,a),!0)),r&&o.push(e(r,Xr(i,a),!0))},$r=(e,t)=>r=>(n,i,o)=>{var a=wr(n);return i((0,_._M)(t(r))),JSON.stringify(a)===JSON.stringify(wr(n))?Promise.resolve():(i(e()),new Promise(Jr(o,Xt.modelsLoadedEvent,Xt.modelsNotLoadedEvent)).catch(e=>{var{requestParams:t}=e,r=new Error("Models response is empty!");return r.requestParams=t,Promise.reject(r)}))},Zr=o(6561),en=o.n(Zr),tn=()=>{var e=new(en()),t={emit:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(t=>{var{name:r,payload:n}=t;return e.emit(r,n)})},on:(r,n)=>(r.once?e.once(r.eventName,n):e.on(r.eventName,n),t),off:(r,n)=>(e.off(r.eventName,n),t),once:(r,n)=>(e.once(r.eventName,n),t)};return t},rn=["$update","$effect"];function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach(function(t){an(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function an(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sn=e=>{var t,{modules:r}=e,n=[...r],i=tn(),o=i.emit,a=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?i.once(e,t):i.on(e,t),()=>{i.off(e,t)}};return{addModules(e){return n.push(...e),this},init(e){return t=Promise.all(n.map(t=>t(on({},e)))).then(e=>e.reduce((e,t)=>({reducers:[...e.reducers,...t.reducer?[t.reducer]:[]],initialState:on(on({},e.initialState),(t.reducer||{}).initialState),effects:[...e.effects,...t.effects||[]],actions:Object.keys(t.actions||{}).reduce((e,r)=>{return on(on({},e),{},{[r]:(n=t.actions[r],e=>t=>{var r=n(e);return"function"==typeof r?r(t,o,a):r})});var n},e.actions)}),{initialState:{},reducers:[],effects:[],actions:{$effect:e=>t=>{"function"==typeof e&&e(t,o,a)},$update:e=>t=>"function"==typeof e?e(t):e}})),this},mount(e,r,n){return n&&n.firstChild&&n.insertBefore(document.createElement("div"),n.firstChild),t.then(t=>{var a,{initialState:s,actions:u,reducers:l,effects:c}=t,d=e(s,u,r,n),{$update:f,$effect:h}=d,p=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(d,rn);return l.forEach(e=>e.bind(i,f)),(a=c,a.reduce((e,t)=>e.concat(t),[])).forEach(e=>{var{event:t,effect:r,options:n}=e,o=e=>h(r(e));n.once?i.once(t,o):i.on(t,o)}),o((0,te.$)(),(0,te.z)()),p.dispatch=o,p})}}};function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?un(Object(r),!0).forEach(function(t){cn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dn=()=>{var e={},t={};return{waitFor(e){var r,n=this.get(e);if(n)return Promise.resolve(n);var i=new Promise(e=>{r=e});return t[e]=[...t[e]||[],r],i},create(r,n){e[r]=n,(t[r]||[]).forEach(e=>e(n))},update(t,r){e[t]=ln(ln({},e[t]||{}),r)},get(t){return e[t]},all(){return Object.values(e)},clearTimeouts(e){var t=this.get(e);t&&(clearTimeout(t.recoveryTimeout),delete t.recoveryTimeout)},clearPlayingInterval(e){var t=this.get(e);t&&clearInterval(t.playingInterval)}}},fn=e=>{var{video:t,onPlay:r,onError:n,onMetaLoaded:i}=e,o=()=>n({fatal:!1,type:"mp4"});t.addEventListener("loadedmetadata",i),t.addEventListener("error",o),t.addEventListener("abort",o),t.addEventListener("timeupdate",r)},hn={height:"auto",width:"100%",maxHeight:"unset"},pn={width:"auto",height:"100%",maxWidth:"unset"},gn={height:"100%",width:"100%"},vn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{thumbFit:r,thumbPlace:n}=arguments.length>2?arguments[2]:void 0,i={};if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){if(r===b.Contain)i=gn;else{var o=e.parentElement,a=o.offsetHeight,s=o.offsetWidth,{height:u=e.videoHeight,width:l=e.videoWidth}=t;i=s/a-l/u>0?hn:pn}n&&Object.values(E).includes(n)&&(i.objectPosition=n)}Object.assign(e.style,i)};var mn,_n=e=>{switch(e){case z.S_CHAT_BEST:return"popularSnapshotUrl";case z.PREVIEW:return"previewUrl";case z.AVATAR:return"avatarUrl";default:return"snapshotUrl"}},yn=(0,X.A)(_.zj,(e,t)=>t,(e,t)=>{var{thumbType:r,queryParams:n}=e;if(!n.thumbType&&t.staticImageUrl)return"staticImageUrl";var i=_n(r);return t[i]?i:_n()}),bn=(e,t)=>!!((e,t)=>{var{thumbsByModelId:r}=t;return r[e]||{}})(e,t).visible,En=e=>{var t=be(e);return function(){var{stream:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?e.local:!e.static}},On=(e,t,r)=>{if("vertical"===(0,_.zj)(e).landing)return!0;var{window:{hasFocus:n,iFramed:i},limitExceeded:o}=e;if(o||!e.modelsList[r]||!En(e)(e.modelsList[r]))return!1;var a=bn(t,e);return(0,_.zj)(e).autoplay===F.ALL&&(a&&(i||n))},Sn=(e,t)=>{for(var r=0;r<t.length;){if(e(t[r]))return r;r+=1}return-1},wn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.modelsList.map(e=>{var{id:t}=e;return t}).filter(e=>!t||e===t)},Tn=(0,ae.A)("Model start playing"),Mn=(0,ae.A)("Model(s) stop playing"),Ln=(0,ae.A)("Model(s) is playing"),An=(0,ae.A)("Player is gone"),Pn=(0,ae.A)("Player data downloaded"),jn=(0,ae.A)("Player disabled"),Dn=(0,ae.A)("Player enabled"),Rn=(0,ae.A)("Window blured or focused"),Nn=(0,ae.A)("Send playback error"),In=(0,ae.A)("Set failed to play count"),Cn=o(8960);function kn(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function xn(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){kn(o,n,i,a,s,"next",e)}function s(e){kn(o,n,i,a,s,"throw",e)}a(void 0)})}}function Bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(r),!0).forEach(function(t){Un(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Un(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zn(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var Vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o.g?o.g:{};function qn(e){return e&&e.__esModule?e.default:e}var Wn={},Yn={},Gn=Vn.parcelRequire5d5f;null==Gn&&((Gn=function(e){if(e in Wn)return Wn[e].exports;if(e in Yn){var t=Yn[e];delete Yn[e];var r={id:e,exports:{}};return Wn[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){Yn[e]=t},Vn.parcelRequire5d5f=Gn),Gn.register("8NFq9",function(e,t){zn(e.exports,"default",function(){return Gn("a8VW4").__decorate}),Gn("a8VW4")}),Gn.register("a8VW4",function(e,t){function r(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}zn(e.exports,"__decorate",function(){return r}),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}),Gn.register("eQOGK",function(e,t){zn(e.exports,"default",function(){return r});var r=function(e,t,r){if(!r||"function"!=typeof r.value)throw new TypeError("Only methods can be decorated with @bind. <".concat(t,"> is not a method!"));return{configurable:!0,get(){var e,n=null===(e=r.value)||void 0===e?void 0:e.bind(this);return Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n}}}}),Gn.register("3mtZ4",function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=32,u=128,l=1/0,c=9007199254740991,d=NaN,f=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],p="[object Arguments]",g="[object Array]",v="[object Boolean]",m="[object Date]",_="[object Error]",y="[object Function]",b="[object GeneratorFunction]",E="[object Map]",O="[object Number]",S="[object Object]",w="[object Promise]",T="[object RegExp]",M="[object Set]",L="[object String]",A="[object Symbol]",P="[object WeakMap]",j="[object ArrayBuffer]",D="[object DataView]",R="[object Float32Array]",N="[object Float64Array]",I="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",x="[object Uint8Array]",B="[object Uint8ClampedArray]",F="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,G=RegExp(W.source),H=RegExp(Y.source),Q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),re=/^\s+/,ne=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,ye=/['\n\r\u2028\u2029\\]/g,be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Oe="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",we="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Me="["+Te+"]",Le="["+be+"]",Ae="\\d+",Pe="["+Ee+"]",je="["+Oe+"]",De="[^\ud800-\udfff"+Te+Ae+Ee+Oe+Se+"]",Re="\ud83c[\udffb-\udfff]",Ne="[^\ud800-\udfff]",Ie="(?:\ud83c[\udde6-\uddff]){2}",Ce="[\ud800-\udbff][\udc00-\udfff]",ke="["+Se+"]",xe="\\u200d",Be="(?:"+je+"|"+De+")",Fe="(?:"+ke+"|"+De+")",Ue="(?:['](?:d|ll|m|re|s|t|ve))?",ze="(?:['](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+Le+"|"+Re+")?",qe="["+we+"]?",We=qe+Ve+"(?:"+xe+"(?:"+[Ne,Ie,Ce].join("|")+")"+qe+Ve+")*",Ye="(?:"+[Pe,Ie,Ce].join("|")+")"+We,Ge="(?:"+[Ne+Le+"?",Le,Ie,Ce,"[\ud800-\udfff]"].join("|")+")",He=RegExp("[']","g"),Qe=RegExp(Le,"g"),Ke=RegExp(Re+"(?="+Re+")|"+Ge+We,"g"),Xe=RegExp([ke+"?"+je+"+"+Ue+"(?="+[Me,ke,"$"].join("|")+")",Fe+"+"+ze+"(?="+[Me,ke+Be,"$"].join("|")+")",ke+"?"+Be+"+"+Ue,ke+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Ye].join("|"),"g"),Je=RegExp("["+xe+"\ud800-\udfff"+be+we+"]"),$e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],et=-1,tt={};tt[R]=tt[N]=tt[I]=tt[C]=tt[k]=tt[x]=tt[B]=tt[F]=tt[U]=!0,tt[p]=tt[g]=tt[j]=tt[v]=tt[D]=tt[m]=tt[_]=tt[y]=tt[E]=tt[O]=tt[S]=tt[T]=tt[M]=tt[L]=tt[P]=!1;var rt={};rt[p]=rt[g]=rt[j]=rt[D]=rt[v]=rt[m]=rt[R]=rt[N]=rt[I]=rt[C]=rt[k]=rt[E]=rt[O]=rt[S]=rt[T]=rt[M]=rt[L]=rt[A]=rt[x]=rt[B]=rt[F]=rt[U]=!0,rt[_]=rt[y]=rt[P]=!1;var nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},it=parseFloat,ot=parseInt,at="object"==typeof Vn&&Vn&&Vn.Object===Object&&Vn,st="object"==typeof self&&self&&self.Object===Object&&self,ut=at||st||Function("return this")(),lt=t&&!t.nodeType&&t,ct=lt&&e&&!e.nodeType&&e,dt=ct&&ct.exports===lt,ft=dt&&at.process,ht=function(){try{return ct&&ct.require&&ct.require("util").types||ft&&ft.binding&&ft.binding("util")}catch(e){}}(),pt=ht&&ht.isArrayBuffer,gt=ht&&ht.isDate,vt=ht&&ht.isMap,mt=ht&&ht.isRegExp,_t=ht&&ht.isSet,yt=ht&&ht.isTypedArray;function bt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Et(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}function Ot(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function St(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function wt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Tt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function Mt(e,t){return!(null==e||!e.length)&&kt(e,t,0)>-1}function Lt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function At(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Pt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function jt(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function Dt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Rt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Nt=Ut("length");function It(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function Ct(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function kt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Ct(e,Bt,r)}function xt(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Bt(e){return e!=e}function Ft(e,t){var r=null==e?0:e.length;return r?qt(e,t)/r:d}function Ut(e){return function(t){return null==t?r:t[e]}}function zt(e){return function(t){return null==e?r:e[t]}}function Vt(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}function qt(e,t){for(var n,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==r&&(n=n===r?a:n+a)}return n}function Wt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Yt(e){return e?e.slice(0,sr(e)+1).replace(re,""):e}function Gt(e){return function(t){return e(t)}}function Ht(e,t){return At(t,function(t){return e[t]})}function Qt(e,t){return e.has(t)}function Kt(e,t){for(var r=-1,n=e.length;++r<n&&kt(t,e[r],0)>-1;);return r}function Xt(e,t){for(var r=e.length;r--&&kt(t,e[r],0)>-1;);return r}var Jt=zt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),$t=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zt(e){return"\\"+nt[e]}function er(e){return Je.test(e)}function tr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function rr(e,t){return function(r){return e(t(r))}}function nr(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==a||(e[r]=a,o[i++]=r)}return o}function ir(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function or(e){return er(e)?function(e){for(var t=Ke.lastIndex=0;Ke.test(e);)++t;return t}(e):Nt(e)}function ar(e){return er(e)?function(e){return e.match(Ke)||[]}(e):function(e){return e.split("")}(e)}function sr(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var ur=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),lr=function e(t){var o,ne=(t=null==t?ut:lr.defaults(ut.Object(),t,lr.pick(ut,Ze))).Array,be=t.Date,Ee=t.Error,Oe=t.Function,Se=t.Math,we=t.Object,Te=t.RegExp,Me=t.String,Le=t.TypeError,Ae=ne.prototype,Pe=Oe.prototype,je=we.prototype,De=t["__core-js_shared__"],Re=Pe.toString,Ne=je.hasOwnProperty,Ie=0,Ce=(o=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",ke=je.toString,xe=Re.call(we),Be=ut._,Fe=Te("^"+Re.call(Ne).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=dt?t.Buffer:r,ze=t.Symbol,Ve=t.Uint8Array,qe=Ue?Ue.allocUnsafe:r,We=rr(we.getPrototypeOf,we),Ye=we.create,Ge=je.propertyIsEnumerable,Ke=Ae.splice,Je=ze?ze.isConcatSpreadable:r,nt=ze?ze.iterator:r,at=ze?ze.toStringTag:r,st=function(){try{var e=so(we,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=t.clearTimeout!==ut.clearTimeout&&t.clearTimeout,ct=be&&be.now!==ut.Date.now&&be.now,ft=t.setTimeout!==ut.setTimeout&&t.setTimeout,ht=Se.ceil,Nt=Se.floor,zt=we.getOwnPropertySymbols,cr=Ue?Ue.isBuffer:r,dr=t.isFinite,fr=Ae.join,hr=rr(we.keys,we),pr=Se.max,gr=Se.min,vr=be.now,mr=t.parseInt,_r=Se.random,yr=Ae.reverse,br=so(t,"DataView"),Er=so(t,"Map"),Or=so(t,"Promise"),Sr=so(t,"Set"),wr=so(t,"WeakMap"),Tr=so(we,"create"),Mr=wr&&new wr,Lr={},Ar=xo(br),Pr=xo(Er),jr=xo(Or),Dr=xo(Sr),Rr=xo(wr),Nr=ze?ze.prototype:r,Ir=Nr?Nr.valueOf:r,Cr=Nr?Nr.toString:r;function kr(e){if(es(e)&&!qa(e)&&!(e instanceof Ur)){if(e instanceof Fr)return e;if(Ne.call(e,"__wrapped__"))return Bo(e)}return new Fr(e)}var xr=function(){function e(){}return function(t){if(!Za(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Br(){}function Fr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Ur(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new qr;++t<r;)this.add(e[t])}function Yr(e){var t=this.__data__=new Vr(e);this.size=t.size}function Gr(e,t){var r=qa(e),n=!r&&Va(e),i=!r&&!n&&Ha(e),o=!r&&!n&&!i&&us(e),a=r||n||i||o,s=a?Wt(e.length,Me):[],u=s.length;for(var l in e)!t&&!Ne.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||go(l,u))||s.push(l);return s}function Hr(e){var t=e.length;return t?e[Wn(0,t-1)]:r}function Qr(e,t){return Do(Ti(e),nn(t,0,e.length))}function Kr(e){return Do(Ti(e))}function Xr(e,t,n){(n!==r&&!Fa(e[t],n)||n===r&&!(t in e))&&tn(e,t,n)}function Jr(e,t,n){var i=e[t];Ne.call(e,t)&&Fa(i,n)&&(n!==r||t in e)||tn(e,t,n)}function $r(e,t){for(var r=e.length;r--;)if(Fa(e[r][0],t))return r;return-1}function Zr(e,t,r,n){return ln(e,function(e,i,o){t(n,e,r(e),o)}),n}function en(e,t){return e&&Mi(t,js(t),e)}function tn(e,t,r){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rn(e,t){for(var n=-1,i=t.length,o=ne(i),a=null==e;++n<i;)o[n]=a?r:Ts(e,t[n]);return o}function nn(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function on(e,t,n,i,o,a){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=o?n(e,i,o,a):n(e)),s!==r)return s;if(!Za(e))return e;var d=qa(e);if(d){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Ti(e,s)}else{var f=co(e),h=f==y||f==b;if(Ha(e))return yi(e,u);if(f==S||f==p||h&&!o){if(s=l||h?{}:ho(e),!u)return l?function(e,t){return Mi(e,lo(e),t)}(e,function(e,t){return e&&Mi(t,Ds(t),e)}(s,e)):function(e,t){return Mi(e,uo(e),t)}(e,en(s,e))}else{if(!rt[f])return o?e:{};s=function(e,t,r){var n,i=e.constructor;switch(t){case j:return bi(e);case v:case m:return new i(+e);case D:return function(e,t){var r=t?bi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case R:case N:case I:case C:case k:case x:case B:case F:case U:return Ei(e,r);case E:return new i;case O:case L:return new i(e);case T:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case M:return new i;case A:return n=e,Ir?we(Ir.call(n)):{}}}(e,f,u)}}a||(a=new Yr);var g=a.get(e);if(g)return g;a.set(e,s),os(e)?e.forEach(function(r){s.add(on(r,t,n,r,e,a))}):ts(e)&&e.forEach(function(r,i){s.set(i,on(r,t,n,i,e,a))});var _=d?r:(c?l?eo:Zi:l?Ds:js)(e);return Ot(_||e,function(r,i){_&&(r=e[i=r]),Jr(s,i,on(r,t,n,i,e,a))}),s}function an(e,t,n){var i=n.length;if(null==e)return!i;for(e=we(e);i--;){var o=n[i],a=t[o],s=e[o];if(s===r&&!(o in e)||!a(s))return!1}return!0}function sn(e,t,i){if("function"!=typeof e)throw new Le(n);return Lo(function(){e.apply(r,i)},t)}function un(e,t,r,n){var i=-1,o=Mt,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;r&&(t=At(t,Gt(r))),n?(o=Lt,a=!1):t.length>=200&&(o=Qt,a=!1,t=new Wr(t));e:for(;++i<s;){var c=e[i],d=null==r?c:r(c);if(c=n||0!==c?c:0,a&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;u.push(c)}else o(t,d,n)||u.push(c)}return u}kr.templateSettings={escape:Q,evaluate:K,interpolate:X,variable:"",imports:{_:kr}},kr.prototype=Br.prototype,kr.prototype.constructor=kr,Fr.prototype=xr(Br.prototype),Fr.prototype.constructor=Fr,Ur.prototype=xr(Br.prototype),Ur.prototype.constructor=Ur,zr.prototype.clear=function(){this.__data__=Tr?Tr(null):{},this.size=0},zr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zr.prototype.get=function(e){var t=this.__data__;if(Tr){var n=t[e];return n===i?r:n}return Ne.call(t,e)?t[e]:r},zr.prototype.has=function(e){var t=this.__data__;return Tr?t[e]!==r:Ne.call(t,e)},zr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tr&&t===r?i:t,this},Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(e){var t=this.__data__,r=$r(t,e);return!(r<0||(r==t.length-1?t.pop():Ke.call(t,r,1),--this.size,0))},Vr.prototype.get=function(e){var t=this.__data__,n=$r(t,e);return n<0?r:t[n][1]},Vr.prototype.has=function(e){return $r(this.__data__,e)>-1},Vr.prototype.set=function(e,t){var r=this.__data__,n=$r(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new zr,map:new(Er||Vr),string:new zr}},qr.prototype.delete=function(e){var t=oo(this,e).delete(e);return this.size-=t?1:0,t},qr.prototype.get=function(e){return oo(this,e).get(e)},qr.prototype.has=function(e){return oo(this,e).has(e)},qr.prototype.set=function(e,t){var r=oo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Wr.prototype.add=Wr.prototype.push=function(e){return this.__data__.set(e,i),this},Wr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.clear=function(){this.__data__=new Vr,this.size=0},Yr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yr.prototype.get=function(e){return this.__data__.get(e)},Yr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Vr){var n=r.__data__;if(!Er||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(e,t),this.size=r.size,this};var ln=Pi(mn),cn=Pi(_n,!0);function dn(e,t){var r=!0;return ln(e,function(e,n,i){return r=!!t(e,n,i)}),r}function fn(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(u===r?s==s&&!ss(s):n(s,u)))var u=s,l=a}return l}function hn(e,t){var r=[];return ln(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function pn(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=po),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?pn(s,t-1,r,n,i):Pt(i,s):n||(i[i.length]=s)}return i}var gn=ji(),vn=ji(!0);function mn(e,t){return e&&gn(e,t,js)}function _n(e,t){return e&&vn(e,t,js)}function yn(e,t){return Tt(t,function(t){return Xa(e[t])})}function bn(e,t){for(var n=0,i=(t=gi(t,e)).length;null!=e&&n<i;)e=e[ko(t[n++])];return n&&n==i?e:r}function En(e,t,r){var n=t(e);return qa(e)?n:Pt(n,r(e))}function On(e){return null==e?e===r?"[object Undefined]":"[object Null]":at&&at in we(e)?function(e){var t=Ne.call(e,at),n=e[at];try{e[at]=r;var i=!0}catch(e){}var o=ke.call(e);return i&&(t?e[at]=n:delete e[at]),o}(e):function(e){return ke.call(e)}(e)}function Sn(e,t){return e>t}function wn(e,t){return null!=e&&Ne.call(e,t)}function Tn(e,t){return null!=e&&t in we(e)}function Mn(e,t,n){for(var i=n?Lt:Mt,o=e[0].length,a=e.length,s=a,u=ne(a),l=1/0,c=[];s--;){var d=e[s];s&&t&&(d=At(d,Gt(t))),l=gr(d.length,l),u[s]=!n&&(t||o>=120&&d.length>=120)?new Wr(s&&d):r}d=e[0];var f=-1,h=u[0];e:for(;++f<o&&c.length<l;){var p=d[f],g=t?t(p):p;if(p=n||0!==p?p:0,!(h?Qt(h,g):i(c,g,n))){for(s=a;--s;){var v=u[s];if(!(v?Qt(v,g):i(e[s],g,n)))continue e}h&&h.push(g),c.push(p)}}return c}function Ln(e,t,n){var i=null==(e=wo(e,t=gi(t,e)))?e:e[ko(Ko(t))];return null==i?r:bt(i,e,n)}function An(e){return es(e)&&On(e)==p}function Pn(e,t,n,i,o){return e===t||(null==e||null==t||!es(e)&&!es(t)?e!=e&&t!=t:function(e,t,n,i,o,a){var s=qa(e),u=qa(t),l=s?g:co(e),c=u?g:co(t),d=(l=l==p?S:l)==S,f=(c=c==p?S:c)==S,h=l==c;if(h&&Ha(e)){if(!Ha(t))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new Yr),s||us(e)?Ji(e,t,n,i,o,a):function(e,t,r,n,i,o,a){switch(r){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case v:case m:case O:return Fa(+e,+t);case _:return e.name==t.name&&e.message==t.message;case T:case L:return e==t+"";case E:var s=tr;case M:var u=1&n;if(s||(s=ir),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var c=Ji(s(e),s(t),n,i,o,a);return a.delete(e),c;case A:if(Ir)return Ir.call(e)==Ir.call(t)}return!1}(e,t,l,n,i,o,a);if(!(1&n)){var y=d&&Ne.call(e,"__wrapped__"),b=f&&Ne.call(t,"__wrapped__");if(y||b){var w=y?e.value():e,P=b?t.value():t;return a||(a=new Yr),o(w,P,n,i,a)}}return!!h&&(a||(a=new Yr),function(e,t,n,i,o,a){var s=1&n,u=Zi(e),l=u.length;if(l!=Zi(t).length&&!s)return!1;for(var c=l;c--;){var d=u[c];if(!(s?d in t:Ne.call(t,d)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var p=!0;a.set(e,t),a.set(t,e);for(var g=s;++c<l;){var v=e[d=u[c]],m=t[d];if(i)var _=s?i(m,v,d,t,e,a):i(v,m,d,e,t,a);if(!(_===r?v===m||o(v,m,n,i,a):_)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,i,o,a))}(e,t,n,i,Pn,o))}function jn(e,t,n,i){var o=n.length,a=o,s=!i;if(null==e)return!a;for(e=we(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=n[o])[0],c=e[l],d=u[1];if(s&&u[2]){if(c===r&&!(l in e))return!1}else{var f=new Yr;if(i)var h=i(c,d,l,e,t,f);if(!(h===r?Pn(d,c,3,i,f):h))return!1}}return!0}function Dn(e){return!(!Za(e)||(t=e,Ce&&Ce in t))&&(Xa(e)?Fe:pe).test(xo(e));var t}function Rn(e){return"function"==typeof e?e:null==e?ru:"object"==typeof e?qa(e)?xn(e[0],e[1]):kn(e):du(e)}function Nn(e){if(!bo(e))return hr(e);var t=[];for(var r in we(e))Ne.call(e,r)&&"constructor"!=r&&t.push(r);return t}function In(e,t){return e<t}function Cn(e,t){var r=-1,n=Ya(e)?ne(e.length):[];return ln(e,function(e,i,o){n[++r]=t(e,i,o)}),n}function kn(e){var t=ao(e);return 1==t.length&&t[0][2]?Oo(t[0][0],t[0][1]):function(r){return r===e||jn(r,e,t)}}function xn(e,t){return mo(e)&&Eo(t)?Oo(ko(e),t):function(n){var i=Ts(n,e);return i===r&&i===t?Ms(n,e):Pn(t,i,3)}}function Bn(e,t,n,i,o){e!==t&&gn(t,function(a,s){if(o||(o=new Yr),Za(a))!function(e,t,n,i,o,a,s){var u=To(e,n),l=To(t,n),c=s.get(l);if(c)Xr(e,n,c);else{var d=a?a(u,l,n+"",e,t,s):r,f=d===r;if(f){var h=qa(l),p=!h&&Ha(l),g=!h&&!p&&us(l);d=l,h||p||g?qa(u)?d=u:Ga(u)?d=Ti(u):p?(f=!1,d=yi(l,!0)):g?(f=!1,d=Ei(l,!0)):d=[]:ns(l)||Va(l)?(d=u,Va(u)?d=vs(u):Za(u)&&!Xa(u)||(d=ho(l))):f=!1}f&&(s.set(l,d),o(d,l,i,a,s),s.delete(l)),Xr(e,n,d)}}(e,t,s,n,Bn,i,o);else{var u=i?i(To(e,s),a,s+"",e,t,o):r;u===r&&(u=a),Xr(e,s,u)}},Ds)}function Fn(e,t){var n=e.length;if(n)return go(t+=t<0?n:0,n)?e[t]:r}function Un(e,t,r){t=t.length?At(t,function(e){return qa(e)?function(t){return bn(t,1===e.length?e[0]:e)}:e}):[ru];var n=-1;return t=At(t,Gt(io())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Cn(e,function(e,r,i){return{criteria:At(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var u=Oi(i[n],o[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)})}function zn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=bn(e,a);r(s,a)&&Kn(o,gi(a,e),s)}return o}function Vn(e,t,r,n){var i=n?xt:kt,o=-1,a=t.length,s=e;for(e===t&&(t=Ti(t)),r&&(s=At(e,Gt(r)));++o<a;)for(var u=0,l=t[o],c=r?r(l):l;(u=i(s,c,u,n))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function qn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;go(i)?Ke.call(e,i,1):si(e,i)}}return e}function Wn(e,t){return e+Nt(_r()*(t-e+1))}function Yn(e,t){var r="";if(!e||t<1||t>c)return r;do{t%2&&(r+=e),(t=Nt(t/2))&&(e+=e)}while(t);return r}function Gn(e,t){return Ao(So(e,t,ru),e+"")}function Hn(e){return Hr(Fs(e))}function Qn(e,t){var r=Fs(e);return Do(r,nn(t,0,r.length))}function Kn(e,t,n,i){if(!Za(e))return e;for(var o=-1,a=(t=gi(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var l=ko(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var d=u[l];(c=i?i(d,l,u):r)===r&&(c=Za(d)?d:go(t[o+1])?[]:{})}Jr(u,l,c),u=u[l]}return e}var Xn=Mr?function(e,t){return Mr.set(e,t),e}:ru,Jn=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:Zs(t),writable:!0})}:ru;function $n(e){return Do(Fs(e))}function Zn(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=ne(i);++n<i;)o[n]=e[n+t];return o}function ei(e,t){var r;return ln(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function ti(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,a=e[o];null!==a&&!ss(a)&&(r?a<=t:a<t)?n=o+1:i=o}return i}return ri(e,t,ru,r)}function ri(e,t,n,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,l=ss(t),c=t===r;o<a;){var d=Nt((o+a)/2),f=n(e[d]),h=f!==r,p=null===f,g=f==f,v=ss(f);if(s)var m=i||g;else m=c?g&&(i||h):u?g&&h&&(i||!p):l?g&&h&&!p&&(i||!v):!p&&!v&&(i?f<=t:f<t);m?o=d+1:a=d}return gr(a,4294967294)}function ni(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!Fa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ii(e){return"number"==typeof e?e:ss(e)?d:+e}function oi(e){if("string"==typeof e)return e;if(qa(e))return At(e,oi)+"";if(ss(e))return Cr?Cr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ai(e,t,r){var n=-1,i=Mt,o=e.length,a=!0,s=[],u=s;if(r)a=!1,i=Lt;else if(o>=200){var l=t?null:Yi(e);if(l)return ir(l);a=!1,i=Qt,u=new Wr}else u=t?[]:s;e:for(;++n<o;){var c=e[n],d=t?t(c):c;if(c=r||0!==c?c:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),s.push(c)}else i(u,d,r)||(u!==s&&u.push(d),s.push(c))}return s}function si(e,t){return null==(e=wo(e,t=gi(t,e)))||delete e[ko(Ko(t))]}function ui(e,t,r,n){return Kn(e,t,r(bn(e,t)),n)}function li(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Zn(e,n?0:o,n?o+1:i):Zn(e,n?o+1:0,n?i:o)}function ci(e,t){var r=e;return r instanceof Ur&&(r=r.value()),jt(t,function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))},r)}function di(e,t,r){var n=e.length;if(n<2)return n?ai(e[0]):[];for(var i=-1,o=ne(n);++i<n;)for(var a=e[i],s=-1;++s<n;)s!=i&&(o[i]=un(o[i]||a,e[s],t,r));return ai(pn(o,1),t,r)}function fi(e,t,n){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var u=i<a?t[i]:r;n(s,e[i],u)}return s}function hi(e){return Ga(e)?e:[]}function pi(e){return"function"==typeof e?e:ru}function gi(e,t){return qa(e)?e:mo(e,t)?[e]:Co(ms(e))}var vi=Gn;function mi(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:Zn(e,t,n)}var _i=lt||function(e){return ut.clearTimeout(e)};function yi(e,t){if(t)return e.slice();var r=e.length,n=qe?qe(r):new e.constructor(r);return e.copy(n),n}function bi(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Ei(e,t){var r=t?bi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Oi(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,a=ss(e),s=t!==r,u=null===t,l=t==t,c=ss(t);if(!u&&!c&&!a&&e>t||a&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!c&&e<t||c&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function Si(e,t,r,n){for(var i=-1,o=e.length,a=r.length,s=-1,u=t.length,l=pr(o-a,0),c=ne(u+l),d=!n;++s<u;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[r[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}function wi(e,t,r,n){for(var i=-1,o=e.length,a=-1,s=r.length,u=-1,l=t.length,c=pr(o-s,0),d=ne(c+l),f=!n;++i<c;)d[i]=e[i];for(var h=i;++u<l;)d[h+u]=t[u];for(;++a<s;)(f||i<o)&&(d[h+r[a]]=e[i++]);return d}function Ti(e,t){var r=-1,n=e.length;for(t||(t=ne(n));++r<n;)t[r]=e[r];return t}function Mi(e,t,n,i){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],l=i?i(n[u],e[u],u,n,e):r;l===r&&(l=e[u]),o?tn(n,u,l):Jr(n,u,l)}return n}function Li(e,t){return function(r,n){var i=qa(r)?Et:Zr,o=t?t():{};return i(r,e,io(n,2),o)}}function Ai(e){return Gn(function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(o--,a):r,s&&vo(n[0],n[1],s)&&(a=o<3?r:a,o=1),t=we(t);++i<o;){var u=n[i];u&&e(t,u,i,a)}return t})}function Pi(e,t){return function(r,n){if(null==r)return r;if(!Ya(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=we(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}function ji(e){return function(t,r,n){for(var i=-1,o=we(t),a=n(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===r(o[u],u,o))break}return t}}function Di(e){return function(t){var n=er(t=ms(t))?ar(t):r,i=n?n[0]:t.charAt(0),o=n?mi(n,1).join(""):t.slice(1);return i[e]()+o}}function Ri(e){return function(t){return jt(Xs(Vs(t).replace(He,"")),e,"")}}function Ni(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=xr(e.prototype),n=e.apply(r,t);return Za(n)?n:r}}function Ii(e){return function(t,n,i){var o=we(t);if(!Ya(t)){var a=io(n,3);t=js(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,i);return s>-1?o[a?t[s]:s]:r}}function Ci(e){return $i(function(t){var i=t.length,o=i,a=Fr.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Le(n);if(a&&!u&&"wrapper"==ro(s))var u=new Fr([],!0)}for(o=u?o:i;++o<i;){var l=ro(s=t[o]),c="wrapper"==l?to(s):r;u=c&&_o(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==s.length&&_o(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&qa(r))return u.plant(r).value();for(var n=0,o=i?t[n].apply(this,e):r;++n<i;)o=t[n].call(this,o);return o}})}function ki(e,t,n,i,o,a,s,l,c,d){var f=t&u,h=1&t,p=2&t,g=24&t,v=512&t,m=p?r:Ni(e);return function u(){for(var _=arguments.length,y=ne(_),b=_;b--;)y[b]=arguments[b];if(g)var E=no(u),O=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(y,E);if(i&&(y=Si(y,i,o,g)),a&&(y=wi(y,a,s,g)),_-=O,g&&_<d){var S=nr(y,E);return qi(e,t,ki,u.placeholder,n,y,S,l,c,d-_)}var w=h?n:this,T=p?w[e]:e;return _=y.length,l?y=function(e,t){for(var n=e.length,i=gr(t.length,n),o=Ti(e);i--;){var a=t[i];e[i]=go(a,n)?o[a]:r}return e}(y,l):v&&_>1&&y.reverse(),f&&c<_&&(y.length=c),this&&this!==ut&&this instanceof u&&(T=m||Ni(T)),T.apply(w,y)}}function xi(e,t){return function(r,n){return function(e,t,r,n){return mn(e,function(e,i,o){t(n,r(e),i,o)}),n}(r,e,t(n),{})}}function Bi(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=oi(n),i=oi(i)):(n=ii(n),i=ii(i)),o=e(n,i)}return o}}function Fi(e){return $i(function(t){return t=At(t,Gt(io())),Gn(function(r){var n=this;return e(t,function(e){return bt(e,n,r)})})})}function Ui(e,t){var n=(t=t===r?" ":oi(t)).length;if(n<2)return n?Yn(t,e):t;var i=Yn(t,ht(e/or(t)));return er(t)?mi(ar(i),0,e).join(""):i.slice(0,e)}function zi(e){return function(t,n,i){return i&&"number"!=typeof i&&vo(t,n,i)&&(n=i=r),t=fs(t),n===r?(n=t,t=0):n=fs(n),function(e,t,r,n){for(var i=-1,o=pr(ht((t-e)/(r||1)),0),a=ne(o);o--;)a[n?o:++i]=e,e+=r;return a}(t,n,i=i===r?t<n?1:-1:fs(i),e)}}function Vi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=gs(t),r=gs(r)),e(t,r)}}function qi(e,t,n,i,o,a,u,l,c,d){var f=8&t;t|=f?s:64,4&(t&=~(f?64:s))||(t&=-4);var h=[e,t,o,f?a:r,f?u:r,f?r:a,f?r:u,l,c,d],p=n.apply(r,h);return _o(e)&&Mo(p,h),p.placeholder=i,Po(p,e,t)}function Wi(e){var t=Se[e];return function(e,r){if(e=gs(e),(r=null==r?0:gr(hs(r),292))&&dr(e)){var n=(ms(e)+"e").split("e");return+((n=(ms(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Yi=Sr&&1/ir(new Sr([,-0]))[1]==l?function(e){return new Sr(e)}:su;function Gi(e){return function(t){var r=co(t);return r==E?tr(t):r==M?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(t):function(e,t){return At(t,function(t){return[t,e[t]]})}(t,e(t))}}function Hi(e,t,i,o,l,c,d,f){var h=2&t;if(!h&&"function"!=typeof e)throw new Le(n);var p=o?o.length:0;if(p||(t&=-97,o=l=r),d=d===r?d:pr(hs(d),0),f=f===r?f:hs(f),p-=l?l.length:0,64&t){var g=o,v=l;o=l=r}var m=h?r:to(e),_=[e,t,i,o,l,g,v,c,d,f];if(m&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,s=n==u&&8==r||n==u&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Si(c,l,t[4]):l,e[4]=c?nr(e[3],a):t[4]}(l=t[5])&&(c=e[5],e[5]=c?wi(c,l,t[6]):l,e[6]=c?nr(e[5],a):t[6]),(l=t[7])&&(e[7]=l),n&u&&(e[8]=null==e[8]?t[8]:gr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(_,m),e=_[0],t=_[1],i=_[2],o=_[3],l=_[4],!(f=_[9]=_[9]===r?h?0:e.length:pr(_[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,n){var i=Ni(e);return function o(){for(var a=arguments.length,s=ne(a),u=a,l=no(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:nr(s,l);return(a-=c.length)<n?qi(e,t,ki,o.placeholder,r,s,c,r,r,n-a):bt(this&&this!==ut&&this instanceof o?i:e,this,s)}}(e,t,f):t!=s&&33!=t||l.length?ki.apply(r,_):function(e,t,r,n){var i=1&t,o=Ni(e);return function t(){for(var a=-1,s=arguments.length,u=-1,l=n.length,c=ne(l+s),d=this&&this!==ut&&this instanceof t?o:e;++u<l;)c[u]=n[u];for(;s--;)c[u++]=arguments[++a];return bt(d,i?r:this,c)}}(e,t,i,o);else var y=function(e,t,r){var n=1&t,i=Ni(e);return function t(){return(this&&this!==ut&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,i);return Po((m?Xn:Mo)(y,_),e,t)}function Qi(e,t,n,i){return e===r||Fa(e,je[n])&&!Ne.call(i,n)?t:e}function Ki(e,t,n,i,o,a){return Za(e)&&Za(t)&&(a.set(t,e),Bn(e,t,r,Ki,a),a.delete(t)),e}function Xi(e){return ns(e)?r:e}function Ji(e,t,n,i,o,a){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var f=-1,h=!0,p=2&n?new Wr:r;for(a.set(e,t),a.set(t,e);++f<u;){var g=e[f],v=t[f];if(i)var m=s?i(v,g,f,t,e,a):i(g,v,f,e,t,a);if(m!==r){if(m)continue;h=!1;break}if(p){if(!Rt(t,function(e,t){if(!Qt(p,t)&&(g===e||o(g,e,n,i,a)))return p.push(t)})){h=!1;break}}else if(g!==v&&!o(g,v,n,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function $i(e){return Ao(So(e,r,Wo),e+"")}function Zi(e){return En(e,js,uo)}function eo(e){return En(e,Ds,lo)}var to=Mr?function(e){return Mr.get(e)}:su;function ro(e){for(var t=e.name+"",r=Lr[t],n=Ne.call(Lr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function no(e){return(Ne.call(kr,"placeholder")?kr:e).placeholder}function io(){var e=kr.iteratee||nu;return e=e===nu?Rn:e,arguments.length?e(arguments[0],arguments[1]):e}function oo(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ao(e){for(var t=js(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Eo(i)]}return t}function so(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Dn(n)?n:r}var uo=zt?function(e){return null==e?[]:(e=we(e),Tt(zt(e),function(t){return Ge.call(e,t)}))}:pu,lo=zt?function(e){for(var t=[];e;)Pt(t,uo(e)),e=We(e);return t}:pu,co=On;function fo(e,t,r){for(var n=-1,i=(t=gi(t,e)).length,o=!1;++n<i;){var a=ko(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&$a(i)&&go(a,i)&&(qa(e)||Va(e))}function ho(e){return"function"!=typeof e.constructor||bo(e)?{}:xr(We(e))}function po(e){return qa(e)||Va(e)||!!(Je&&e&&e[Je])}function go(e,t){var r=typeof e;return!!(t=null==t?c:t)&&("number"==r||"symbol"!=r&&ve.test(e))&&e>-1&&e%1==0&&e<t}function vo(e,t,r){if(!Za(r))return!1;var n=typeof t;return!!("number"==n?Ya(r)&&go(t,r.length):"string"==n&&t in r)&&Fa(r[t],e)}function mo(e,t){if(qa(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ss(e))||$.test(e)||!J.test(e)||null!=t&&e in we(t)}function _o(e){var t=ro(e),r=kr[t];if("function"!=typeof r||!(t in Ur.prototype))return!1;if(e===r)return!0;var n=to(r);return!!n&&e===n[0]}(br&&co(new br(new ArrayBuffer(1)))!=D||Er&&co(new Er)!=E||Or&&co(Or.resolve())!=w||Sr&&co(new Sr)!=M||wr&&co(new wr)!=P)&&(co=function(e){var t=On(e),n=t==S?e.constructor:r,i=n?xo(n):"";if(i)switch(i){case Ar:return D;case Pr:return E;case jr:return w;case Dr:return M;case Rr:return P}return t});var yo=De?Xa:gu;function bo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)}function Eo(e){return e==e&&!Za(e)}function Oo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in we(n))}}function So(e,t,n){return t=pr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=pr(r.length-t,0),a=ne(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=ne(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),bt(e,this,s)}}function wo(e,t){return t.length<2?e:bn(e,Zn(t,0,-1))}function To(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Mo=jo(Xn),Lo=ft||function(e,t){return ut.setTimeout(e,t)},Ao=jo(Jn);function Po(e,t,r){var n=t+"";return Ao(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Ot(h,function(r){var n="_."+r[0];t&r[1]&&!Mt(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ae):[]}(n),r)))}function jo(e){var t=0,n=0;return function(){var i=vr(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Do(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var a=Wn(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Ro,No,Io,Co=(Ro=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,function(e,r,n,i){t.push(n?i.replace(le,"$1"):r||e)}),t},No=Na(Ro,function(e){return 500===Io.size&&Io.clear(),e}),Io=No.cache,No);function ko(e){if("string"==typeof e||ss(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function xo(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bo(e){if(e instanceof Ur)return e.clone();var t=new Fr(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fo=Gn(function(e,t){return Ga(e)?un(e,pn(t,1,Ga,!0)):[]}),Uo=Gn(function(e,t){var n=Ko(t);return Ga(n)&&(n=r),Ga(e)?un(e,pn(t,1,Ga,!0),io(n,2)):[]}),zo=Gn(function(e,t){var n=Ko(t);return Ga(n)&&(n=r),Ga(e)?un(e,pn(t,1,Ga,!0),r,n):[]});function Vo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:hs(r);return i<0&&(i=pr(n+i,0)),Ct(e,io(t,3),i)}function qo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=hs(n),o=n<0?pr(i+o,0):gr(o,i-1)),Ct(e,io(t,3),o,!0)}function Wo(e){return null!=e&&e.length?pn(e,1):[]}function Yo(e){return e&&e.length?e[0]:r}var Go=Gn(function(e){var t=At(e,hi);return t.length&&t[0]===e[0]?Mn(t):[]}),Ho=Gn(function(e){var t=Ko(e),n=At(e,hi);return t===Ko(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Mn(n,io(t,2)):[]}),Qo=Gn(function(e){var t=Ko(e),n=At(e,hi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Mn(n,r,t):[]});function Ko(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Xo=Gn(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Vn(e,t):e}var $o=$i(function(e,t){var r=null==e?0:e.length,n=rn(e,t);return qn(e,At(t,function(e){return go(e,r)?+e:e}).sort(Oi)),n});function Zo(e){return null==e?e:yr.call(e)}var ea=Gn(function(e){return ai(pn(e,1,Ga,!0))}),ta=Gn(function(e){var t=Ko(e);return Ga(t)&&(t=r),ai(pn(e,1,Ga,!0),io(t,2))}),ra=Gn(function(e){var t=Ko(e);return t="function"==typeof t?t:r,ai(pn(e,1,Ga,!0),r,t)});function na(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,function(e){if(Ga(e))return t=pr(e.length,t),!0}),Wt(t,function(t){return At(e,Ut(t))})}function ia(e,t){if(!e||!e.length)return[];var n=na(e);return null==t?n:At(n,function(e){return bt(t,r,e)})}var oa=Gn(function(e,t){return Ga(e)?un(e,t):[]}),aa=Gn(function(e){return di(Tt(e,Ga))}),sa=Gn(function(e){var t=Ko(e);return Ga(t)&&(t=r),di(Tt(e,Ga),io(t,2))}),ua=Gn(function(e){var t=Ko(e);return t="function"==typeof t?t:r,di(Tt(e,Ga),r,t)}),la=Gn(na),ca=Gn(function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ia(e,n)});function da(e){var t=kr(e);return t.__chain__=!0,t}function fa(e,t){return t(e)}var ha=$i(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return rn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Ur&&go(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:fa,args:[o],thisArg:r}),new Fr(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(o)}),pa=Li(function(e,t,r){Ne.call(e,r)?++e[r]:tn(e,r,1)}),ga=Ii(Vo),va=Ii(qo);function ma(e,t){return(qa(e)?Ot:ln)(e,io(t,3))}function _a(e,t){return(qa(e)?St:cn)(e,io(t,3))}var ya=Li(function(e,t,r){Ne.call(e,r)?e[r].push(t):tn(e,r,[t])}),ba=Gn(function(e,t,r){var n=-1,i="function"==typeof t,o=Ya(e)?ne(e.length):[];return ln(e,function(e){o[++n]=i?bt(t,e,r):Ln(e,t,r)}),o}),Ea=Li(function(e,t,r){tn(e,r,t)});function Oa(e,t){return(qa(e)?At:Cn)(e,io(t,3))}var Sa=Li(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),wa=Gn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&vo(e,t[0],t[1])?t=[]:r>2&&vo(t[0],t[1],t[2])&&(t=[t[0]]),Un(e,pn(t,1),[])}),Ta=ct||function(){return ut.Date.now()};function Ma(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Hi(e,u,r,r,r,r,t)}function La(e,t){var i;if("function"!=typeof t)throw new Le(n);return e=hs(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var Aa=Gn(function(e,t,r){var n=1;if(r.length){var i=nr(r,no(Aa));n|=s}return Hi(e,n,t,r,i)}),Pa=Gn(function(e,t,r){var n=3;if(r.length){var i=nr(r,no(Pa));n|=s}return Hi(t,n,e,r,i)});function ja(e,t,i){var o,a,s,u,l,c,d=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new Le(n);function g(t){var n=o,i=a;return o=a=r,d=t,u=e.apply(i,n)}function v(e){var n=e-c;return c===r||n>=t||n<0||h&&e-d>=s}function m(){var e=Ta();if(v(e))return _(e);l=Lo(m,function(e){var r=t-(e-c);return h?gr(r,s-(e-d)):r}(e))}function _(e){return l=r,p&&o?g(e):(o=a=r,u)}function y(){var e=Ta(),n=v(e);if(o=arguments,a=this,c=e,n){if(l===r)return function(e){return d=e,l=Lo(m,t),f?g(e):u}(c);if(h)return _i(l),l=Lo(m,t),g(c)}return l===r&&(l=Lo(m,t)),u}return t=gs(t)||0,Za(i)&&(f=!!i.leading,s=(h="maxWait"in i)?pr(gs(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),y.cancel=function(){l!==r&&_i(l),d=0,o=c=a=l=r},y.flush=function(){return l===r?u:_(Ta())},y}var Da=Gn(function(e,t){return sn(e,1,t)}),Ra=Gn(function(e,t,r){return sn(e,gs(t)||0,r)});function Na(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Le(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Na.Cache||qr),r}function Ia(e){if("function"!=typeof e)throw new Le(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Na.Cache=qr;var Ca=vi(function(e,t){var r=(t=1==t.length&&qa(t[0])?At(t[0],Gt(io())):At(pn(t,1),Gt(io()))).length;return Gn(function(n){for(var i=-1,o=gr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return bt(e,this,n)})}),ka=Gn(function(e,t){var n=nr(t,no(ka));return Hi(e,s,r,t,n)}),xa=Gn(function(e,t){var n=nr(t,no(xa));return Hi(e,64,r,t,n)}),Ba=$i(function(e,t){return Hi(e,256,r,r,r,t)});function Fa(e,t){return e===t||e!=e&&t!=t}var Ua=Vi(Sn),za=Vi(function(e,t){return e>=t}),Va=An(function(){return arguments}())?An:function(e){return es(e)&&Ne.call(e,"callee")&&!Ge.call(e,"callee")},qa=ne.isArray,Wa=pt?Gt(pt):function(e){return es(e)&&On(e)==j};function Ya(e){return null!=e&&$a(e.length)&&!Xa(e)}function Ga(e){return es(e)&&Ya(e)}var Ha=cr||gu,Qa=gt?Gt(gt):function(e){return es(e)&&On(e)==m};function Ka(e){if(!es(e))return!1;var t=On(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ns(e)}function Xa(e){if(!Za(e))return!1;var t=On(e);return t==y||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ja(e){return"number"==typeof e&&e==hs(e)}function $a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function Za(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function es(e){return null!=e&&"object"==typeof e}var ts=vt?Gt(vt):function(e){return es(e)&&co(e)==E};function rs(e){return"number"==typeof e||es(e)&&On(e)==O}function ns(e){if(!es(e)||On(e)!=S)return!1;var t=We(e);if(null===t)return!0;var r=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Re.call(r)==xe}var is=mt?Gt(mt):function(e){return es(e)&&On(e)==T},os=_t?Gt(_t):function(e){return es(e)&&co(e)==M};function as(e){return"string"==typeof e||!qa(e)&&es(e)&&On(e)==L}function ss(e){return"symbol"==typeof e||es(e)&&On(e)==A}var us=yt?Gt(yt):function(e){return es(e)&&$a(e.length)&&!!tt[On(e)]},ls=Vi(In),cs=Vi(function(e,t){return e<=t});function ds(e){if(!e)return[];if(Ya(e))return as(e)?ar(e):Ti(e);if(nt&&e[nt])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[nt]());var t=co(e);return(t==E?tr:t==M?ir:Fs)(e)}function fs(e){return e?(e=gs(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function hs(e){var t=fs(e),r=t%1;return t==t?r?t-r:t:0}function ps(e){return e?nn(hs(e),0,f):0}function gs(e){if("number"==typeof e)return e;if(ss(e))return d;if(Za(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Za(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var r=he.test(e);return r||ge.test(e)?ot(e.slice(2),r?2:8):fe.test(e)?d:+e}function vs(e){return Mi(e,Ds(e))}function ms(e){return null==e?"":oi(e)}var _s=Ai(function(e,t){if(bo(t)||Ya(t))Mi(t,js(t),e);else for(var r in t)Ne.call(t,r)&&Jr(e,r,t[r])}),ys=Ai(function(e,t){Mi(t,Ds(t),e)}),bs=Ai(function(e,t,r,n){Mi(t,Ds(t),e,n)}),Es=Ai(function(e,t,r,n){Mi(t,js(t),e,n)}),Os=$i(rn),Ss=Gn(function(e,t){e=we(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&vo(t[0],t[1],o)&&(i=1);++n<i;)for(var a=t[n],s=Ds(a),u=-1,l=s.length;++u<l;){var c=s[u],d=e[c];(d===r||Fa(d,je[c])&&!Ne.call(e,c))&&(e[c]=a[c])}return e}),ws=Gn(function(e){return e.push(r,Ki),bt(Ns,r,e)});function Ts(e,t,n){var i=null==e?r:bn(e,t);return i===r?n:i}function Ms(e,t){return null!=e&&fo(e,t,Tn)}var Ls=xi(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),e[t]=r},Zs(ru)),As=xi(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),Ne.call(e,t)?e[t].push(r):e[t]=[r]},io),Ps=Gn(Ln);function js(e){return Ya(e)?Gr(e):Nn(e)}function Ds(e){return Ya(e)?Gr(e,!0):function(e){if(!Za(e))return function(e){var t=[];if(null!=e)for(var r in we(e))t.push(r);return t}(e);var t=bo(e),r=[];for(var n in e)("constructor"!=n||!t&&Ne.call(e,n))&&r.push(n);return r}(e)}var Rs=Ai(function(e,t,r){Bn(e,t,r)}),Ns=Ai(function(e,t,r,n){Bn(e,t,r,n)}),Is=$i(function(e,t){var r={};if(null==e)return r;var n=!1;t=At(t,function(t){return t=gi(t,e),n||(n=t.length>1),t}),Mi(e,eo(e),r),n&&(r=on(r,7,Xi));for(var i=t.length;i--;)si(r,t[i]);return r}),Cs=$i(function(e,t){return null==e?{}:function(e,t){return zn(e,t,function(t,r){return Ms(e,r)})}(e,t)});function ks(e,t){if(null==e)return{};var r=At(eo(e),function(e){return[e]});return t=io(t),zn(e,r,function(e,r){return t(e,r[0])})}var xs=Gi(js),Bs=Gi(Ds);function Fs(e){return null==e?[]:Ht(e,js(e))}var Us=Ri(function(e,t,r){return t=t.toLowerCase(),e+(r?zs(t):t)});function zs(e){return Ks(ms(e).toLowerCase())}function Vs(e){return(e=ms(e))&&e.replace(me,Jt).replace(Qe,"")}var qs=Ri(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Ws=Ri(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Ys=Di("toLowerCase"),Gs=Ri(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Hs=Ri(function(e,t,r){return e+(r?" ":"")+Ks(t)}),Qs=Ri(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Ks=Di("toUpperCase");function Xs(e,t,n){return e=ms(e),(t=n?r:t)===r?function(e){return $e.test(e)}(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var Js=Gn(function(e,t){try{return bt(e,r,t)}catch(e){return Ka(e)?e:new Ee(e)}}),$s=$i(function(e,t){return Ot(t,function(t){t=ko(t),tn(e,t,Aa(e[t],e))}),e});function Zs(e){return function(){return e}}var eu=Ci(),tu=Ci(!0);function ru(e){return e}function nu(e){return Rn("function"==typeof e?e:on(e,1))}var iu=Gn(function(e,t){return function(r){return Ln(r,e,t)}}),ou=Gn(function(e,t){return function(r){return Ln(e,r,t)}});function au(e,t,r){var n=js(t),i=yn(t,n);null!=r||Za(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=yn(t,js(t)));var o=!(Za(r)&&"chain"in r&&!r.chain),a=Xa(e);return Ot(i,function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Ti(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Pt([this.value()],arguments))})}),e}function su(){}var uu=Fi(At),lu=Fi(wt),cu=Fi(Rt);function du(e){return mo(e)?Ut(ko(e)):function(e){return function(t){return bn(t,e)}}(e)}var fu=zi(),hu=zi(!0);function pu(){return[]}function gu(){return!1}var vu,mu=Bi(function(e,t){return e+t},0),_u=Wi("ceil"),yu=Bi(function(e,t){return e/t},1),bu=Wi("floor"),Eu=Bi(function(e,t){return e*t},1),Ou=Wi("round"),Su=Bi(function(e,t){return e-t},0);return kr.after=function(e,t){if("function"!=typeof t)throw new Le(n);return e=hs(e),function(){if(--e<1)return t.apply(this,arguments)}},kr.ary=Ma,kr.assign=_s,kr.assignIn=ys,kr.assignInWith=bs,kr.assignWith=Es,kr.at=Os,kr.before=La,kr.bind=Aa,kr.bindAll=$s,kr.bindKey=Pa,kr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qa(e)?e:[e]},kr.chain=da,kr.chunk=function(e,t,n){t=(n?vo(e,t,n):t===r)?1:pr(hs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=ne(ht(i/t));o<i;)s[a++]=Zn(e,o,o+=t);return s},kr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},kr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ne(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Pt(qa(r)?Ti(r):[r],pn(t,1))},kr.cond=function(e){var t=null==e?0:e.length,r=io();return e=t?At(e,function(e){if("function"!=typeof e[1])throw new Le(n);return[r(e[0]),e[1]]}):[],Gn(function(r){for(var n=-1;++n<t;){var i=e[n];if(bt(i[0],this,r))return bt(i[1],this,r)}})},kr.conforms=function(e){return function(e){var t=js(e);return function(r){return an(r,e,t)}}(on(e,1))},kr.constant=Zs,kr.countBy=pa,kr.create=function(e,t){var r=xr(e);return null==t?r:en(r,t)},kr.curry=function e(t,n,i){var o=Hi(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},kr.curryRight=function e(t,n,i){var o=Hi(t,16,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},kr.debounce=ja,kr.defaults=Ss,kr.defaultsDeep=ws,kr.defer=Da,kr.delay=Ra,kr.difference=Fo,kr.differenceBy=Uo,kr.differenceWith=zo,kr.drop=function(e,t,n){var i=null==e?0:e.length;return i?Zn(e,(t=n||t===r?1:hs(t))<0?0:t,i):[]},kr.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Zn(e,0,(t=i-(t=n||t===r?1:hs(t)))<0?0:t):[]},kr.dropRightWhile=function(e,t){return e&&e.length?li(e,io(t,3),!0,!0):[]},kr.dropWhile=function(e,t){return e&&e.length?li(e,io(t,3),!0):[]},kr.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&vo(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=hs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:hs(i))<0&&(i+=o),i=n>i?0:ps(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},kr.filter=function(e,t){return(qa(e)?Tt:hn)(e,io(t,3))},kr.flatMap=function(e,t){return pn(Oa(e,t),1)},kr.flatMapDeep=function(e,t){return pn(Oa(e,t),l)},kr.flatMapDepth=function(e,t,n){return n=n===r?1:hs(n),pn(Oa(e,t),n)},kr.flatten=Wo,kr.flattenDeep=function(e){return null!=e&&e.length?pn(e,l):[]},kr.flattenDepth=function(e,t){return null!=e&&e.length?pn(e,t=t===r?1:hs(t)):[]},kr.flip=function(e){return Hi(e,512)},kr.flow=eu,kr.flowRight=tu,kr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},kr.functions=function(e){return null==e?[]:yn(e,js(e))},kr.functionsIn=function(e){return null==e?[]:yn(e,Ds(e))},kr.groupBy=ya,kr.initial=function(e){return null!=e&&e.length?Zn(e,0,-1):[]},kr.intersection=Go,kr.intersectionBy=Ho,kr.intersectionWith=Qo,kr.invert=Ls,kr.invertBy=As,kr.invokeMap=ba,kr.iteratee=nu,kr.keyBy=Ea,kr.keys=js,kr.keysIn=Ds,kr.map=Oa,kr.mapKeys=function(e,t){var r={};return t=io(t,3),mn(e,function(e,n,i){tn(r,t(e,n,i),e)}),r},kr.mapValues=function(e,t){var r={};return t=io(t,3),mn(e,function(e,n,i){tn(r,n,t(e,n,i))}),r},kr.matches=function(e){return kn(on(e,1))},kr.matchesProperty=function(e,t){return xn(e,on(t,1))},kr.memoize=Na,kr.merge=Rs,kr.mergeWith=Ns,kr.method=iu,kr.methodOf=ou,kr.mixin=au,kr.negate=Ia,kr.nthArg=function(e){return e=hs(e),Gn(function(t){return Fn(t,e)})},kr.omit=Is,kr.omitBy=function(e,t){return ks(e,Ia(io(t)))},kr.once=function(e){return La(2,e)},kr.orderBy=function(e,t,n,i){return null==e?[]:(qa(t)||(t=null==t?[]:[t]),qa(n=i?r:n)||(n=null==n?[]:[n]),Un(e,t,n))},kr.over=uu,kr.overArgs=Ca,kr.overEvery=lu,kr.overSome=cu,kr.partial=ka,kr.partialRight=xa,kr.partition=Sa,kr.pick=Cs,kr.pickBy=ks,kr.property=du,kr.propertyOf=function(e){return function(t){return null==e?r:bn(e,t)}},kr.pull=Xo,kr.pullAll=Jo,kr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Vn(e,t,io(r,2)):e},kr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Vn(e,t,r,n):e},kr.pullAt=$o,kr.range=fu,kr.rangeRight=hu,kr.rearg=Ba,kr.reject=function(e,t){return(qa(e)?Tt:hn)(e,Ia(io(t,3)))},kr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=io(t,3);++n<o;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return qn(e,i),r},kr.rest=function(e,t){if("function"!=typeof e)throw new Le(n);return Gn(e,t=t===r?t:hs(t))},kr.reverse=Zo,kr.sampleSize=function(e,t,n){return t=(n?vo(e,t,n):t===r)?1:hs(t),(qa(e)?Qr:Qn)(e,t)},kr.set=function(e,t,r){return null==e?e:Kn(e,t,r)},kr.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Kn(e,t,n,i)},kr.shuffle=function(e){return(qa(e)?Kr:$n)(e)},kr.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&vo(e,t,n)?(t=0,n=i):(t=null==t?0:hs(t),n=n===r?i:hs(n)),Zn(e,t,n)):[]},kr.sortBy=wa,kr.sortedUniq=function(e){return e&&e.length?ni(e):[]},kr.sortedUniqBy=function(e,t){return e&&e.length?ni(e,io(t,2)):[]},kr.split=function(e,t,n){return n&&"number"!=typeof n&&vo(e,t,n)&&(t=n=r),(n=n===r?f:n>>>0)?(e=ms(e))&&("string"==typeof t||null!=t&&!is(t))&&!(t=oi(t))&&er(e)?mi(ar(e),0,n):e.split(t,n):[]},kr.spread=function(e,t){if("function"!=typeof e)throw new Le(n);return t=null==t?0:pr(hs(t),0),Gn(function(r){var n=r[t],i=mi(r,0,t);return n&&Pt(i,n),bt(e,this,i)})},kr.tail=function(e){var t=null==e?0:e.length;return t?Zn(e,1,t):[]},kr.take=function(e,t,n){return e&&e.length?Zn(e,0,(t=n||t===r?1:hs(t))<0?0:t):[]},kr.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Zn(e,(t=i-(t=n||t===r?1:hs(t)))<0?0:t,i):[]},kr.takeRightWhile=function(e,t){return e&&e.length?li(e,io(t,3),!1,!0):[]},kr.takeWhile=function(e,t){return e&&e.length?li(e,io(t,3)):[]},kr.tap=function(e,t){return t(e),e},kr.throttle=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new Le(n);return Za(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),ja(e,t,{leading:i,maxWait:t,trailing:o})},kr.thru=fa,kr.toArray=ds,kr.toPairs=xs,kr.toPairsIn=Bs,kr.toPath=function(e){return qa(e)?At(e,ko):ss(e)?[e]:Ti(Co(ms(e)))},kr.toPlainObject=vs,kr.transform=function(e,t,r){var n=qa(e),i=n||Ha(e)||us(e);if(t=io(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:Za(e)&&Xa(o)?xr(We(e)):{}}return(i?Ot:mn)(e,function(e,n,i){return t(r,e,n,i)}),r},kr.unary=function(e){return Ma(e,1)},kr.union=ea,kr.unionBy=ta,kr.unionWith=ra,kr.uniq=function(e){return e&&e.length?ai(e):[]},kr.uniqBy=function(e,t){return e&&e.length?ai(e,io(t,2)):[]},kr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ai(e,r,t):[]},kr.unset=function(e,t){return null==e||si(e,t)},kr.unzip=na,kr.unzipWith=ia,kr.update=function(e,t,r){return null==e?e:ui(e,t,pi(r))},kr.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ui(e,t,pi(n),i)},kr.values=Fs,kr.valuesIn=function(e){return null==e?[]:Ht(e,Ds(e))},kr.without=oa,kr.words=Xs,kr.wrap=function(e,t){return ka(pi(t),e)},kr.xor=aa,kr.xorBy=sa,kr.xorWith=ua,kr.zip=la,kr.zipObject=function(e,t){return fi(e||[],t||[],Jr)},kr.zipObjectDeep=function(e,t){return fi(e||[],t||[],Kn)},kr.zipWith=ca,kr.entries=xs,kr.entriesIn=Bs,kr.extend=ys,kr.extendWith=bs,au(kr,kr),kr.add=mu,kr.attempt=Js,kr.camelCase=Us,kr.capitalize=zs,kr.ceil=_u,kr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=gs(n))==n?n:0),t!==r&&(t=(t=gs(t))==t?t:0),nn(gs(e),t,n)},kr.clone=function(e){return on(e,4)},kr.cloneDeep=function(e){return on(e,5)},kr.cloneDeepWith=function(e,t){return on(e,5,t="function"==typeof t?t:r)},kr.cloneWith=function(e,t){return on(e,4,t="function"==typeof t?t:r)},kr.conformsTo=function(e,t){return null==t||an(e,t,js(t))},kr.deburr=Vs,kr.defaultTo=function(e,t){return null==e||e!=e?t:e},kr.divide=yu,kr.endsWith=function(e,t,n){e=ms(e),t=oi(t);var i=e.length,o=n=n===r?i:nn(hs(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},kr.eq=Fa,kr.escape=function(e){return(e=ms(e))&&H.test(e)?e.replace(Y,$t):e},kr.escapeRegExp=function(e){return(e=ms(e))&&te.test(e)?e.replace(ee,"\\$&"):e},kr.every=function(e,t,n){var i=qa(e)?wt:dn;return n&&vo(e,t,n)&&(t=r),i(e,io(t,3))},kr.find=ga,kr.findIndex=Vo,kr.findKey=function(e,t){return It(e,io(t,3),mn)},kr.findLast=va,kr.findLastIndex=qo,kr.findLastKey=function(e,t){return It(e,io(t,3),_n)},kr.floor=bu,kr.forEach=ma,kr.forEachRight=_a,kr.forIn=function(e,t){return null==e?e:gn(e,io(t,3),Ds)},kr.forInRight=function(e,t){return null==e?e:vn(e,io(t,3),Ds)},kr.forOwn=function(e,t){return e&&mn(e,io(t,3))},kr.forOwnRight=function(e,t){return e&&_n(e,io(t,3))},kr.get=Ts,kr.gt=Ua,kr.gte=za,kr.has=function(e,t){return null!=e&&fo(e,t,wn)},kr.hasIn=Ms,kr.head=Yo,kr.identity=ru,kr.includes=function(e,t,r,n){e=Ya(e)?e:Fs(e),r=r&&!n?hs(r):0;var i=e.length;return r<0&&(r=pr(i+r,0)),as(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&kt(e,t,r)>-1},kr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:hs(r);return i<0&&(i=pr(n+i,0)),kt(e,t,i)},kr.inRange=function(e,t,n){return t=fs(t),n===r?(n=t,t=0):n=fs(n),function(e,t,r){return e>=gr(t,r)&&e<pr(t,r)}(e=gs(e),t,n)},kr.invoke=Ps,kr.isArguments=Va,kr.isArray=qa,kr.isArrayBuffer=Wa,kr.isArrayLike=Ya,kr.isArrayLikeObject=Ga,kr.isBoolean=function(e){return!0===e||!1===e||es(e)&&On(e)==v},kr.isBuffer=Ha,kr.isDate=Qa,kr.isElement=function(e){return es(e)&&1===e.nodeType&&!ns(e)},kr.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(qa(e)||"string"==typeof e||"function"==typeof e.splice||Ha(e)||us(e)||Va(e)))return!e.length;var t=co(e);if(t==E||t==M)return!e.size;if(bo(e))return!Nn(e).length;for(var r in e)if(Ne.call(e,r))return!1;return!0},kr.isEqual=function(e,t){return Pn(e,t)},kr.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Pn(e,t,r,n):!!i},kr.isError=Ka,kr.isFinite=function(e){return"number"==typeof e&&dr(e)},kr.isFunction=Xa,kr.isInteger=Ja,kr.isLength=$a,kr.isMap=ts,kr.isMatch=function(e,t){return e===t||jn(e,t,ao(t))},kr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,jn(e,t,ao(t),n)},kr.isNaN=function(e){return rs(e)&&e!=+e},kr.isNative=function(e){if(yo(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dn(e)},kr.isNil=function(e){return null==e},kr.isNull=function(e){return null===e},kr.isNumber=rs,kr.isObject=Za,kr.isObjectLike=es,kr.isPlainObject=ns,kr.isRegExp=is,kr.isSafeInteger=function(e){return Ja(e)&&e>=-9007199254740991&&e<=c},kr.isSet=os,kr.isString=as,kr.isSymbol=ss,kr.isTypedArray=us,kr.isUndefined=function(e){return e===r},kr.isWeakMap=function(e){return es(e)&&co(e)==P},kr.isWeakSet=function(e){return es(e)&&"[object WeakSet]"==On(e)},kr.join=function(e,t){return null==e?"":fr.call(e,t)},kr.kebabCase=qs,kr.last=Ko,kr.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=hs(n))<0?pr(i+o,0):gr(o,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Ct(e,Bt,o,!0)},kr.lowerCase=Ws,kr.lowerFirst=Ys,kr.lt=ls,kr.lte=cs,kr.max=function(e){return e&&e.length?fn(e,ru,Sn):r},kr.maxBy=function(e,t){return e&&e.length?fn(e,io(t,2),Sn):r},kr.mean=function(e){return Ft(e,ru)},kr.meanBy=function(e,t){return Ft(e,io(t,2))},kr.min=function(e){return e&&e.length?fn(e,ru,In):r},kr.minBy=function(e,t){return e&&e.length?fn(e,io(t,2),In):r},kr.stubArray=pu,kr.stubFalse=gu,kr.stubObject=function(){return{}},kr.stubString=function(){return""},kr.stubTrue=function(){return!0},kr.multiply=Eu,kr.nth=function(e,t){return e&&e.length?Fn(e,hs(t)):r},kr.noConflict=function(){return ut._===this&&(ut._=Be),this},kr.noop=su,kr.now=Ta,kr.pad=function(e,t,r){e=ms(e);var n=(t=hs(t))?or(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Ui(Nt(i),r)+e+Ui(ht(i),r)},kr.padEnd=function(e,t,r){e=ms(e);var n=(t=hs(t))?or(e):0;return t&&n<t?e+Ui(t-n,r):e},kr.padStart=function(e,t,r){e=ms(e);var n=(t=hs(t))?or(e):0;return t&&n<t?Ui(t-n,r)+e:e},kr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),mr(ms(e).replace(re,""),t||0)},kr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&vo(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=fs(e),t===r?(t=e,e=0):t=fs(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=_r();return gr(e+o*(t-e+it("1e-"+((o+"").length-1))),t)}return Wn(e,t)},kr.reduce=function(e,t,r){var n=qa(e)?jt:Vt,i=arguments.length<3;return n(e,io(t,4),r,i,ln)},kr.reduceRight=function(e,t,r){var n=qa(e)?Dt:Vt,i=arguments.length<3;return n(e,io(t,4),r,i,cn)},kr.repeat=function(e,t,n){return t=(n?vo(e,t,n):t===r)?1:hs(t),Yn(ms(e),t)},kr.replace=function(){var e=arguments,t=ms(e[0]);return e.length<3?t:t.replace(e[1],e[2])},kr.result=function(e,t,n){var i=-1,o=(t=gi(t,e)).length;for(o||(o=1,e=r);++i<o;){var a=null==e?r:e[ko(t[i])];a===r&&(i=o,a=n),e=Xa(a)?a.call(e):a}return e},kr.round=Ou,kr.runInContext=e,kr.sample=function(e){return(qa(e)?Hr:Hn)(e)},kr.size=function(e){if(null==e)return 0;if(Ya(e))return as(e)?or(e):e.length;var t=co(e);return t==E||t==M?e.size:Nn(e).length},kr.snakeCase=Gs,kr.some=function(e,t,n){var i=qa(e)?Rt:ei;return n&&vo(e,t,n)&&(t=r),i(e,io(t,3))},kr.sortedIndex=function(e,t){return ti(e,t)},kr.sortedIndexBy=function(e,t,r){return ri(e,t,io(r,2))},kr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ti(e,t);if(n<r&&Fa(e[n],t))return n}return-1},kr.sortedLastIndex=function(e,t){return ti(e,t,!0)},kr.sortedLastIndexBy=function(e,t,r){return ri(e,t,io(r,2),!0)},kr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ti(e,t,!0)-1;if(Fa(e[r],t))return r}return-1},kr.startCase=Hs,kr.startsWith=function(e,t,r){return e=ms(e),r=null==r?0:nn(hs(r),0,e.length),t=oi(t),e.slice(r,r+t.length)==t},kr.subtract=Su,kr.sum=function(e){return e&&e.length?qt(e,ru):0},kr.sumBy=function(e,t){return e&&e.length?qt(e,io(t,2)):0},kr.template=function(e,t,n){var i=kr.templateSettings;n&&vo(e,t,n)&&(t=r),e=ms(e),t=bs({},t,i,Qi);var o,a,s=bs({},t.imports,i.imports,Qi),u=js(s),l=Ht(s,u),c=0,d=t.interpolate||_e,f="__p += '",h=Te((t.escape||_e).source+"|"+d.source+"|"+(d===X?ce:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++et+"]")+"\n";e.replace(h,function(t,r,n,i,s,u){return n||(n=i),f+=e.slice(c,u).replace(ye,Zt),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),f+="';\n";var g=Ne.call(t,"variable")&&t.variable;if(g){if(ue.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(z,""):f).replace(V,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Js(function(){return Oe(u,p+"return "+f).apply(r,l)});if(v.source=f,Ka(v))throw v;return v},kr.times=function(e,t){if((e=hs(e))<1||e>c)return[];var r=f,n=gr(e,f);t=io(t),e-=f;for(var i=Wt(n,t);++r<e;)t(r);return i},kr.toFinite=fs,kr.toInteger=hs,kr.toLength=ps,kr.toLower=function(e){return ms(e).toLowerCase()},kr.toNumber=gs,kr.toSafeInteger=function(e){return e?nn(hs(e),-9007199254740991,c):0===e?e:0},kr.toString=ms,kr.toUpper=function(e){return ms(e).toUpperCase()},kr.trim=function(e,t,n){if((e=ms(e))&&(n||t===r))return Yt(e);if(!e||!(t=oi(t)))return e;var i=ar(e),o=ar(t);return mi(i,Kt(i,o),Xt(i,o)+1).join("")},kr.trimEnd=function(e,t,n){if((e=ms(e))&&(n||t===r))return e.slice(0,sr(e)+1);if(!e||!(t=oi(t)))return e;var i=ar(e);return mi(i,0,Xt(i,ar(t))+1).join("")},kr.trimStart=function(e,t,n){if((e=ms(e))&&(n||t===r))return e.replace(re,"");if(!e||!(t=oi(t)))return e;var i=ar(e);return mi(i,Kt(i,ar(t))).join("")},kr.truncate=function(e,t){var n=30,i="...";if(Za(t)){var o="separator"in t?t.separator:o;n="length"in t?hs(t.length):n,i="omission"in t?oi(t.omission):i}var a=(e=ms(e)).length;if(er(e)){var s=ar(e);a=s.length}if(n>=a)return e;var u=n-or(i);if(u<1)return i;var l=s?mi(s,0,u).join(""):e.slice(0,u);if(o===r)return l+i;if(s&&(u+=l.length-u),is(o)){if(e.slice(u).search(o)){var c,d=l;for(o.global||(o=Te(o.source,ms(de.exec(o))+"g")),o.lastIndex=0;c=o.exec(d);)var f=c.index;l=l.slice(0,f===r?u:f)}}else if(e.indexOf(oi(o),u)!=u){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i},kr.unescape=function(e){return(e=ms(e))&&G.test(e)?e.replace(W,ur):e},kr.uniqueId=function(e){var t=++Ie;return ms(e)+t},kr.upperCase=Qs,kr.upperFirst=Ks,kr.each=ma,kr.eachRight=_a,kr.first=Yo,au(kr,(vu={},mn(kr,function(e,t){Ne.call(kr.prototype,t)||(vu[t]=e)}),vu),{chain:!1}),kr.VERSION="4.17.21",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){kr[e].placeholder=kr}),Ot(["drop","take"],function(e,t){Ur.prototype[e]=function(n){n=n===r?1:pr(hs(n),0);var i=this.__filtered__&&!t?new Ur(this):this.clone();return i.__filtered__?i.__takeCount__=gr(n,i.__takeCount__):i.__views__.push({size:gr(n,f),type:e+(i.__dir__<0?"Right":"")}),i},Ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ot(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;Ur.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:io(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Ot(["head","last"],function(e,t){var r="take"+(t?"Right":"");Ur.prototype[e]=function(){return this[r](1).value()[0]}}),Ot(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Ur.prototype[e]=function(){return this.__filtered__?new Ur(this):this[r](1)}}),Ur.prototype.compact=function(){return this.filter(ru)},Ur.prototype.find=function(e){return this.filter(e).head()},Ur.prototype.findLast=function(e){return this.reverse().find(e)},Ur.prototype.invokeMap=Gn(function(e,t){return"function"==typeof e?new Ur(this):this.map(function(r){return Ln(r,e,t)})}),Ur.prototype.reject=function(e){return this.filter(Ia(io(e)))},Ur.prototype.slice=function(e,t){e=hs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ur(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=hs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ur.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ur.prototype.toArray=function(){return this.take(f)},mn(Ur.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=kr[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(kr.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Ur,l=s[0],c=u||qa(t),d=function(e){var t=o.apply(kr,Pt([e],s));return i&&f?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,g=u&&!h;if(!a&&c){t=g?t:new Ur(this);var v=e.apply(t,s);return v.__actions__.push({func:fa,args:[d],thisArg:r}),new Fr(v,f)}return p&&g?e.apply(this,s):(v=this.thru(d),p?i?v.value()[0]:v.value():v)})}),Ot(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ae[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);kr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(qa(i)?i:[],e)}return this[r](function(r){return t.apply(qa(r)?r:[],e)})}}),mn(Ur.prototype,function(e,t){var r=kr[t];if(r){var n=r.name+"";Ne.call(Lr,n)||(Lr[n]=[]),Lr[n].push({name:t,func:r})}}),Lr[ki(r,2).name]=[{name:"wrapper",func:r}],Ur.prototype.clone=function(){var e=new Ur(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},Ur.prototype.reverse=function(){if(this.__filtered__){var e=new Ur(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ur.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=qa(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=gr(t,e+a);break;case"takeRight":e=pr(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=n?s:a-1,c=this.__iteratees__,d=c.length,f=0,h=gr(u,this.__takeCount__);if(!r||!n&&i==u&&h==u)return ci(e,this.__actions__);var p=[];e:for(;u--&&f<h;){for(var g=-1,v=e[l+=t];++g<d;){var m=c[g],_=m.iteratee,y=m.type,b=_(v);if(2==y)v=b;else if(!b){if(1==y)continue e;break e}}p[f++]=v}return p},kr.prototype.at=ha,kr.prototype.chain=function(){return da(this)},kr.prototype.commit=function(){return new Fr(this.value(),this.__chain__)},kr.prototype.next=function(){this.__values__===r&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},kr.prototype.plant=function(e){for(var t,n=this;n instanceof Br;){var i=Bo(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},kr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ur){var t=e;return this.__actions__.length&&(t=new Ur(this)),(t=t.reverse()).__actions__.push({func:fa,args:[Zo],thisArg:r}),new Fr(t,this.__chain__)}return this.thru(Zo)},kr.prototype.toJSON=kr.prototype.valueOf=kr.prototype.value=function(){return ci(this.__wrapped__,this.__actions__)},kr.prototype.first=kr.prototype.head,nt&&(kr.prototype[nt]=function(){return this}),kr}();"function"==typeof define&&o.amdO?(ut._=lr,define(function(){return lr})):ct?((ct.exports=lr)._=lr,lt._=lr):ut._=lr}).call(this)}),Gn.register("3264a",function(e,t){var r,n;zn(e.exports,"ECommand",function(){return r}),(n=r||(r={})).CONNECT_TO_ROOM="connectToRoom",n.MODULES_INFO_AVAILABLE="modulesInfoAvailable",n.MODULE_LIFECYCLE_EVENT_AVAILABLE="moduleLifecycleEventAvailable",n.CLIENT_CONNECTED="clientConnected",n.CLIENT_INFO_AVAILABLE="clientInfoAvailable",n.CLIENT_DISCONNECTED="clientDisconnected"}),Gn.register("iVqGx",function(e,t){e.exports=o.e(84).then(o.t.bind(o,3084,23)).then(()=>Gn("8GHQT"))}),Gn("8NFq9");var Hn=Gn("a8VW4");function Qn(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Vn?Vn:void 0}"undefined"==typeof globalThis&&(globalThis=Qn());var Kn="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Vn&&Vn;function Xn(e){try{new e("")}catch(e){return!1}return!0}"function"==typeof Kn.Event&&Xn(Kn.Event)||(Kn.Event=function(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e}),void 0!==Kn.EventTarget&&Xn(Kn.EventTarget)||(Kn.EventTarget=function(){function e(){this.__listeners=new Map}return e.prototype=Object.create(Object.prototype),e.prototype.addEventListener=function(e,t,r){if(arguments.length<2)throw new TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ".concat(arguments.length," present."));var n=this.__listeners,i=e.toString();n.has(i)||n.set(i,new Map);var o=n.get(i);o.has(t)||o.set(t,r)},e.prototype.removeEventListener=function(e,t,r){if(arguments.length<2)throw new TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ".concat(arguments.length," present."));var n=this.__listeners,i=e.toString();if(n.has(i)){var o=n.get(i);o.has(t)&&o.delete(t)}},e.prototype.dispatchEvent=function(e){var t=this;if(!(e instanceof Event))throw new TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");var r=e.type,n=this.__listeners.get(r);if(n){var i=function(){try{"function"==typeof o?o.call(t,e):o&&"function"==typeof o.handleEvent&&o.handleEvent(e)}catch(e){setTimeout(()=>{throw e})}a&&a.once&&n.delete(o)};for(var[o,a]of n.entries())i()}return!0},e}());class Jn{constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}addEventListener(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,i=r.length;n<i;n++)if(r[n].callback===t)return void r.splice(n,1)}dispatchEvent(e){var t=this;if(e.type in this.listeners){for(var r=this.listeners[e.type].slice(),n=function(){var n=r[i];try{n.callback.call(t,e)}catch(e){Promise.resolve().then(()=>{throw e})}n.options&&n.options.once&&t.removeEventListener(e.type,n.callback)},i=0,o=r.length;i<o;i++)n();return!e.defaultPrevented}}}class $n extends Jn{constructor(){super(),this.listeners||Jn.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}}class Zn{constructor(){Object.defineProperty(this,"signal",{value:new $n,writable:!0,configurable:!0})}abort(e){var t=new Event("abort"),r=e;void 0===r&&((r=new Error("This operation was aborted")).name="AbortError"),this.signal.reason=r,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}}!function(e){(function(e){return"function"==typeof e.Request&&!Object.prototype.hasOwnProperty.call(e.Request.prototype,"signal")||!e.AbortController})(e)&&("undefined"!=typeof Symbol&&Symbol.toStringTag&&(Zn.prototype[Symbol.toStringTag]="AbortController",$n.prototype[Symbol.toStringTag]="AbortSignal"),e.AbortController=Zn,e.AbortSignal=$n)}("undefined"!=typeof self?self:Vn);var ei=Qn();"function"!=typeof ei.queueMicrotask&&(ei.queueMicrotask=function(e){Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments.length<=0?void 0:arguments[0])?1:Number(arguments.length<=0?void 0:arguments[0]);return t?Array.prototype.reduce.call(this,function(r,n){return Array.isArray(n)?r.push(...e.call(n,t-1)):r.push(n),r},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(){return this.map(...arguments).flat()},writable:!0}),Gn("8NFq9"),Hn=Gn("a8VW4");var ti,ri,ni,ii,oi,ai,si,ui,li,ci,di,fi,hi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Vn?Vn:{};function pi(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==hi?hi:void 0}"undefined"==typeof globalThis&&(globalThis=pi());var gi="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==hi&&hi;function vi(e){try{new e("")}catch(e){return!1}return!0}"function"==typeof gi.Event&&vi(gi.Event)||(gi.Event=function(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e}),void 0!==gi.EventTarget&&vi(gi.EventTarget)||(gi.EventTarget=function(){function e(){this.__listeners=new Map}return e.prototype=Object.create(Object.prototype),e.prototype.addEventListener=function(e,t,r){if(arguments.length<2)throw TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ".concat(arguments.length," present."));var n=this.__listeners,i=e.toString();n.has(i)||n.set(i,new Map);var o=n.get(i);o.has(t)||o.set(t,r)},e.prototype.removeEventListener=function(e,t,r){if(arguments.length<2)throw TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ".concat(arguments.length," present."));var n=this.__listeners,i=e.toString();if(n.has(i)){var o=n.get(i);o.has(t)&&o.delete(t)}},e.prototype.dispatchEvent=function(e){var t=this;if(!(e instanceof Event))throw TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");var r=e.type,n=this.__listeners.get(r);if(n){var i=function(){try{"function"==typeof o?o.call(t,e):o&&"function"==typeof o.handleEvent&&o.handleEvent(e)}catch(e){setTimeout(()=>{throw e})}a&&a.once&&n.delete(o)};for(var[o,a]of n.entries())i()}return!0},e}());var mi,_i=class{constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}addEventListener(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,i=r.length;n<i;n++)if(r[n].callback===t)return void r.splice(n,1)}dispatchEvent(e){var t=this;if(e.type in this.listeners){for(var r=this.listeners[e.type].slice(),n=function(){var n=r[i];try{n.callback.call(t,e)}catch(e){Promise.resolve().then(()=>{throw e})}n.options&&n.options.once&&t.removeEventListener(e.type,n.callback)},i=0,o=r.length;i<o;i++)n();return!e.defaultPrevented}}},yi=class extends _i{constructor(){super(),this.listeners||_i.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}},bi=class{constructor(){Object.defineProperty(this,"signal",{value:new yi,writable:!0,configurable:!0})}abort(e){var t;t=new Event("abort");var r=e;void 0===r&&((r=Error("This operation was aborted")).name="AbortError"),this.signal.reason=r,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}};("function"!=typeof(mi="undefined"!=typeof self?self:hi).Request||mi.Request.prototype.hasOwnProperty("signal"))&&mi.AbortController||("undefined"!=typeof Symbol&&Symbol.toStringTag&&(bi.prototype[Symbol.toStringTag]="AbortController",yi.prototype[Symbol.toStringTag]="AbortSignal"),mi.AbortController=bi,mi.AbortSignal=yi);var Ei,Oi=pi();"function"!=typeof Oi.queueMicrotask&&(Oi.queueMicrotask=function(e){Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(r,n){return Array.isArray(n)?r.push.apply(r,e.call(n,t-1)):r.push(n),r},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0}),(Ei=ti||(ti={})).CLICK="videoElement.click",Ei.PLAYING="videoElement.playing",Ei.LOADING="videoElement.loading",Ei.PAUSE="videoElement.pause",Ei.VIDEO_PLAYBACK_STATE_CHANGE="videoElement.videoPlaybackStateChange",Ei.NATIVE_EVENT="videoElement.nativeEvent",Ei.UPDATE_PLAYER_RESOLUTION="videoElement.updatePlayerResolution",Ei.TIME_UPDATE="videoElement.timeUpdate";var Si=class{constructor(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.appId=null,this._lastUid=-1,this._messages={},this._immediateExceptions=!1,this._allSubscribingMsg="*",this._immediateExceptions=e}setAppId(e){this.appId=e}getAppId(){return this.appId}publish(e,t){return this._publish(e,t,!1,this._immediateExceptions)}publishSync(e,t){return this._publish(e,t,!0,this._immediateExceptions)}subscribe(e,t){if("function"!=typeof t)return"";var r="uid_"+String(++this._lastUid);return this._messages[e]||(this._messages[e]={}),(this._messages[e]||{})[r]=t,r}toggleSubscriptionBulk(e){"subscribe"===e.action?Object.entries(e.callbacks).forEach(e=>{var[t,r]=e;this.subscribe.call(this,t,r)}):Object.entries(e.callbacks).forEach(e=>{var[t,r]=e;this.unsubscribe.call(this,r)})}subscribeAll(e){return this.subscribe(this._allSubscribingMsg,e)}subscribeOnce(e,t){var r=this,n=this.subscribe(e,function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];r.unsubscribe(n),t.apply(r,i)});return this}clearAllSubscriptions(){this._messages={}}clearSubscriptions(e){for(var t in this._messages)Object.prototype.hasOwnProperty.call(this._messages,t)&&0===t.indexOf(e)&&delete this._messages[t]}unsubscribe(e){var t="string"==typeof e&&(Object.prototype.hasOwnProperty.call(this._messages,e)||this._descendantTopicExists(e)),r=!t&&"string"==typeof e,n="function"==typeof e,i=!1;if(!t){for(var o in this._messages)if(Object.prototype.hasOwnProperty.call(this._messages,o)){var a=this._messages[o]||{};if(r&&a[e]){delete a[e],i=e;break}if(n)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&a[s]===e&&(delete a[s],i=!0)}return i}this.clearSubscriptions(e)}_hasKeys(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}_throwException(e){return()=>{throw e}}_callSubscriberWithDelayedExceptions(e,t){try{e(t)}catch(e){setTimeout(this._throwException(e),0)}}_callSubscriberWithImmediateExceptions(e,t){e(t)}_deliverMessage(e,t,r,n){var i=this._messages[t]||{},o=n?this._callSubscriberWithImmediateExceptions:this._callSubscriberWithDelayedExceptions;if(Object.prototype.hasOwnProperty.call(this._messages,t))for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&o(i[a],r)}_createDeliveryFunction(e,t,r){return()=>{var n=String(e),i=n.lastIndexOf(".");for(this._deliverMessage(e,e,t,r);i>-1;)i=(n=n.substr(0,i)).lastIndexOf("."),this._deliverMessage(e,n,t,r);this._deliverMessage(e,this._allSubscribingMsg,t,r)}}_hasDirectSubscribersFor(e){var t=String(e);return!(!Object.prototype.hasOwnProperty.call(this._messages,t)||!this._hasKeys(this._messages[t]||{}))}_messageHasSubscribers(e){for(var t=String(e),r=this._hasDirectSubscribersFor(t)||this._hasDirectSubscribersFor(this._allSubscribingMsg),n=t.lastIndexOf(".");!r&&-1!==n;)n=(t=t.substr(0,n)).lastIndexOf("."),r=this._hasDirectSubscribersFor(t);return r}_publish(e,t,r,n){var i="symbol"==typeof e?e.toString():e,o=this._createDeliveryFunction(i,t,n);return!!this._messageHasSubscribers(i)&&(r?o():setTimeout(o,0),!0)}_descendantTopicExists(e){for(var t in this._messages)if(Object.prototype.hasOwnProperty.call(this._messages,t)&&0===t.indexOf(e))return!0;return!1}};new Si,new Si;var wi,Ti,Mi,Li,Ai=e=>"".concat("configProvider.configUpdated",".").concat(e),Pi=e=>{var t={};return{configConsumerConstructor:class{constructor(r,n){this._onConfigUpdatedWithContext=this._onConfigUpdated.bind(this),this._configKey=r,this._eventBus=n||e;var i=Ai(r);this._onConfigUpdatedListener=this._eventBus.subscribe(i,this._onConfigUpdatedWithContext),this.config=t[r]}destroy(){this._eventBus.unsubscribe(this._onConfigUpdatedListener)}_handleConfigUpdated(e,t){}_onConfigUpdated(e){t=e.newConfig;var r=e.newConfig[this._configKey];this.config=r,this._handleConfigUpdated(e.updatedValues,r)}},setConsumerConfig:e=>{t=e}}},ji=e=>e instanceof Date,Di=e=>e instanceof Element||e instanceof Document,Ri=e=>null!=e&&"object"==typeof e,Ni=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.prototype.hasOwnProperty.call(e,...r)},Ii=e=>{return Ri(e)&&(t=e,0===Object.keys(t).length);var t},Ci=e=>t=>new Promise((r,n)=>{e(t,e=>{r(e)},e=>{n(e)})}),ki=(e,t)=>{if(e===t)return{};if(!Ri(e)||!Ri(t)||Di(e)||Di(t))return t;var r=Object.keys(e).reduce((e,r)=>(Ni(t,r)||(e[r]=void 0),e),{});return ji(e)||ji(t)?e.valueOf()==t.valueOf()?{}:t:Object.keys(t).reduce((r,n)=>{if(!Ni(e,n))return r[n]=t[n],r;var i=ki(e[n],t[n]);return Ii(i)&&!ji(i)&&(Ii(e[n])||!Ii(t[n]))||(r[n]=i),r},r)},xi=e=>{var t=Fn({},e),r=new Si,{configConsumerConstructor:n,setConsumerConfig:i}=Pi(r);return i(e),{getConfigField:e=>t[e],setConfig:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object.entries(e).reduce((e,t)=>{var[r,n]=t;return e[r]=Fn(Fn({},e[r]),n),e},Fn({},t)),a=ki(t,o);t=o,Object.entries(a).forEach(e=>{var[t,i]=e,a=Ai(t);n?r.publishSync(a,{updatedValues:i,newConfig:o}):r.publish(a,{updatedValues:i,newConfig:o})}),i(t)},getConfig:()=>t,resetConfig:()=>{t=Fn({},e)},ConfigConsumer:n}};function Bi(e,t,r){if(!r||"function"!=typeof r.value)throw TypeError("Only methods can be decorated with @bind. <".concat(t,"> is not a method!"));return{configurable:!0,get(){var e,n=null===(e=r.value)||void 0===e?void 0:e.bind(this);return Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n}}}function Fi(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}(Li=ri||(ri={})).HLS="hls",Li.WEBRTC="webrtc",Li.NATIVE="native",Li.BROADCAST="broadcast",(Mi=ni||(ni={})).IDLE="idle",Mi.LOADING="loading",Mi.PAUSED="paused",Mi.PLAYING="playing",Mi.ERROR="error",(Ti=ii||(ii={})).WAITING="waiting",Ti.AUTO="auto",Ti.MANUAL="manual",(wi=oi||(oi={})).BROADCAST_STATE_CHANGED="commonEvents.broadcastStateChanged",wi.BROADCAST_REMOTE_STATS_AVAILABLE="commonEvents.broadcastRemoteStatsAvailable",wi.PLAYING_STATE_CHANGED="commonEvents.playingStateChanged",wi.COMMON_ERROR="commonEvents.commonError",new Si,(ai||(ai={})).LOG="logger.log";var Ui=(e,t,r)=>(n,i)=>{e.publish(ai.LOG,{domain:t,timestamp:performance.now(),level:r,message:n,payload:i})},zi=(e,t)=>{var r="".concat(t,"{").concat((Math.random()+1).toString(36).substring(2,6),"}");return{debug:Ui(e,r,"debug"),verbose:Ui(e,r,"verbose"),info:Ui(e,r,"info"),warn:Ui(e,r,"warn"),error:Ui(e,r,"error"),fatal:Ui(e,r,"fatal")}},Vi=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.log(...t.filter(e=>void 0!==e))},qi={debug:(e,t)=>Vi("%c".concat(e),"color: rgb(102, 102, 102)",t),verbose:(e,t)=>Vi("%c".concat(e),"color: rgb(36, 114, 200)",t),info:(e,t)=>Vi("%c".concat(e),"color: rgb(13, 188, 121)",t),warn:(e,t)=>Vi("%c".concat(e),"color: rgb(229, 229, 16)",t),error:(e,t)=>Vi("%c".concat(e),"color: rgb(241, 76, 76)",t),fatal:(e,t)=>Vi("%c".concat(e),"background: rgb(241, 76, 76); color: #fff",t)},Wi=[],Yi=class{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wi,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this._levels=t,this._eventBus=e,this._enableErrorAutoLog=i,this._onLogMessageReceivedToken=this._eventBus.subscribe(ai.LOG,this._onMessageReceived),this._onErrorReceivedToken=this._eventBus.subscribe(oi.COMMON_ERROR,this._onErrorReceived),this._ignoreDomains=n,this._additionalScopeSubscriptions=r.map(e=>this._eventBus.subscribe(e,t=>{this._onAdditionalScopeMessageReceived(e,t)})),this._appId="".concat((Math.random()+1).toString(36).substring(2,6))}destroy(){this._eventBus.unsubscribe(this._onLogMessageReceivedToken),this._eventBus.unsubscribe(this._onErrorReceivedToken),this._additionalScopeSubscriptions.forEach(this._eventBus.unsubscribe)}_onMessageReceived(e){var{domain:t,timestamp:r,level:n,message:i,payload:o}=e;this._levels.includes(n)&&!this._ignoreDomains.includes(t)&&(qi[n]||qi.info)("(".concat(this._appId,") :: [").concat(t,"] ").concat(n.toUpperCase(),":\n").concat(i,"@").concat(r),o)}_onAdditionalScopeMessageReceived(e,t){(0,qi.verbose)("[".concat(e,"] Event receiver with payload ").concat(t," @ ").concat(performance.now()))}_onErrorReceived(e){var{error:t}=e;this._enableErrorAutoLog&&zi(this._eventBus,"COMMON ERROR").error("Error in ".concat(t.domain,": ").concat(t.message," ").concat(t.info&&" ("+t.info+")"))}};Fi([Bi],Yi.prototype,"_onMessageReceived",null),Fi([Bi],Yi.prototype,"_onAdditionalScopeMessageReceived",null),Fi([Bi],Yi.prototype,"_onErrorReceived",null);var Gi,Hi={videoElementControllerConfig:{limitCheckingAutoplay:5,minimalPossibleVideoDimension:50,timeoutUpdateStatusPlaying:2e3,timeoutUpdateVideoDuration:500}},{ConfigConsumer:Qi,setConfig:Ki,resetConfig:Xi}=xi(Hi);(Gi=si||(si={})).NATIVE_EVENT="videoElementController.nativeEvent",Gi.CLICK="videoElementController.click",Gi.FORCE_PLAY_AFTER_PAUSE="videoElementController.forcePlayAfterPause",Gi.VIDEO_START="videoElementController.videoStart",Gi.VIDEO_PAUSE="videoElementController.videoPause",Gi.VIDEO_RESET="videoElementController.videoReset",Gi.PAUSED="videoElementController.paused",Gi.PLAYING="videoElementController.playing",Gi.LOADING="videoElementController.loading",Gi.LOADED="videoElementController.loaded",Gi.UPDATED="videoElementController.updated",Gi.DESTROY="videoElementController.destroy",Gi.STREAM_RESET="videoElementController.streamReset",Gi.CAN_PLAY="videoElementController.canPlay",Gi.REMOVE_MEDIA_STREAM="videoElementController.removeMediaStream",Gi.ERROR="videoElementController.error",Gi.ABORT="videoElementController.abort",Gi.STALLED="videoElementController.stalled",Gi.WAITING="videoElementController.waiting",Gi.UPDATE_PLAYER_RESOLUTION="videoElementController.updatePlayerResolution",Gi.RESET_CHECKING_AUTOPLAY_COUNT="videoElementController.resetCheckingAutoplayCount",Gi.CANCEL_RESET_STREAM="videoElementController.cancelResetStream",Gi.RESTART="videoElementController.restart",Gi.TIME_UPDATE_NATIVE="videoElementController.native",Gi.UPDATE_MEDIA_STREAM="videoElementController.updateMediaStream",Gi.VIDEO_ELEMENT_RECREATED="videoElementController.videoElementRecreated",Gi.VIDEO_PLAYBACK_STATE_CHANGED="videoElementController.videoPlaybackStateChanged",Gi.SET_VOLUME="videoElementController.setVolume";var Ji=0,$i=class{constructor(e){this._config={},this._eventsMap={[si.CAN_PLAY]:this._checkAutoplayEnabled,[si.DESTROY]:this.destroy,[si.FORCE_PLAY_AFTER_PAUSE]:this._forcePlayAfterPause,[si.RESET_CHECKING_AUTOPLAY_COUNT]:this._resetCheckingAutoplayCount},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - AutoplayController"),this._logger.info("Created"),this._logger.debug("Initial config",this._config),this._logger.debug("Initial state",this._state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e}destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_handleConfigUpdated(){}_forcePlayAfterPause(e){if(void 0===this._config.autoplay||this._config.autoplay){this._logger.verbose("Trying to force video to play.\n    Reason: ".concat(e.reason));var t=this._state.getState();!t.startedPlaying||t.isPlaying||this._config.canBePaused?this._logger.verbose("Currently unable to autoplay the video"):this._checkAutoplayEnabled()}else this._logger.verbose("Autoplay is disabled.")}_checkAutoplayEnabled(){if(this._logger.debug("Checking if autoplay is possible"),this._state.getState().canPlay){if(void 0===this._config.autoplay||this._config.autoplay)return Ji>this._config.limitCheckingAutoplay?(this._logger.verbose("Unable to autoplay the video. The limit of autoplay checking (".concat(this._config.limitCheckingAutoplay,") is exceeded")),void this._eventBus.publish(si.PAUSED,{})):(Ji+=1,this._logger.verbose("Autoplay is used to play the video"),void this._eventBus.publish(si.VIDEO_START,{}));this._logger.verbose("Autoplay is disabled.")}else this._logger.verbose("No canPlay event caught, skipping check")}_resetCheckingAutoplayCount(){Ji=0}};Fi([Bi],$i.prototype,"destroy",null),Fi([Bi],$i.prototype,"init",null),Fi([Bi],$i.prototype,"_forcePlayAfterPause",null),Fi([Bi],$i.prototype,"_checkAutoplayEnabled",null),Fi([Bi],$i.prototype,"_resetCheckingAutoplayCount",null);var Zi,eo=class extends EventTarget{constructor(){super()}emitEvent(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))}},to=class extends eo{constructor(e){super(),this._eventsMap={[si.PLAYING]:this._handlePlaying,[si.LOADING]:this._handleLoading,[si.VIDEO_PAUSE]:this._handlePause,[si.CLICK]:this._handleClick,[si.DESTROY]:this.destroy,[si.NATIVE_EVENT]:this._handleNativeEvent,[si.UPDATE_PLAYER_RESOLUTION]:this._handleUpdatePlayerResolution,[si.VIDEO_PLAYBACK_STATE_CHANGED]:this._handleVideoPlaybackStateChange,[si.TIME_UPDATE_NATIVE]:this._handleTimeUpdate},this._eventBus=e.eventBus,this.init()}destroy(){this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}init(){this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_handlePlaying(e){this.emitEvent(ti.PLAYING,e)}_handleLoading(){this.emitEvent(ti.LOADING,{})}_handlePause(){this.emitEvent(ti.PAUSE,{})}_handleClick(e){this.emitEvent(ti.CLICK,{originalEvent:e.originalEvent})}_handleNativeEvent(e){this.emitEvent(ti.NATIVE_EVENT,e)}_handleUpdatePlayerResolution(e){this.emitEvent(ti.UPDATE_PLAYER_RESOLUTION,e)}_handleTimeUpdate(e){this.emitEvent(ti.TIME_UPDATE,e)}_handleVideoPlaybackStateChange(e){this.emitEvent(ti.VIDEO_PLAYBACK_STATE_CHANGE,{prevState:e.prevState,nextState:e.nextState})}};Fi([Bi],to.prototype,"destroy",null),Fi([Bi],to.prototype,"init",null),Fi([Bi],to.prototype,"_handlePlaying",null),Fi([Bi],to.prototype,"_handleLoading",null),Fi([Bi],to.prototype,"_handlePause",null),Fi([Bi],to.prototype,"_handleClick",null),Fi([Bi],to.prototype,"_handleNativeEvent",null),Fi([Bi],to.prototype,"_handleUpdatePlayerResolution",null),Fi([Bi],to.prototype,"_handleTimeUpdate",null),Fi([Bi],to.prototype,"_handleVideoPlaybackStateChange",null),Zi=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(r),a=Math.max(i,o),s=0,u=e.map([t,r],function(t){var r=a-e.getVersionPrecision(t),n=t+Array(r+1).join(".0");return e.map(n.split("."),function(e){return Array(20-e.length).join("0")+e}).reverse()});for(n&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));for(t=0,r=i.length;t<r;t+=1)!function(){var r=i[t];"object"==typeof r&&null!==r&&Object.keys(r).forEach(function(t){e[t]=r[t]})}();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},o=r(18),a=function(){function e(){}return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e,[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}]),e}();t.default=a,e.exports=t.default},91:function(e,t,r){t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),o=u(r(94)),a=u(r(95)),s=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(n.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},o=0;if(Object.keys(e).forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(r[t]=a,n+=1)}),n>0){var a=Object.keys(r),u=s.default.find(a,function(e){return t.isOS(e)});if(u){var l=this.satisfies(r[u]);if(void 0!==l)return l}var c=s.default.find(a,function(e){return t.isPlatform(e)});if(c){var d=this.satisfies(r[c]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i),h=s.default.find(f,function(e){return t.isBrowser(e,!0)});if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(s.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=l,e.exports=t.default},92:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:o.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:o.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:o.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=a,e.exports=t.default}});var ro,no=null!==globalThis&&void 0!==globalThis&&null!==(mn=globalThis.navigator)&&void 0!==mn&&mn.userAgent?(ro=Zi,ro&&ro.__esModule?ro.default:ro).getParser(globalThis.navigator.userAgent):null,io=e=>!!no&&(no.satisfies(e)||!1),oo=io({safari:">=15"}),ao=io({firefox:">0"}),so=io({safari:">0"}),uo=io({chrome:">0"}),lo=io({edge:">0"}),co=new WeakMap,fo=(e,t)=>{var r=(co.get(e)||Promise.resolve()).then(()=>{var r=((e,t)=>e instanceof HTMLMediaElement?(((e,t)=>{var r=0===e.readyState,n=2!==e.networkState&&1!==e.networkState;if(ao&&"play"===t&&r&&n)throw Error("Can not play audio")})(e,t),"function"==typeof t?t(e):e[t]()):null)(e,t);return null!=r&&r.then?Promise.resolve(r):new Promise(e=>{setTimeout(()=>{e(r)},150)})}).then(()=>{co.delete(e)}).catch(t=>{throw co.delete(e),t});return co.set(e,r),r},ho=class{constructor(e){this._eventsMap={[si.VIDEO_START]:this._startVideo,[si.VIDEO_PAUSE]:this._pauseVideo,[si.VIDEO_RESET]:this._resetVideo,[si.RESTART]:this._restart,[si.DESTROY]:this._destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - PlaybackController"),this._logger.info("Created"),this._logger.debug("Initial state",this._state),this.init()}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_startVideo(){var e=this._state.getState().videoElement;if(this._logger.verbose("Starting the video"),e)return e.playbackRate||(e.playbackRate=1),this._logger.debug("Play call is added to the promises queue"),fo(e,"play").then(()=>{this._logger.debug("Play call resolved"),this._state.getState().canPlay&&this._eventBus.publish(si.PLAYING,{})}).catch(e=>{this._state.setState({isAutoplayError:!0}),this._logger.error("An error occured when trying to play the video.",{error:e}),this._state.getState().canPlay&&this._eventBus.publish(si.PAUSED,{})})}_pauseVideo(){this._logger.debug("Pausing the video");var e=this._state.getState().videoElement;if(e)return this._logger.debug("Pause call is added to the promises queue"),fo(e,"pause").then(()=>{this._logger.debug("Pause call resolved")}).catch(e=>{this._logger.warn("Could not pause video",e)})}_loadVideo(){this._logger.verbose("Loading the video");var e=this._state.getState().videoElement;if(null==e||!e.src||!e.src.startsWith("blob"))return e?(this._logger.debug("Load call is added to the promises queue"),fo(e,"load").then(()=>{this._logger.debug("Load call resolved")}).catch(e=>{this._logger.warn("Could not load video",e)})):void 0;this._logger.debug("Stream seems to be blob. Skipping load")}_resetVideo(){this._logger.verbose("Resetting the video"),this._state.getState().videoElement&&(this._eventBus.publish(si.LOADING,{}),this._loadVideo())}_restart(){var e=this;return xn(function*(){e._logger.verbose("Restarting the video"),yield e._pauseVideo(),e._startVideo()})()}_destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}};Fi([Bi],ho.prototype,"init",null),Fi([Bi],ho.prototype,"_startVideo",null),Fi([Bi],ho.prototype,"_pauseVideo",null),Fi([Bi],ho.prototype,"_loadVideo",null),Fi([Bi],ho.prototype,"_resetVideo",null),Fi([Bi],ho.prototype,"_restart",null),Fi([Bi],ho.prototype,"_destroy",null);var po=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},go="\n  width: 100%;\n",vo=class{constructor(e){this._knownVideoElementStyles="",this._eventsMap={[si.PLAYING]:this.startAnimationFrame,[si.LOADING]:this.cancelAnimationFrame,[si.REMOVE_MEDIA_STREAM]:this.cancelAnimationFrame},this._applyStyles=()=>{this._logger.debug("Apply styles for canvas and video elements");var{canvasElement:e,videoElement:t}=this._getElements();e&&t&&(this._knownVideoElementStyles=t.style.cssText,e.style.cssText=go,t.style.cssText="\n      ".concat(go,"\n      opacity: 0;\n      position: absolute;\n      left: 0;\n      top: 0;\n    "))},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - CanvasVideoRenderer");var t=document.createElement("canvas");this._canvasContext=t.getContext("2d"),e.className&&(t.className=e.className),this.init(),this._state.setState({canvasElement:t}),this._applyStyles(),this._logger.verbose("Canvas renderer has been created")}startAnimationFrame(){var{canvasElement:e,videoElement:t}=this._getElements();if(this.cancelAnimationFrame(),e&&t){var{width:r,height:n}=e.getBoundingClientRect(),{videoWidth:i,videoHeight:o}=t;if(r/n<1&&i/o>1){var a,s=Math.max(r,i),u=o*(r/i),l=r>s?(r-s)/2:0,c=(n-u)/2;if(this._canvasContext){var d=devicePixelRatio;e.width=s*d,e.height=n*d,this._canvasContext.scale(d,d)}null===(a=this._canvasContext)||void 0===a||a.drawImage(t,l,c,s,u)}else{var f,h=Math.max(n,o),p=i*(n/o),g=n>h?(n-h)/2:0,v=(r-p)/2;if(this._canvasContext){var m=devicePixelRatio;e.width=r*m,e.height=h*m,this._canvasContext.scale(m,m)}null===(f=this._canvasContext)||void 0===f||f.drawImage(t,v,g,p,h)}this._state.getState().isLoading||(this._canvasAnimationFrameId=requestAnimationFrame(this.startAnimationFrame))}}getCanvasElement(){return this._getElements().canvasElement}destroy(){this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap});var{canvasElement:e,videoElement:t}=this._getElements();e&&e.parentNode&&e.parentNode.removeChild(e),t&&(t.style.cssText=this._knownVideoElementStyles,this._knownVideoElementStyles=""),this._state.setState({canvasElement:null}),this._logger.verbose("Canvas renderer was destroyed")}init(){this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}cancelAnimationFrame(){this._canvasAnimationFrameId&&(cancelAnimationFrame(this._canvasAnimationFrameId),this._canvasAnimationFrameId=null)}_getElements(){var{videoElement:e,canvasElement:t}=this._state.getState();return{videoElement:e,canvasElement:t}}};Fi([Bi],vo.prototype,"startAnimationFrame",null),Fi([Bi],vo.prototype,"destroy",null),Fi([Bi],vo.prototype,"init",null),Fi([Bi],vo.prototype,"cancelAnimationFrame",null),Fi([Bi],vo.prototype,"_getElements",null);var mo=class{constructor(e){this._canvasVideoRenderer=null,this._config={},this._isLocalVideo=!1,this._eventsMap={[si.SET_VOLUME]:this._setVolume,[si.DESTROY]:this._destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - RenderController"),this._logger.info("Created"),this._logger.debug("Initial config",this._config),this._logger.debug("Initial state",this._state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e,this.applyConfigToVideoElement()}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}getElements(){var{videoElement:e,canvasElement:t,ownContainer:r}=this._state.getState();return{videoElement:e,canvasElement:t,ownContainer:r}}getVideoElement(){return this.getElements().videoElement}getCanvasElement(){return this.getElements().canvasElement}renderVideoInto(e){var{ownContainer:t,videoElement:r}=this.getElements();this._logger.debug("renderVideoInto method was called");var n=!1;if(e&&r){var i,o=t||e;r.parentElement!==o&&(n=!0,o.appendChild(r));var a=null===(i=this._canvasVideoRenderer)||void 0===i?void 0:i.getCanvasElement();this._canvasVideoRenderer&&(null==a?void 0:a.parentElement)!==o&&(n=!0,o.appendChild(a),this._logger.info("Canvas element has been rendered to DOM")),o===t&&t.parentElement!==e&&(n=!0,e.appendChild(t)),n?this._logger.info("Video element has been rendered to DOM"):this._logger.verbose("Skipping video element render: video element is already mounted to the DOM.")}}setVideoElement(e,t){this._logger.debug("Video element updated",e),e!==this.getVideoElement()?(this._isLocalVideo&&(this._logger.verbose("Removing video element and container from document"),po(this.getElements().videoElement),po(this.getElements().ownContainer)),this._state.setState({videoElement:e,ownContainer:t}),this.applyConfigToVideoElement()):this._logger.verbose("Received video element is equal to the previous one. Skipping")}applyConfigToVideoElement(){if(this._logger.debug("Applying config to the video element"),this.getVideoElement()){var e=this.getVideoElement();if(e){var{isNonAnonymous:t,isMuted:r,nativeControls:n,videoElementClassName:i,canvasElementClassName:o,shouldUseCanvas:a,rootElement:s,autoplay:u}=this._config;this._logger.verbose("Applied config",this._config),u&&(e.autoplay=!0),e.playsInline=!0,void 0!==n&&(e.controls=!!n),void 0!==r&&(e.muted=!!r),void 0!==t&&(t?e.removeAttribute("crossOrigin"):e.crossOrigin="anonymous"),i&&(e.className=i);var l=[this._state.getState().volume,this._config.volume].find(e=>void 0!==e);if(void 0!==l&&this._setVolume({volume:l}),a&&!this._canvasVideoRenderer&&(this._logger.verbose("Adding canvas as requested"),this._addCanvasVideoRenderer(),this._state.getState().isPlaying&&this._canvasVideoRenderer.startAnimationFrame()),!a&&this._canvasVideoRenderer){var c=this._state.getState().stream;this._logger.verbose("Removing canvas renderer"),c&&this._eventBus.publish(si.UPDATE_MEDIA_STREAM,c),this._destroyCanvasRenderer()}var d=this.getCanvasElement();d&&(e.className="",o&&(d.className=o)),s&&this.renderVideoInto(s)}}else this._logger.verbose("No video element known, could not apply config")}destroy(){if(this._logger.info("Destroying"),this._destroyCanvasRenderer(),this._isLocalVideo){this._logger.debug("Removing video element and container from document in destroy");var{videoElement:e,ownContainer:t}=this.getElements();po(e),po(t)}}createVideoElement(){var e,t;this._logger.info("Creating video element"),this._config.videoElement?(this._logger.debug("External video element passed from config - using existing one",this._config.videoElement),this._isLocalVideo=!1,e=this._config.videoElement):(this._isLocalVideo=!0,e=document.createElement("video"),t=document.createElement("div"),this._logger.debug("No external video element provided in config - created the new one",{videoElement:e,ownContainer:t}),t.style.position="relative"),this.setVideoElement(e,t),this._eventBus.publish(si.VIDEO_ELEMENT_RECREATED,{videoElement:this.getVideoElement()})}_addCanvasVideoRenderer(){this._logger.debug("Adding canvas renderer"),this._canvasVideoRenderer||(this._canvasVideoRenderer=new vo({videoElement:this.getVideoElement(),className:this._config.videoElementClassName,state:this._state,eventBus:this._eventBus}))}_destroyCanvasRenderer(){this._logger.debug("Destroying canvas renderer"),this._canvasVideoRenderer&&(this._canvasVideoRenderer.destroy(),this._canvasVideoRenderer=null)}_setVolume(e){var{volume:t}=e,r=this.getVideoElement();r&&(((e,t)=>{if(!t||t<0)e.muted=!0,e.volume=0;else{var r=Math.min(t,1);isNaN(r)||(e.muted=!1,e.volume=r)}})(r,t),this._logger.verbose("Video volume level has been set to ".concat(t)))}_destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}};Fi([Bi],mo.prototype,"getElements",null),Fi([Bi],mo.prototype,"getVideoElement",null),Fi([Bi],mo.prototype,"getCanvasElement",null),Fi([Bi],mo.prototype,"renderVideoInto",null),Fi([Bi],mo.prototype,"setVideoElement",null),Fi([Bi],mo.prototype,"applyConfigToVideoElement",null),Fi([Bi],mo.prototype,"createVideoElement",null),Fi([Bi],mo.prototype,"_addCanvasVideoRenderer",null),Fi([Bi],mo.prototype,"_destroyCanvasRenderer",null),Fi([Bi],mo.prototype,"_setVolume",null),Fi([Bi],mo.prototype,"_destroy",null);var _o=class{constructor(e){this._config={},this._eventsMap={[si.PLAYING]:this._handlePlaying,[si.LOADING]:this._handleLoading,[si.VIDEO_PAUSE]:this._handlePause,[si.CAN_PLAY]:this._handleCanPlay,[si.PAUSED]:this._handlePaused,[si.RESTART]:this._handleRestart,[si.UPDATED]:this._handleUpdate,[si.STALLED]:this._handleStalled,[si.WAITING]:this._handleWaiting,[si.UPDATE_PLAYER_RESOLUTION]:this._handleUpdatePlayerResolution,[si.ERROR]:this._handleError,[si.SET_VOLUME]:this._handleSetVolume,[si.DESTROY]:this.destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - StateController"),this._logger.info("Created"),this._logger.verbose("Initial state",e.state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e}destroy(){this._logger.info("Destroy"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap}),this._state.resetState(),this._state.setState({isDestroyed:!0})}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_updateState(e){var t=this._state.getState().videoPlaybackState,r=t;e.isPlaying?r=ni.PLAYING:e.isLoading?r=ni.LOADING:e.isPaused?r=ni.PAUSED:e.isError&&(r=ni.ERROR),this._logger.debug("State updated: ".concat(t," -> ").concat(r)),this._state.setState(Fn(Fn({},e),{},{videoPlaybackState:r})),t!==r&&this._eventBus.publish(si.VIDEO_PLAYBACK_STATE_CHANGED,{prevState:t,nextState:r})}_handlePlaying(){this._logger.debug("Playing event received"),this._updateState({isPlaying:!0,startedPlaying:!0,isLoading:!1,isStalled:!1,isWaiting:!1,isPaused:!1,isError:!1})}_handleLoading(){this._logger.debug("Loading event received"),this._updateState({isLoading:!0,isPlaying:!1})}_handlePause(){this._logger.debug("Pause event received"),this._updateState({isPlaying:!1,isPaused:!0})}_handlePaused(){this._logger.debug("Paused event received"),this._updateState({isPlaying:!1,isLoading:!1,isPaused:!0})}_handleCanPlay(){this._logger.debug("CanPlay event received"),this._updateState({canPlay:!0,isDestroyed:!1})}_handleRestart(){this._logger.debug("Restart event received"),this._updateState({isRestarted:!0})}_handleStalled(){this._logger.debug("Stalled event received"),this._updateState({isStalled:!0})}_handleWaiting(){this._logger.debug("Waiting event received"),this._updateState({isWaiting:!0})}_handleError(){this._logger.debug("Error event received"),this._updateState({isError:!0})}_handleSetVolume(e){var{volume:t}=e;this._logger.debug("Volume event received",{volume:t}),this._updateState({volume:t})}_handleUpdatePlayerResolution(e){this._logger.debug("Player resolution event received",{height:e.height,width:e.width}),this._updateState({videoElementResolution:{height:e.height,width:e.width}})}_handleUpdate(){this._logger.debug("Update event received"),this._updateState({canPlay:!1,isLoading:!0,isPlaying:!1,isRestarted:!1,isPaused:!1,isError:!1})}};Fi([Bi],_o.prototype,"destroy",null),Fi([Bi],_o.prototype,"init",null),Fi([Bi],_o.prototype,"_updateState",null),Fi([Bi],_o.prototype,"_handlePlaying",null),Fi([Bi],_o.prototype,"_handleLoading",null),Fi([Bi],_o.prototype,"_handlePause",null),Fi([Bi],_o.prototype,"_handlePaused",null),Fi([Bi],_o.prototype,"_handleCanPlay",null),Fi([Bi],_o.prototype,"_handleRestart",null),Fi([Bi],_o.prototype,"_handleStalled",null),Fi([Bi],_o.prototype,"_handleWaiting",null),Fi([Bi],_o.prototype,"_handleError",null),Fi([Bi],_o.prototype,"_handleSetVolume",null),Fi([Bi],_o.prototype,"_handleUpdatePlayerResolution",null),Fi([Bi],_o.prototype,"_handleUpdate",null);var yo=class{constructor(e){this._config={},this._eventsMap={[si.PLAYING]:this._cancelResetStream,[si.LOADING]:this._cancelResetStream,[si.LOADED]:this._cancelResetStream,[si.PAUSED]:this._cancelResetStream,[si.UPDATED]:this._cancelResetStream,[si.CANCEL_RESET_STREAM]:this._cancelResetStream,[si.STREAM_RESET]:this._resetStream,[si.UPDATE_MEDIA_STREAM]:this.updateMediaStream,[si.DESTROY]:this.destroy},this._getIsSrcObjectAvailable=()=>{var e;return void 0!==(null===(e=this._props.getVideoElement())||void 0===e?void 0:e.srcObject)},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - StreamController"),this._props=e,this._logger.info("Created"),this._logger.verbose("Initial state",e.state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e}updateMediaStream(e){this._logger.info("Updating media stream",{stream:e}),this._props.getVideoElement()?(this._attachStream(e),this._eventBus.publish(si.VIDEO_START,{})):this._logger.debug("No video element known. Skipping media stream update")}removeMediaStream(){this._logger.info("Removing media stream");var e=this._props.getVideoElement();e?(this._eventBus.publish(si.VIDEO_PAUSE,{}),this._eventBus.publish(si.REMOVE_MEDIA_STREAM,{}),this._getIsSrcObjectAvailable()?(this._logger.debug("Setting srcObject to null"),e.srcObject=null):(this._logger.debug("Revoking object url",{url:e.src}),window.URL.revokeObjectURL(e.src)),e.src&&(this._logger.debug("Removing src attribute from video"),e.removeAttribute("src"))):this._logger.debug("No video element known. Skipping media stream remove")}destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_attachStream(e){this._logger.info("Attaching media stream",{stream:e});var t=this._props.getVideoElement();t&&e?t.src!==e?"string"==typeof e?(this._logger.debug("Setting video element src attribute"),t.src=e):this._getIsSrcObjectAvailable()?(this._logger.debug("Setting video element srcObject attribute"),t.srcObject=e):(t.src=window.URL.createObjectURL(e),this._logger.debug("Got MediaStream as stream, but srcObject is not available. Created new object URL: ".concat(t.src))):this._logger.debug("Current video element src attribute value is equal to the new stream. Skipping stream set"):this._logger.debug("No video element or stream defined. Skipping stream set")}_cancelResetStream(){this._logger.debug("Stream reset action cancel required"),this._streamResetDelayId&&(clearTimeout(this._streamResetDelayId),this._logger.debug("Stream reset action cancelled"))}_resetStream(e){var{timeout:t}=e;this._logger.debug("Reset stream required"),t?(this._cancelResetStream(),this._streamResetDelayId=setTimeout(()=>{this._logger.debug("Resetting stream timeout fired");var e=!1;this._config.onResetStream&&(e=this._config.onResetStream());var t=this._state.getState().stream;if(t&&!e){if("string"==typeof t&&t.startsWith("blob"))return void this._logger.debug("Streams seems to be object url. Skipping reset");this._logger.debug("Resetting stream"),this.removeMediaStream(),this.updateMediaStream(t)}},t)):this._logger.verbose("No timeout set, skipping stream reset",{timeout:t})}};Fi([Bi],yo.prototype,"updateMediaStream",null),Fi([Bi],yo.prototype,"removeMediaStream",null),Fi([Bi],yo.prototype,"destroy",null),Fi([Bi],yo.prototype,"init",null),Fi([Bi],yo.prototype,"_attachStream",null),Fi([Bi],yo.prototype,"_cancelResetStream",null),Fi([Bi],yo.prototype,"_resetStream",null);var bo=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Eo="object"==typeof hi&&hi&&hi.Object===Object&&hi,Oo="object"==typeof self&&self&&self.Object===Object&&self,So=Eo||Oo||Function("return this")(),wo=function(){return So.Date.now()},To=/\s/,Mo=/^\s+/,Lo=So.Symbol,Ao=Object.prototype,Po=Ao.hasOwnProperty,jo=Ao.toString,Do=Lo?Lo.toStringTag:void 0,Ro=Object.prototype.toString,No=Lo?Lo.toStringTag:void 0,Io=/^[-+]0x[0-9a-f]+$/i,Co=/^0b[01]+$/i,ko=/^0o[0-7]+$/i,xo=parseInt,Bo=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||null!=t&&"object"==typeof t&&"[object Symbol]"==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":No&&No in Object(e)?function(e){var t=Po.call(e,Do),r=e[Do];try{e[Do]=void 0;var n=!0}catch(e){}var i=jo.call(e);return n&&(t?e[Do]=r:delete e[Do]),i}(e):Ro.call(e)}(t))return NaN;var t;if(bo(e)){var r,n="function"==typeof e.valueOf?e.valueOf():e;e=bo(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(r=e)?r.slice(0,function(e){for(var t=e.length;t--&&To.test(e.charAt(t)););return t}(r)+1).replace(Mo,""):r;var i=Co.test(e);return i||ko.test(e)?xo(e.slice(2),i?2:8):Io.test(e)?NaN:+e},Fo=Math.max,Uo=Math.min,zo=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return bo(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),function(e,t,r){var n,i,o,a,s,u,l=0,c=!1,d=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function h(t){var r=n,o=i;return n=i=void 0,l=t,a=e.apply(o,r)}function p(e){var r=e-u;return void 0===u||r>=t||r<0||d&&e-l>=o}function g(){var e,r=wo();if(p(r))return v(r);s=setTimeout(g,(e=t-(r-u),d?Uo(e,o-(r-l)):e))}function v(e){return s=void 0,f&&n?h(e):(n=i=void 0,a)}function m(){var e,r=wo(),o=p(r);if(n=arguments,i=this,u=r,o){if(void 0===s)return l=e=u,s=setTimeout(g,t),c?h(e):a;if(d)return clearTimeout(s),s=setTimeout(g,t),h(u)}return void 0===s&&(s=setTimeout(g,t)),a}return t=Bo(t)||0,bo(r)&&(c=!!r.leading,o=(d="maxWait"in r)?Fo(Bo(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=u=i=s=void 0},m.flush=function(){return void 0===s?a:v(wo())},m}(e,t,{leading:n,maxWait:t,trailing:i})},Vo="ristrettoWasRestarted",qo=0,Wo=0,Yo=class{constructor(e){this._shouldSetNextUpdateVideoDurationId=!0,this._config={},this._onNativeTimeUpdateHandlerThrottled=zo(this._onNativeTimeUpdateHandler,2e3,{trailing:!1}),this._eventsMap={[si.TIME_UPDATE_NATIVE]:this._onNativeTimeUpdateHandlerThrottled,[si.DESTROY]:this._destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - TimeUpdateController"),this._props=e,this._logger.info("Created"),this._logger.debug("Initial state",e.state),this._logger.debug("Initial props",e)}setConfig(e){this._logger.debug("Config update received, the new one:",e);var t=e.timeoutUpdateStatusPlaying!==this._config.timeoutUpdateStatusPlaying;this._config=e,t&&(this._eventsMap[si.TIME_UPDATE_NATIVE]=zo(this._onNativeTimeUpdateHandler,e.timeoutUpdateStatusPlaying,{trailing:!1}),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap}),this.init())}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}startTimeUpdate(){this._stopTimeUpdate(),this._shouldSetNextUpdateVideoDurationId&&this._config?(this._updateVideoDurationId=setTimeout(this._onTimeUpdate,this._config.timeoutUpdateVideoDuration),this._publishUpdatePlayerResolutionIfNeeded()):this._shouldSetNextUpdateVideoDurationId=!0}_onNativeTimeUpdateHandler(e){var t,r;if(this._logger.debug("Native video timeUpdate caught"),null==e||null===(t=e.originalEvent)||void 0===t||!t.defaultPrevented){var n=this._props.getVideoElement(),{canPlay:i,isPlaying:o,isLoading:a,isRestarted:s}=this._state.getState();if(this._publishUpdatePlayerResolutionIfNeeded(),i){this._eventBus.publish(si.RESET_CHECKING_AUTOPLAY_COUNT,{});var u=qo!==(null==n?void 0:n.currentTime);this._logger.verbose("Video current time is ".concat(u?"":"not"," changed")),u?(this._eventBus.publish(si.CANCEL_RESET_STREAM,{}),!oo||s||null!==(r=localStorage)&&void 0!==r&&r.getItem(Vo)||(localStorage.setItem(Vo,"1"),this._eventBus.publish(si.RESTART,{})),n&&(qo=n.currentTime),(!o||a)&&this._eventBus.publish(si.PLAYING,{})):a?this._eventBus.publish(si.VIDEO_RESET,{}):this._eventBus.publish(si.LOADING,{})}else this._logger.verbose("CanPlay shared state is false. Skipping")}}_stopTimeUpdate(){clearTimeout(this._updateVideoDurationId)}_onTimeUpdate(){if(this._state.getState().canPlay){var e=this._props.getVideoElement();e&&Wo!==e.currentTime&&(Wo=e.currentTime),this.startTimeUpdate()}else this.startTimeUpdate()}_publishUpdatePlayerResolutionIfNeeded(){var e=this._props.getVideoElement();if(e){var{videoWidth:t,videoHeight:r}=e,{videoElementResolution:n}=this._state.getState();(!n||n.height!==r||n.width!==t)&&this._config.minimalPossibleVideoDimension&&Math.min(r,t)>this._config.minimalPossibleVideoDimension&&(this._logger.verbose("Stored resolution is ".concat(null==n?void 0:n.width,"x").concat(null==n?void 0:n.height,", current is ").concat(t,"x").concat(r)),this._eventBus.publish(si.UPDATE_PLAYER_RESOLUTION,{width:t,height:r}))}}_destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap}),this._shouldSetNextUpdateVideoDurationId=!1,this._stopTimeUpdate()}};Fi([Bi],Yo.prototype,"init",null),Fi([Bi],Yo.prototype,"startTimeUpdate",null),Fi([Bi],Yo.prototype,"_onNativeTimeUpdateHandler",null),Fi([Bi],Yo.prototype,"_stopTimeUpdate",null),Fi([Bi],Yo.prototype,"_onTimeUpdate",null),Fi([Bi],Yo.prototype,"_publishUpdatePlayerResolutionIfNeeded",null),Fi([Bi],Yo.prototype,"_destroy",null);var Go=class{constructor(e){this._config={},this._timeUpdateEventWasLogged=!1,this._eventsMap={[si.VIDEO_ELEMENT_RECREATED]:this._handleVideoElementRecreated,[si.DESTROY]:this._handleDestroy},this._onVideoClick=e=>{this._logger.verbose('"click" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(si.CLICK,{originalEvent:e})},this._onSeeked=e=>{this._logger.verbose('"seeked" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(si.FORCE_PLAY_AFTER_PAUSE,{reason:"seeked video native event"})},this._onRateChange=e=>{this._logger.verbose('"ratechange" video native event fired'),this._handleNativeEvent(e),e.target&&!e.target.playbackRate&&this._eventBus.publish(si.FORCE_PLAY_AFTER_PAUSE,{reason:"video playbackRate is 0"})},this._onCanPlayThrough=e=>{this._logger.verbose('"canplaythrough" video native event fired');var t=this._state.getState();this._handleNativeEvent(e),(t.isStalled||t.isWaiting)&&this._eventBus.publish(si.FORCE_PLAY_AFTER_PAUSE,{reason:"canplaythrough video native event fired, and video is in the state of either stalled or waiting"})},this._onPlayingHandler=e=>{this._logger.verbose('"playing" video native event fired'),this._logger.info("Video has started playing"),this._handleNativeEvent(e),this._eventBus.publish(si.PLAYING,{isAutoplay:!this._state.getState().isAutoplayError})},this._onAbortHandler=e=>{this._logger.verbose('"abort" video native event fired'),this._handleNativeEvent(e),e.defaultPrevented||this._eventBus.publish(si.LOADING,{})},this._onPauseHandler=e=>{this._logger.verbose('"pause" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(si.VIDEO_PAUSE,{}),this._eventBus.publish(si.FORCE_PLAY_AFTER_PAUSE,{reason:"pause video event fired (most likely user paused the video manually)"})},this._onCanPlayHandler=e=>{this._logger.verbose('"canplay" video native event fired'),this._handleNativeEvent(e),e.defaultPrevented||(this._state.setState({canPlay:!0}),this._eventBus.publish(si.CAN_PLAY,{}))},this._onErrorHandler=e=>{if(this._logger.error('"error" video native event fired',{error:e}),this._handleNativeEvent(e),this._eventBus.publish(si.ERROR,{originalEvent:e}),!e.defaultPrevented){var t,{MEDIA_ERR_SRC_NOT_SUPPORTED:r}=MediaError,n=null===(t=this._props.getVideoElement())||void 0===t?void 0:t.error;(null==n?void 0:n.code)!==r&&(this._logger.verbose("Video element error is not of MEDIA_ERR_SRC_NOT_SUPPORTED kind. Requesting reset"),this._eventBus.publish(si.VIDEO_RESET,{}))}},this._onTimeUpdateHandler=e=>{this._handleNativeEvent(e),this._timeUpdateEventWasLogged||(this._logger.verbose('"timeupdate" video native event fired for the first time'),this._timeUpdateEventWasLogged=!0),this._eventBus.publishSync(si.TIME_UPDATE_NATIVE,{originalEvent:e})},this._onLoadStartHandler=e=>{this._handleNativeEvent(e),this._logger.verbose('"loadstart" video native event fired');var{timeoutUpdateStream:t}=this._config;this._eventBus.publish(si.LOADING,{}),this._eventBus.publish(si.STREAM_RESET,{reason:"onLoadStartHandler",timeout:t})},this._onLoadedDataHandler=e=>{this._logger.verbose('"loadeddata" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(si.LOADED,{})},this._onWaiting=e=>{this._logger.verbose('"waiting" video native event fired');var{timeoutWaitingStream:t}=this._config;this._handleNativeEvent(e),this._eventBus.publish(si.WAITING,{}),this._eventBus.publish(si.LOADING,{}),this._eventBus.publish(si.STREAM_RESET,{reason:"onWaiting",timeout:t})},this._onStalled=e=>{this._logger.verbose('"stalled" video native event fired');var{timeoutWaitingStream:t}=this._config;this._handleNativeEvent(e),this._eventBus.publish(si.STALLED,{}),this._eventBus.publish(si.STREAM_RESET,{reason:"onStalled",timeout:t})},this._onEndFullscreenHandler=e=>{this._handleNativeEvent(e)},this._props=e,this._state=e.state,this._eventBus=e.eventBus,this._logger=zi(this._eventBus,"VideoElementController - VideoEventsHandler"),this.init()}setConfig(e){this._config=e}init(){this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}toggleEvents(e){var t=this._props.getVideoElement();if(t){var r="attach"===e?"addEventListener":"removeEventListener";t[r]("click",this._onVideoClick),t[r]("playing",this._onPlayingHandler),t[r]("abort",this._onAbortHandler),t[r]("pause",this._onPauseHandler),t[r]("canplay",this._onCanPlayHandler),t[r]("error",this._onErrorHandler),t[r]("timeupdate",this._onTimeUpdateHandler),t[r]("loadstart",this._onLoadStartHandler),t[r]("loadeddata",this._onLoadedDataHandler),t[r]("waiting",this._onWaiting),t[r]("stalled",this._onStalled),t[r]("canplaythrough",this._onCanPlayThrough),t[r]("seeked",this._onSeeked),t[r]("ratechange",this._onRateChange),t[r]("webkitendfullscreen",this._onEndFullscreenHandler),"addEventListener"===r?this._logger.verbose("event listeners are ATTACHED to the video element"):this._logger.verbose("event listeners are DETACHED from the video element")}}_handleVideoElementRecreated(){this.toggleEvents("attach")}_handleDestroy(){this.toggleEvents("detach"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}_handleNativeEvent(e){this._eventBus.publishSync(si.NATIVE_EVENT,{eventName:e.type,event:e})}};Fi([Bi],Go.prototype,"init",null),Fi([Bi],Go.prototype,"_handleVideoElementRecreated",null),Fi([Bi],Go.prototype,"_handleDestroy",null);var Ho,Qo={canPlay:!1,isLoading:!0,isError:!1,isAutoplayError:!1,isPaused:!1,isPlaying:!1,isRestarted:!1,isStalled:!1,isWaiting:!1,isDestroyed:!1,videoPlaybackState:ni.IDLE,startedPlaying:!1},Ko=class{constructor(e){this._initState=Fn({},e),this._state=Fn({},e)}setState(e,t){Object.assign(this._state,e),t&&t(this._state)}getState(){return this._state}resetState(){this.setState(this._initState)}},Xo=class{constructor(){this._config=Fn({},Hi.videoElementControllerConfig),this.attachVideoElementEvents=()=>{this._logger.debug("Attach event listeners"),this._eventsHandler.toggleEvents("attach"),this._timeUpdateController.startTimeUpdate()},this.detachVideoElementEvents=()=>{this._logger.debug("Detach event listeners"),this._eventsHandler.toggleEvents("detach")},this._updated=()=>{this._eventBus.publish(si.UPDATED,{})},this._eventBus=new Si,this._loggerTransport=new Yi(this._eventBus),this._logger=zi(this._eventBus,"VideoController"),this._logger.info("Created"),this._logger.debug("Initial config",this._config),this._createControllers()}addEventListener(e,t){this._logger.verbose("Attaching ".concat(e," event listener")),this._customEventsEmitter.addEventListener(e,t)}removeEventListener(e,t){this._logger.verbose("Detaching ".concat(e," event listener")),this._customEventsEmitter.removeEventListener(e,t)}getIsPlaying(){return this._state.getState().isPlaying}getVideoElement(){return this._state.getState().videoElement}getCanvasElement(){return this._state.getState().canvasElement}updateConfig(e){this._config=Fn(Fn({},this._config),e),this._logger.debug("Config update received, the new one: ",this._config),e.isRemote&&this.attachVideoElementEvents(),this._syncConfig()}setVideoElement(e){this._logger.info("Video element set",e),this._renderController.setVideoElement(e),this.attachVideoElementEvents()}createVideoElement(){return this._logger.info("Creating video element"),this._renderController.createVideoElement(),this.getVideoElement()}setStream(e){if(this._logger.info("Setting media stream"),this._state.getState().stream!==e)return e?this._streamController.updateMediaStream(e):this._streamController.removeMediaStream(),this._updated(),this._state.setState({stream:e}),this;this._logger.verbose("Previous stream is equal to the new one. Skipping.")}renderVideoInto(e){this._logger.info("Rendering video element into container",e),this._renderController.renderVideoInto(e)}setVolume(e){this._logger.info("Setting volume of the video element",{volume:e}),this._eventBus.publish(si.SET_VOLUME,{volume:e})}getState(){return this._state.getState()}destroy(){var e;this._logger.info("Destroying"),this._config=Fn({},Hi.videoElementControllerConfig),this.detachVideoElementEvents(),this._streamController.removeMediaStream(),this._renderController.destroy(),this._eventBus.publishSync(si.DESTROY,{}),this._logger.info("VideoElementController was destroyed"),null===(e=this._loggerTransport)||void 0===e||e.destroy()}reinit(){this._logger.info("Reinit requested"),[this._autoplayController,this._customEventsEmitter,this._playbackController,this._streamController,this._stateController,this._timeUpdateController,this._renderController,this._eventsHandler].forEach(e=>{e&&e.init()}),this.attachVideoElementEvents(),this._logger.info("VideoElementController was reinited")}setLoggerLevels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this._logger.info("Setting new log level",{levels:e}),this._loggerTransport&&(this._loggerTransport.destroy(),this._loggerTransport=null),e.length&&(this._loggerTransport=new Yi(this._eventBus,e,t,r))}_syncConfig(){var e;this._logger.verbose("Sycronizing configs across all controllers"),null!==(e=this._autoplayController)&&void 0!==e&&e.setConfig(this._config),this._eventsHandler.setConfig(this._config),this._streamController.setConfig(this._config),this._timeUpdateController.setConfig(this._config),this._renderController.setConfig(this._config),this._stateController.setConfig(this._config)}_createControllers(){this._logger.verbose("Creating all controllers"),this._state=new Ko(Qo);var e={getVideoElement:this.getVideoElement,state:this._state,eventBus:this._eventBus};this._autoplayController=new $i(e),this._customEventsEmitter=new to(e),this._eventsHandler=new Go(e),this._playbackController=new ho(e),this._streamController=new yo(e),this._stateController=new _o(e),this._timeUpdateController=new Yo(e),this._renderController=new mo(e),this._logger.verbose("Controllers created")}};Fi([Bi],Xo.prototype,"addEventListener",null),Fi([Bi],Xo.prototype,"removeEventListener",null),Fi([Bi],Xo.prototype,"getIsPlaying",null),Fi([Bi],Xo.prototype,"getVideoElement",null),Fi([Bi],Xo.prototype,"getCanvasElement",null),(Ho=ui||(ui={}))[Ho.FATAL=0]="FATAL",Ho[Ho.ERROR=1]="ERROR",Ho[Ho.WARN=2]="WARN",Ho[Ho.INFO=3]="INFO",Ho[Ho.DEBUG=4]="DEBUG",Ho[Ho.VERBOSE=5]="VERBOSE",ui.FATAL,ui.ERROR,ui.WARN,ui.INFO,ui.DEBUG,ui.VERBOSE;var Jo;ui.FATAL,ui.WARN,ui.ERROR,ui.INFO,ui.DEBUG,ui.VERBOSE;(Jo=li||(li={}))[Jo.MEDIA_DEVICES_UPDATED=0]="MEDIA_DEVICES_UPDATED";var $o;($o=ci||(ci={})).VIDEO_INPUT="videoinput",$o.AUDIO_INPUT="audioinput",$o.AUDIO_OUTPUT="audiooutput";var Zo,ea=(e,t)=>e.filter(e=>e.kind===t);(Zo=di||(di={})).SYSTEM_PERMISSION_DENIED="SystemPermissionDenied",Zo.USER_PERMISSION_DENIED="UserPermissionDenied",Zo.COULD_NOT_START_VIDEO_SOURCE="CouldNotStartVideoSource",Zo.GENERIC="Generic";var ta,ra=function(){var e=xn(function*(e){return new Promise((t,r)=>{navigator.mediaDevices.getUserMedia(null!=e?e:{audio:!0,video:!0}).then(e=>{e.getTracks().forEach(e=>{e.stop()}),t(!0)}).catch(e=>{var t=e.name,n=e.message,i=di.GENERIC;uo?"NotAllowedError"===t?"Permission denied by system"===n?i=di.SYSTEM_PERMISSION_DENIED:"Permission denied"===n&&(i=di.USER_PERMISSION_DENIED):"NotReadableError"===t&&(i=di.COULD_NOT_START_VIDEO_SOURCE):so?"NotAllowedError"===t&&(i=di.USER_PERMISSION_DENIED):lo?"NotAllowedError"===t?i=di.USER_PERMISSION_DENIED:"NotReadableError"===t&&(i=di.COULD_NOT_START_VIDEO_SOURCE):ao&&("NotFoundError"===t||"NotReadableError"===t?i=di.SYSTEM_PERMISSION_DENIED:"NotAllowedError"===t?i=di.USER_PERMISSION_DENIED:"AbortError"===t&&(i=di.COULD_NOT_START_VIDEO_SOURCE)),r({type:i,name:e.name,message:e.message})})})});return function(t){return e.apply(this,arguments)}}();(ta=fi||(fi={})).LIVE="live",ta.ENDED="ended";var na=e=>{if(!e)return!0;var{muted:t,enabled:r,readyState:n}=e;return t||!r||n===fi.ENDED};Fi([Bi],class extends eo{constructor(){super(),this._currentMediaStream=null,this._mediaCheckCache=null,this._mediaDevices=null,this._eventBus=new Si,this._logger=zi(this._eventBus,"UserMedia"),this._loggerTransport=new Yi(this._eventBus),this._logger.info("Created"),navigator.mediaDevices.addEventListener("devicechange",this._onDevicesChanged)}destroy(){navigator.mediaDevices.removeEventListener("devicechange",this._onDevicesChanged),this._logger.info("Destroyed"),this._stopCurrentStream()}requestPermissions(){var e=this;return xn(function*(){if(e._logger.info("Requesting permissions"),e._mediaCheckCache)return e._logger.debug("Has previous check results cached. Returning it"),e._logger.info("Check results",Fn({},e._mediaCheckCache)),e._mediaCheckCache;try{return e._logger.verbose("Request both video and audio permissions"),yield ra({video:!0,audio:!0}),e._logger.debug("No exceptions thrown while checking permissions. Saving both as available in cache"),e._mediaCheckCache={video:{isAvailable:!0,error:null},audio:{isAvailable:!0,error:null}},e._logger.info("Check results",Fn({},e._mediaCheckCache)),e._mediaCheckCache}catch(Ev){e._logger.debug("Got an exception while checking both audio and video permissions. Checking them individually",{exception:Ev.toString()});var t={video:{isAvailable:!1,error:null},audio:{isAvailable:!1,error:null}};return t.video=yield e._checkKindPermissions({video:!0,audio:!1}),e._logger.verbose("Video permissions result: ".concat(t.video.isAvailable)),t.audio=yield e._checkKindPermissions({video:!1,audio:!0}),e._logger.verbose("Audio permissions result: ".concat(t.audio.isAvailable)),e._mediaCheckCache=t,e._logger.debug("Got individual check results",Fn({},t)),e._logger.info("Check results",Fn({},e._mediaCheckCache)),e._mediaCheckCache}})()}getVideoDevices(){var e=this;return xn(function*(){e._logger.info("Getting video devices list");var t=yield e._getMediaDevices();return e._logger.info("Got video devices",t),t.videoInputs})()}getAudioInputDevices(){var e=this;return xn(function*(){e._logger.info("Getting audio input devices list");var t=yield e._getMediaDevices();return e._logger.info("Got audio input devices",t),t.audioInputs})()}getAudioOutputDevices(){var e=this;return xn(function*(){e._logger.info("Getting audio output devices list");var t=yield e._getMediaDevices();return e._logger.info("Got audio output devices",t),t.audioOutputs})()}getMediaStream(e,t){var r=this;return xn(function*(){r._logger.info("Getting media stream",{constraints:e,defaults:t});var n={};if(e.audio&&(r._logger.debug("Audio constraints are specified in requested constraints. Mapping it"),n.audio=(e=>!!e&&("boolean"==typeof e?e:!!e.deviceId&&{deviceId:so?e.deviceId:{exact:e.deviceId},channelCount:2}))(e.audio),r._logger.debug("Audio constraints mapped",{constraints:n.audio})),e.video&&(r._logger.debug("Video constraints are specified in requested constraints. Mapping it"),n.video=((e,t)=>{if(!e)return!1;if("boolean"==typeof e)return!0;var r=e.width&&e.height?Number(e.width)/Number(e.height):t.baseAspectRatio,n={};return e.frameRate&&(n.frameRate={ideal:e.frameRate,min:15}),e.facingMode&&navigator.mediaDevices.getSupportedConstraints().facingMode&&(n.facingMode={exact:e.facingMode}),e.width&&(n.width={ideal:e.width}),e.height&&(n.height={ideal:e.height}),e.width&&e.height&&r&&(n.aspectRatio=r),e.deviceId&&(n.deviceId=so?e.deviceId:{exact:e.deviceId}),e.width&&e.height&&!n.facingMode&&(n.advanced=[{width:{min:e.width-t.sizeThreshold,max:e.width+t.sizeThreshold},height:{min:e.height-t.sizeThreshold,max:e.height+t.sizeThreshold}},{aspectRatio:r}]),0!==Object.keys(n).length&&n})(e.video,t),r._logger.debug("Video constraints mapped",{constraints:n.video})),r._logger.info("Final constraints for media stream",{mappedConstraints:n}),!r._currentMediaStream){r._logger.debug("No current media stream known. Creating new stream");var i=yield r._createNewStream(n);return r._logger.info("Media stream is ready",{mediaStream:i}),i}var o,a=!(!(o=r._currentMediaStream.stream).active||o.getTracks().every(na));if(a&&(yield r._isCurrentStreamSatisfiesConstraints(n)))return r._logger.debug("Current stream is active and satisfies constraints. Returning cached one"),r._logger.info("Media stream is ready",{mediaStream:r._currentMediaStream.stream}),r._currentMediaStream.stream;r._logger.debug("Current stream ".concat(a?"does not satisfies constraints":"is inactive",". Creating new stream")),yield r._stopCurrentStream();var s=yield r._createNewStream(n);return r._logger.info("Media stream is ready",{mediaStream:s}),s})()}_stopCurrentStream(){var e=this;return xn(function*(){var t;e._logger.debug("Stopping current media stream"),e._currentMediaStream?(yield(t=e._currentMediaStream.stream,void(t&&(t.getTracks().forEach(e=>{e.stop(),t.removeTrack(e)}),t.stop&&t.stop()))),e._currentMediaStream=null):e._logger.verbose("No current stream known. Skipping")})()}_checkKindPermissions(e){var t=this;return xn(function*(){t._logger.debug("Checking kind permissions",{constraints:e});var r={isAvailable:!1,error:null};try{t._logger.verbose("Requesting media permissions for constraints",{constraints:e}),r.isAvailable=yield ra(e),t._logger.verbose("Successfully got permissions for constraints",{constraints:e})}catch(Vn){t._logger.verbose("Could not get permissions for constraints",{constraints:e,error:Vn}),r.isAvailable=!1,r.error=Vn}return t._logger.debug("Final result of permissions check",{constraints:e,checkResults:r}),r})()}_getMediaStream(e){var t=this;return xn(function*(){t._logger.debug("Getting media stream with constraints",{constraints:e});var r=(()=>{var e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)||navigator.getUserMedia&&Ci(navigator.getUserMedia.bind(navigator))||navigator.webkitGetUserMedia&&Ci(navigator.webkitGetUserMedia.bind(navigator))||navigator.mozGetUserMedia&&Ci(navigator.mozGetUserMedia.bind(navigator));return t=>e.call(navigator,t)})(),n=yield r(e);return t._currentMediaStream={constraints:e,stream:n},t._logger.debug("Resulting media stream",{mediaStream:t._currentMediaStream.stream}),t._currentMediaStream.stream})()}_createNewStream(e){var t=this;return xn(function*(){t._logger.debug("Creating new media stream with constraints",{constraints:e});try{return yield t._getMediaStream(e)}catch(zn){if(t._logger.warn("Got an error while creating new media stream",{error:zn,constraints:e}),"OverconstrainedError"===zn.name&&"deviceId"===zn.constraint){t._logger.verbose("Trying to get stream with no audio deviceId specified");var r=Fn(Fn({},e),{},{audio:!0});return yield t._getMediaStream(r)}throw zn}})()}_getMediaDevices(){var e=this;return xn(function*(){return e._logger.verbose("Getting media devices"),e._mediaDevices?(e._logger.verbose("Has media devices in cache, returning them",{devices:e._mediaDevices}),e._mediaDevices):(e._mediaDevices=yield xn(function*(){var e=yield navigator.mediaDevices.enumerateDevices();return{audioInputs:ea(e,ci.AUDIO_INPUT),audioOutputs:ea(e,ci.AUDIO_OUTPUT),videoInputs:ea(e,ci.VIDEO_INPUT)}})(),e._mediaDevices)})()}_isCurrentStreamSatisfiesConstraints(e){var t=this;return xn(function*(){if(t._logger.debug("Checking if current media stream satisfies constraints",{constraints:e,mediaStream:t._currentMediaStream}),!t._currentMediaStream)return t._logger.verbose("No current media stream available"),!1;try{if(e.video){t._logger.verbose("Checking video track constraints");var r=t._currentMediaStream.stream.getVideoTracks()[0];if(!r&&e.video)return t._logger.verbose("No video track in media stream and constraints has video"),!1;if(r&&!e.video)return t._logger.verbose("There is video track in media stream and constraints has no video"),!1;if("object"==typeof e.video&&e.video.deviceId&&r.getCapabilities().deviceId!==e.video.deviceId)return t._logger.verbose("Constraints has video device ID and it not matches current device id"),!1;r&&"boolean"!=typeof e.video&&(t._logger.verbose("Trying to apply new constraints for video"),yield r.applyConstraints(e.video))}}catch(e){return t._logger.debug("Could not apply constraints or get capabilities of video track",{error:e}),!1}try{if(e.audio){t._logger.verbose("Checking audio track constraints");var n=t._currentMediaStream.stream.getAudioTracks()[0];if(!n&&e.audio)return t._logger.verbose("No audio track in media stream and constraints has audio"),!1;if(n&&!e.audio)return t._logger.verbose("There is audio track in media stream and constraints has no audio"),!1;if("object"==typeof e.audio&&e.audio.deviceId&&n.getCapabilities().deviceId!==e.audio.deviceId)return t._logger.verbose("Constraints has audio device ID and it not matches current device id"),!1;n&&"boolean"!=typeof e.audio&&(t._logger.verbose("Trying to apply new constraints for audio"),yield n.applyConstraints(e.audio))}}catch(e){return t._logger.debug("Could not apply constraints or get capabilities of audio track",{error:e}),!1}return!0})()}_onDevicesChanged(){var e=this;return xn(function*(){e._logger.debug("Media devices has changed"),e._mediaDevices=null;var t=yield e._getMediaDevices();e._mediaDevices=t,e.emitEvent(li.MEDIA_DEVICES_UPDATED,t)})()}}.prototype,"_onDevicesChanged",null);var ia,oa,aa=e=>{if(!e)return{};try{var t,r=new URL(e).pathname.split("/");return{streamId:r[2],resolution:(null===(t=r[r.length-1].match(/\d+_(\w+)/))||void 0===t?void 0:t[1])||"source",isMaster:"master"===r[3]}}catch(e){return{}}};(oa=ia||(ia={})).THROUGHPUT_ESTIMATOR="throughputEstimator",oa.DROPPED_FRAMES_ESTIMATOR="droppedFramesEstimator",oa.SWITCH_HISTORY="switchHistory",oa.INSUFFICIENT_BUFFER="insufficientBuffer",oa.MINIMAL_BUFFER_TO_INCREASE="minimalBufferToIncrease",oa.DELTA_BUFFER="deltaBuffer",oa.MAX_RESOLUTION_ESTIMATOR="maxResolution";var sa,ua,la={enabledABRRules:[ia.THROUGHPUT_ESTIMATOR,ia.SWITCH_HISTORY,ia.MINIMAL_BUFFER_TO_INCREASE,ia.INSUFFICIENT_BUFFER,ia.MAX_RESOLUTION_ESTIMATOR],cooldownPeriod:1e4,minimalBufferAmountToSwitchUp:500};ia.DROPPED_FRAMES_ESTIMATOR,ia.THROUGHPUT_ESTIMATOR,ia.SWITCH_HISTORY,ia.MINIMAL_BUFFER_TO_INCREASE,ia.INSUFFICIENT_BUFFER,ia.DELTA_BUFFER,ia.MAX_RESOLUTION_ESTIMATOR;Gn("8NFq9"),Hn=Gn("a8VW4"),(ua=sa||(sa={})).WAIT_FOR_PREFETCH_SEGMENT="waitForSegment",ua.WAIT_FOR_PLAYLIST="waitForPlaylist";var ca,da,fa={playlistLoader:{playlistLoadingTimeout:2500,forceStaticPlaylistLoadingTimeout:!1,lowLatencyMode:!0,equalPlaylistsAmountToDecline:10,blockingMode:sa.WAIT_FOR_PLAYLIST,maxVODPlaylistLoadingRetries:3,maxVODFragmentLoadingRetries:3,baseVODPlaylistRetryTimeout:500,baseVODFragmentRetryTimeout:5e3,VODLoadNextSegmentThreshold:5e3,disableTimeoutsInVOD:!0,retryLowLatencyPlaylistTimeout:1e3,targetBufferMultiplier:1,disableRotateTimeoutIncrease:!0,shouldLogFragmentsHistory:!1,workerMode:!0,partHoldBack:void 0,additionalStartParts:2,sendCustomRefererHeader:!1},fragmentLoader:{fragmentLoadingTimeout:2500,workerMode:!0},resolutionsManager:{autoloadLowestResolution:!0,initialResolutionWidth:0,initialResolutionHeight:720,initialResolutionBitrate:0,initialResolutionBitrateThreshold:1e5,maxPlaylistTimeDifference:4e4,awaitForSegmentEndToSwitch:!0,awaitForSegmentEndToSwitchManual:!1,recreateSourceBufferOnResolutionChange:!1,useFallbackResolutionIfResolutionNotFound:!0},bufferController:{checkMetricsInterval:150,bufferStallThreshold:.2,maxBackBufferAmount:1e4,bufferEdgeThreshold:.3,endOfRangeThreshold:.4,nudgePlaybackAmount:.1,numberOfCandidatesToDetectGap:2,numberOfFragmentToKeep:2,recreateSourceBufferOnResolutionChange:!1,saveLastSegmentsCount:3,sourceBufferStuckTimeout:1e3},throughputHistory:{ewmaFastAlpha:.9,ewmaSlowAlpha:.2,ignorePlaylistsMetrics:!0},abr:la,switchHistory:{banResolutionDuration:7e3},throughputEstimator:{optimalResolutionLowerBound:.65,optimalResolutionUpperBound:.88,amountOfFragmentToBecomeConfident:10},droppedFramesEstimator:{resetHistoryTimeout:3e5,optimalDroppedFramesFraction:.1,minimalFramesPlayed:200},fragmentParser:{workerMode:!1},debugger:{enableRemoteDebugging:!1,debuggerUrl:"wss://doppio-player-debug.stripcdn.com",maxWSConnectionRetries:3,modulesStateGatheringPeriod:1e3,enableLifecycleEvents:!0},insufficientBufferEstimator:{minimalBufferAmount:.1,ignoreMetricsBeforeBufferExceedsMinimal:!0,switchToMinimalResolution:!1},minimalBufferToIncreaseEstimator:{minimalBufferAmount:500},deltaBufferEstimator:{bufferDeltaFractionToDetectFall:.1,numberOfFallsToDetect:2},playbackStateController:{autoPlay:!1,syncToLiveEdge:!1,syncToLiveDelta:1,playingTimeFractionCollectionWindow:1e5,stallDurationToDisableTargetBufferDecrease:1e4},targetBufferIncreaser:{bufferAmountToIncrease:200,bufferAmountThreshold:300},targetBufferDecreaser:{periodOfEventsToCancelDecrease:1e4},originalTargetBufferDecreaser:{periodOfEventsToCancelDecrease:1e4,allowTargetBufferDecrease:!1,targetBufferDecreaseTimeout:1e4,maxTargetBufferMultiplier:4},playbackSpeedActuator:{maxPlaybackRate:1.05,minPlaybackRate:.9},playbackSpeedWatcher:{maxLiveSyncThreshold:.4,minLiveSyncThreshold:.3,maxTargetBufferMultiplier:3,targetBufferInitialMultiplier:1,targetBufferDecreaseCoefficient:.25},bufferStallsDetector:{bufferAmountToDetectStall:.1},fragmentsFilter:{reportInconsistentTracks:!0,filterOutInconsistentTracks:!1},fragmentBuffer:{numberOfFragmentsToKeepInBuffer:3,baseChunksSaverUrl:"chunks.doppiostreams.com",saveProbability:.05}},ha=(sa.WAIT_FOR_PLAYLIST,sa.WAIT_FOR_PREFETCH_SEGMENT,["error","fatal"]),{ConfigConsumer:pa,setConfig:ga}=xi(fa);class va extends pa{}(da=ca||(ca={})).OK="ok",da.ERROR="error";var ma={playlistType:{multivariantDetected:"basePlaylistRotator.playlistType.multivariantDetected",simpleDetected:"basePlaylistRotator.playlistType.simpleDetected",llDetected:"basePlaylistRotator.playlistType.llDetected",vodDetected:"basePlaylistRotator.playlistType.vodDetected"},playlists:{playlistRequested:"basePlaylistRotator.playlists.playlistRequested",playlistLoaded:"basePlaylistRotator.playlists.playlistLoaded",playlistLoadingError:"basePlaylistRotator.playlists.playlistLoadingError",playlistParsed:"basePlaylistRotator.playlists.playlistLoadingError",playlistInfo:"basePlaylistRotator.playlists.playlistInfo",vodFragmentsInfo:"basePlaylistRotator.playlists.VODFragmentsInfo",independenceTypeUpdate:"basePlaylistRotator.playlists.independenceTypeUpdate",renditionReportsUpdated:"basePlaylistRotator.playlists.renditionReportsUpdated",lastPlaylistOfSegmentLoaded:"basePlaylistRotator.playlists.lastPlaylistOfSegmentLoaded"},fragments:{fragmentsDetected:"basePlaylistRotator.fragments.fragmentsDetected",requestReleaseFromCache:"basePlaylistRotator.fragments.requestReleaseFromCache",periodFragmentsFound:"basePlaylistRotator.fragments.periodFragmentsFound"}},_a=Gn("eQOGK");class ya extends va{constructor(e){super("deltaBufferEstimator",e),Un(this,"status","Idle"),Un(this,"state",ca.OK),Un(this,"additionalInfo",{}),Un(this,"groups",["abr"]),Un(this,"_numberOfFalls",0),Un(this,"_lastKnownBufferAmount",0),Un(this,"_currentBufferAmount",0),this._onPlaylistParsedListener=this._eventBus.subscribe(ma.playlists.playlistInfo,this._onPlaylistParsed)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaylistParsedListener),this.reset()}reset(){this._numberOfFalls=0}getNextEstimatedResolution(e,t,r){return this._currentBufferAmount=r.bufferAmount,!t||this._numberOfFalls<this.config.numberOfFallsToDetect?null:e[Math.max(0,e.findIndex(e=>{var{name:r}=e;return r===t.name})-1)]}_handleConfigUpdated(){this._numberOfFalls=0}_onPlaylistParsed(){var{_currentBufferAmount:e,_lastKnownBufferAmount:t}=this;this._lastKnownBufferAmount=e,e>t&&(this._numberOfFalls=0);var r=t/e;r>1+this.config.bufferDeltaFractionToDetectFall&&this._numberOfFalls++,this.additionalInfo={numberOfFalls:this._numberOfFalls,bufferDelta:r}}}(0,Hn.__decorate)([_a.default],ya.prototype,"_onPlaylistParsed",null),Gn("8NFq9"),Hn=Gn("a8VW4"),Gn("8NFq9"),Hn=Gn("a8VW4");var ba="buffer.requestResetWithOverplay",Ea="buffer.metricsAvaialable",Oa="buffer.playbackStallChanged",Sa="buffer.requestSourceBufferOperation",wa="buffer.playbackStateChanged",Ta="buffer.endOfStreamReached",Ma="buffer.fragmentAdded",La="buffer.changeCodec",Aa="buffer.sourceBufferStuck",Pa="resolutionsManager.resolutionsAvailable",ja="resolutionManager.resolutionChanged",Da="resolutionManager.resolutionAutoChanged",Ra="resolutionManager.requestResolutionChange",Na="resolutionManager.requestRestartFromMain",Ia="resolutionManager.resolutionNotFound";_a=Gn("eQOGK");class Ca{constructor(e){Un(this,"_droppedFrames",{}),Un(this,"_currentResolution",null),Un(this,"_isFirstMetricsOfResolution",!0),this._eventBus=e,this._onBufferMetricsReadyListener=this._eventBus.subscribe(Ea,this._onBufferMetricsReady),this._onResolutionChangedListener=this._eventBus.subscribe(ja,this._onResolutionChanged)}destroy(){this._eventBus.unsubscribe(this._onBufferMetricsReadyListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this.reset()}getCurrentResolutionHistory(){return this._currentResolution&&this._droppedFrames[this._currentResolution.name]?this._droppedFrames[this._currentResolution.name]:null}getResolutionHistoryByName(e){return this._droppedFrames[e]||null}reset(){this._droppedFrames={},this._currentResolution=null,this._isFirstMetricsOfResolution=!0}_onBufferMetricsReady(e){if(this._currentResolution){var{name:t}=this._currentResolution;this._droppedFrames[t]||(this._droppedFrames[t]={droppedFramesNumber:0,totalFramesNumber:0}),this._isFirstMetricsOfResolution?this._isFirstMetricsOfResolution=!1:(this._droppedFrames[t].droppedFramesNumber+=e.droppedVideoFramesDelta,this._droppedFrames[t].totalFramesNumber+=e.totalVideoFramesDelta)}}_onResolutionChanged(e){var t;(null===(t=this._currentResolution)||void 0===t?void 0:t.name)!==e.name&&(this._currentResolution=e,this._isFirstMetricsOfResolution=!0)}}(0,Hn.__decorate)([_a.default],Ca.prototype,"_onBufferMetricsReady",null),(0,Hn.__decorate)([_a.default],Ca.prototype,"_onResolutionChanged",null),_a=Gn("eQOGK");class ka extends va{constructor(e){super("droppedFramesEstimator",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{droppedFramesByResolution:{}}),Un(this,"groups",["abr"]),Un(this,"_lastClearTs",0),Un(this,"_droppedFramesHistory",new Ca(this._eventBus)),this._onMetricsReadyListener=this._eventBus.subscribe(Ea,this._onMetricsReady)}destroy(){super.destroy(),this._droppedFramesHistory.destroy(),this._eventBus.unsubscribe(this._onMetricsReadyListener)}reset(){this._droppedFramesHistory.reset()}getNextEstimatedResolution(e){var{minimalFramesPlayed:t}=this.config;return e.find(e=>{var{name:r}=e,n=this._droppedFramesHistory.getResolutionHistoryByName(r);return this.additionalInfo.droppedFramesByResolution[r]=n,!n||n.totalFramesNumber<t||n.droppedFramesNumber/n.totalFramesNumber<this.config.optimalDroppedFramesFraction})||null}_handleConfigUpdated(){}_onMetricsReady(e){e.currentTimestamp-this._lastClearTs>this.config.resetHistoryTimeout&&(this._droppedFramesHistory.reset(),this._lastClearTs=e.currentTimestamp)}}(0,Hn.__decorate)([_a.default],ka.prototype,"_onMetricsReady",null),Gn("8NFq9"),Hn=Gn("a8VW4");var xa=Gn("3mtZ4"),Ba="AbrController.resolutionsConstraintsAvailable";_a=Gn("eQOGK");class Fa{constructor(e){Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["abr"]),Un(this,"_lastAvailableResolutions",[]),Un(this,"_currentResolutionsLimit",null),Un(this,"_estimatedResolution",null),this._eventBus=e,this._onResolutionsConstraintsAvailableListener=this._eventBus.subscribe(Ba,this._onResolutionsConstraintsAvailable)}destroy(){this._eventBus.unsubscribe(this._onResolutionsConstraintsAvailableListener)}reset(){}getNextEstimatedResolution(e){return this._lastAvailableResolutions!==e&&(this._lastAvailableResolutions=e,this._calculationAvailableResolution(this._currentResolutionsLimit)),this._estimatedResolution}_onResolutionsConstraintsAvailable(e){qn(xa).isEqual(this._currentResolutionsLimit,e)||this._calculationAvailableResolution(e)}_meetsLimits(e,t){return!(void 0!==(null==t?void 0:t.bitrate)&&e.bitrate>(null==t?void 0:t.bitrate)||void 0!==(null==t?void 0:t.height)&&e.height>(null==t?void 0:t.height)||void 0!==(null==t?void 0:t.width)&&e.width>(null==t?void 0:t.width)||void 0!==(null==t?void 0:t.fps)&&(void 0===e.fps||+e.fps>+(null==t?void 0:t.fps)))}_calculationAvailableResolution(e){var t;if(this._currentResolutionsLimit=Fn({},e),0!==(null===(t=this._lastAvailableResolutions)||void 0===t?void 0:t.length))if(null!==e){var r=this._lastAvailableResolutions.filter(t=>!e||this._meetsLimits(t,e));this._estimatedResolution=r[0]||this._lastAvailableResolutions.slice(-1)[0]}else this._estimatedResolution=null}}(0,Hn.__decorate)([_a.default],Fa.prototype,"_onResolutionsConstraintsAvailable",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class Ua extends va{constructor(e){super("switchHistory",e),Un(this,"_lastSelectedResolution",null),Un(this,"_bannedResolutions",[]),this._onResolutionSelectedListener=this._eventBus.subscribe(ja,this._onResolutionChanged),this._onMetricsReadyListener=this._eventBus.subscribe(Ea,this._checkBanedResolutions)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onResolutionSelectedListener),this._eventBus.unsubscribe(this._onMetricsReadyListener),this.reset()}reset(){this._bannedResolutions=[]}getBannedResolutions(){return this._bannedResolutions.map(e=>{var{resolution:t}=e;return t})}_handleConfigUpdated(e){e.banResolutionDuration&&this._checkBanedResolutions()}_onResolutionChanged(e){!this._lastSelectedResolution||this._lastSelectedResolution.bitrate<e.bitrate?this._lastSelectedResolution=e:this._lastSelectedResolution.bitrate>e.bitrate&&(this._bannedResolutions.push({resolution:e,bannedAt:Date.now()}),this._lastSelectedResolution=e)}_checkBanedResolutions(){if(this._bannedResolutions.length){var e=Date.now();this._bannedResolutions=this._bannedResolutions.filter(t=>{var{bannedAt:r}=t;return e-r<this.config.banResolutionDuration})}}}(0,Hn.__decorate)([_a.default],Ua.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],Ua.prototype,"_onResolutionChanged",null),(0,Hn.__decorate)([_a.default],Ua.prototype,"_checkBanedResolutions",null),Gn("8NFq9"),Hn=Gn("a8VW4"),Gn("8NFq9"),Hn=Gn("a8VW4");var za={browserRedirectDetected:"networkLoader.events.browserRedirectDetected",networkRequestSettled:"networkLoader.events.networkRequestSettled"},Va={statsReady:"networkLoader.stats.statsEvent"};_a=Gn("eQOGK");class qa{constructor(e,t,r){Un(this,"_previousFastValue",null),Un(this,"_previousSlowValue",null),this._eventBus=r,this._fastAlpha=e,this._slowAlpha=t}addValue(e){var{_fastAlpha:t,_slowAlpha:r}=this;this._previousFastValue=t*e+(1-t)*(this._previousFastValue||e),this._previousSlowValue=r*e+(1-r)*(this._previousSlowValue||e),this._eventBus.publish("EWMAMetrics",{fast:this._previousFastValue,slow:this._previousSlowValue})}getCurrentValue(){return this._previousSlowValue&&this._previousFastValue?Math.min(this._previousFastValue,this._previousSlowValue):0}getCurrentMaximalValue(){return this._previousFastValue&&this._previousSlowValue?Math.max(this._previousSlowValue,this._previousFastValue):0}reset(){this._previousSlowValue=null,this._previousFastValue=null}}class Wa extends va{constructor(e){super("throughputHistory",e),this._measuredSpeedEwmaInstance=new qa(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._realSpeedEwmaInstance=new qa(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._ttfbEwmaInstance=new qa(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._onNetMetricsReadyListener=this._eventBus.subscribe(Va.statsReady,this._onNetworkMetricsReady)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onNetMetricsReadyListener),this._measuredSpeedEwmaInstance.reset(),this._realSpeedEwmaInstance.reset()}getCurrentBitrateEstimate(){return{measuredSpeed:this._measuredSpeedEwmaInstance.getCurrentValue(),realSpeedWithoutTTFB:this._realSpeedEwmaInstance.getCurrentValue(),ttfb:this._ttfbEwmaInstance.getCurrentMaximalValue()}}reset(){this._measuredSpeedEwmaInstance=new qa(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._realSpeedEwmaInstance=new qa(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._ttfbEwmaInstance=new qa(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus)}_handleConfigUpdated(e){(e.ewmaFastAlpha||e.ewmaSlowAlpha)&&this.reset()}_onNetworkMetricsReady(e){if(!this.config.ignorePlaylistsMetrics||"text"!==e.type){var t=8*e.sizeInKb/((e.downloadDuration-e.ttfb)/1e3);this._measuredSpeedEwmaInstance.addValue(e.calculatedSpeed),this._realSpeedEwmaInstance.addValue(t),this._ttfbEwmaInstance.addValue(e.ttfb/1e3)}}}(0,Hn.__decorate)([_a.default],Wa.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],Wa.prototype,"_onNetworkMetricsReady",null);var Ya=e=>e/1024;_a=Gn("eQOGK");class Ga extends va{constructor(e){super("throughputEstimator",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["abr"]),Un(this,"_isResultsConfident",!1),Un(this,"_fragmentsLoadedAmount",0),this._throughputHistory=new Wa(this._eventBus),this._onNetworkMetricsReadyListener=this._eventBus.subscribe(Va.statsReady,this._onNetworkStatsReady)}destroy(){super.destroy(),this._throughputHistory.destroy(),this._eventBus.unsubscribe(this._onNetworkMetricsReadyListener)}reset(){this._throughputHistory.reset(),this._isResultsConfident=!1}getNextEstimatedResolution(e){var{realSpeedWithoutTTFB:t,measuredSpeed:r,ttfb:n}=this._throughputHistory.getCurrentBitrateEstimate();if(this.additionalInfo={realSpeedWithoutTTFB:t,measuredSpeed:r,ttfb:n},!e.length||!r||!this._isResultsConfident)return null;var i=Ya(e[0].bitrate)/(n+Ya(e[0].bitrate)/t);if(Ya(e[0].bitrate)<i)return e[0];var o=e.find(e=>{var{bitrate:r}=e,i=Ya(r),o=i/(n+i/t);return o*this.config.optimalResolutionLowerBound<=i&&i<=o*this.config.optimalResolutionUpperBound});return o||(e.find(e=>{var{bitrate:t}=e;return Ya(t)<=r*this.config.optimalResolutionLowerBound})||e.slice(-1)[0])}_handleConfigUpdated(){}_onNetworkStatsReady(e){"binary"!==e.type||this._isResultsConfident||(this._fragmentsLoadedAmount+=1,this._fragmentsLoadedAmount>=this.config.amountOfFragmentToBecomeConfident&&(this._isResultsConfident=!0))}}(0,Hn.__decorate)([_a.default],Ga.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],Ga.prototype,"_onNetworkStatsReady",null),_a=Gn("eQOGK");var Ha,Qa,Ka,Xa,Ja,$a,Za,es,ts={[ia.DROPPED_FRAMES_ESTIMATOR]:ka,[ia.THROUGHPUT_ESTIMATOR]:Ga,[ia.SWITCH_HISTORY]:class{constructor(e){Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{bannedResolution:[]}),Un(this,"groups",["abr"]),this._eventBus=e,this._switchHistory=new Ua(this._eventBus)}reset(){this._switchHistory.reset()}destroy(){this._switchHistory.destroy()}getNextEstimatedResolution(e){var t=this._switchHistory.getBannedResolutions().map(e=>{var{name:t}=e;return t});return this.additionalInfo.bannedResolution=t,e.find(e=>{var{name:r}=e;return!t.includes(r)})||null}},[ia.INSUFFICIENT_BUFFER]:class extends va{constructor(e){super("insufficientBufferEstimator",e),Un(this,"status","Idle"),Un(this,"state",ca.OK),Un(this,"groups",["abr"]),Un(this,"additionalInfo",{}),Un(this,"_hasPassedMinimalBuffer",!1)}destroy(){super.destroy()}reset(){this._hasPassedMinimalBuffer=!1}getNextEstimatedResolution(e,t,r){var n=r.bufferAmount>this.config.minimalBufferAmount;!this._hasPassedMinimalBuffer&&n&&(this._hasPassedMinimalBuffer=!0);var i=!this.config.ignoreMetricsBeforeBufferExceedsMinimal||this._hasPassedMinimalBuffer;if(this.additionalInfo.isResultsConfident=i,this.additionalInfo.isBufferExceedsMinimal=n,this.additionalInfo.hasPassedMinimalBuffer=this._hasPassedMinimalBuffer,!i||n||!t)return null;this._hasPassedMinimalBuffer=!1;var o=e.slice(-1)[0],a=t.url===o.url?t:e[e.findIndex(e=>{var{name:r}=e;return r===t.name})+1];return this.config.switchToMinimalResolution?o:a}_handleConfigUpdated(){this._hasPassedMinimalBuffer=!1}},[ia.MINIMAL_BUFFER_TO_INCREASE]:class extends va{constructor(e){super("minimalBufferToIncreaseEstimator",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["abr"])}destroy(){super.destroy()}reset(){}getNextEstimatedResolution(e,t,r){return 1e3*r.bufferAmount>this.config.minimalBufferAmount?null:t}_handleConfigUpdated(){}},[ia.DELTA_BUFFER]:ya,[ia.MAX_RESOLUTION_ESTIMATOR]:Fa};class rs extends va{constructor(e){super("abr",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["general","abr"]),Un(this,"additionalInfo",{switchReasonHistory:[]}),Un(this,"_currentResolution",null),Un(this,"_availableResolutions",[]),Un(this,"_estimators",{}),Un(this,"_lastSwitchTime",0),this._logger=zi(e,"Doppio - AbrController"),this._onResolutionChangedListener=this._eventBus.subscribe(ja,this._onResolutionChanged),this._onResolutionsAvailableListener=this._eventBus.subscribe(Pa,this._onResolutionsAvailable),this._onMetricsReadyListener=this._eventBus.subscribe(Ea,this._recalculateCurrentLevel),this._recreateEstimators(),this._lastSwitchTime=Date.now()}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onMetricsReadyListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onResolutionsAvailableListener),Object.values(this._estimators).forEach(e=>{e.destroy()}),this._estimators={}}_handleConfigUpdated(e){e.enabledABRRules&&this._recreateEstimators()}_recreateEstimators(){Object.values(this._estimators).forEach(e=>e.destroy()),this._estimators=this.config.enabledABRRules.reduce((e,t)=>(e[t]=new ts[t](this._eventBus),e),{})}_recalculateCurrentLevel(e){var t,r=Object.entries(this._estimators).reduce((t,r)=>{var[n,i]=r;return t[n]=i.getNextEstimatedResolution(this._availableResolutions,this._currentResolution,e),t},{});if(this.additionalInfo.estimations=Object.entries(r).reduce((e,t)=>{var[r,n]=t;return e[r]=(null==n?void 0:n.name)||"null",e},{}),!(Date.now()-this._lastSwitchTime<this.config.cooldownPeriod)&&Object.values(this._estimators).length){var n=Object.values(r).filter(e=>e).sort((e,t)=>((null==e?void 0:e.bitrate)||0)-((null==t?void 0:t.bitrate)||0))[0];if(n&&n.name!==(null===(t=this._currentResolution)||void 0===t?void 0:t.name)){var i,o,a=Object.entries(r).reduce((e,t)=>{var[r,i]=t;return(null==i?void 0:i.name)===(null==n?void 0:n.name)&&e.push(r),e},[]);this.additionalInfo.switchReasonHistory.unshift("".concat(null===(i=this._currentResolution)||void 0===i?void 0:i.name," -> ").concat(null==n?void 0:n.name,"; ").concat(a.join(","))),this._lastSwitchTime=Date.now(),this.additionalInfo.lastSwitchTime=this._lastSwitchTime,this.additionalInfo.lastSwitchReason=Object.entries(r).filter(e=>{var[,t]=e;return(null==t?void 0:t.name)===(null==n?void 0:n.name)}).map(e=>{var[t]=e;return t}).join("; "),this._logger.info("ABR wants to change the resolution, ".concat(null===(o=this._currentResolution)||void 0===o?void 0:o.name," -> ").concat(null==n?void 0:n.name)),this._eventBus.publish(Ra,n)}}}_onResolutionsAvailable(e){this._availableResolutions=e}_onResolutionChanged(e){this._currentResolution=e,Object.values(this._estimators).forEach(e=>e.reset())}get additionalModules(){return this._estimators}}(0,Hn.__decorate)([_a.default],rs.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],rs.prototype,"_recalculateCurrentLevel",null),(0,Hn.__decorate)([_a.default],rs.prototype,"_onResolutionsAvailable",null),(0,Hn.__decorate)([_a.default],rs.prototype,"_onResolutionChanged",null),Gn("8NFq9"),Hn=Gn("a8VW4"),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class ns extends va{constructor(e){super("bufferController",e),Un(this,"_isPaused",!1),Un(this,"_isInVodMode",!1),Un(this,"_fragmentTimeRanges",[]),Un(this,"_videoElement",null),this._logger=zi(e,"Doppio - BufferCleaner"),this._onBufferMetricsReadyListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable),this._onPeriodFragmentsFound=this._eventBus.subscribe(ma.fragments.periodFragmentsFound,this._onFragmentPeriodFound),this._onVODFragmentsInfoAvailableListener=this._eventBus.subscribe(ma.playlists.vodFragmentsInfo,this._onVODFragmentsInfoAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPeriodFragmentsFound),this._eventBus.unsubscribe(this._onVODFragmentsInfoAvailableListener),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener)}start(){this._isPaused=!1}pause(){this._isPaused=!0}setVODMode(e){this._isInVodMode=e}setVideoElement(e){this._videoElement=e}removeVideoElement(){this._videoElement=null}_handleConfigUpdated(){}_onVODFragmentsInfoAvailable(e){this._fragmentTimeRanges=e.map(e=>{var{fragmentStartTS:t,fragmentEndTS:r}=e;return{startTS:t,endTS:r}})}_onBufferMetricsAvailable(e){if(!(this._isPaused||0===e.bufferedTimeRanges.length||this._isInVodMode&&this._fragmentTimeRanges.length)){var t,r,n=e.isPaused?[{startTS:e.currentPlaybackPosition-1,endTS:e.currentPlaybackPosition+1},{startTS:(null===(t=e.bufferedTimeRanges.slice(-1)[0])||void 0===t?void 0:t.end)-this.config.maxBackBufferAmount/1e3,endTS:null===(r=e.bufferedTimeRanges.slice(-1)[0])||void 0===r?void 0:r.end}]:[{startTS:e.currentPlaybackPosition-this.config.maxBackBufferAmount/1e3,endTS:e.bufferedTimeRanges.slice(-1)[0].end}];this._clearBufferWithSafetyTimeRanges(n)}}_onFragmentPeriodFound(e){var{endTsOfPeriod:t}=e;if(!(this._isPaused||!this._videoElement||this._videoElement.currentTime<this.config.maxBackBufferAmount/1e3)){var{currentTime:r}=this._videoElement,n=[{startTS:r-this.config.maxBackBufferAmount/1e3,endTS:t}];this._clearBufferWithSafetyTimeRanges(n)}}_clearBufferWithSafetyTimeRanges(e){var t;if(null!==(t=this._videoElement)&&void 0!==t&&t.buffered.length){var r=e.sort((e,t)=>e.startTS-t.startTS).filter(e=>{var{startTS:t,endTS:r}=e;return t<r}).map((t,r)=>({startTS:r>0?e[r-1].endTS:0,endTS:t.startTS})).filter(e=>{var{startTS:t,endTS:r}=e;return t<r});this._isInVodMode&&Number.isFinite(this._videoElement.duration)&&e.length&&e.slice(-1)[0].endTS<this._videoElement.duration&&r.push({startTS:e.slice(-1)[0].endTS,endTS:this._videoElement.duration}),r.forEach(e=>{this._eventBus.publish(Sa,t=>{this._logger.verbose("Removing buffered range ".concat(e.startTS," -> ").concat(e.endTS)),t.remove(e.startTS,e.endTS)})})}}}(0,Hn.__decorate)([_a.default],ns.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],ns.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],ns.prototype,"_onVODFragmentsInfoAvailable",null),(0,Hn.__decorate)([_a.default],ns.prototype,"_onBufferMetricsAvailable",null),(0,Hn.__decorate)([_a.default],ns.prototype,"_onFragmentPeriodFound",null),Gn("8NFq9"),Hn=Gn("a8VW4"),(Qa=Ha||(Ha={})).MANIFEST_LOADED="ManifestLoaded",Qa.FIRST_MEDIA_PLAYLIST_LOADED="FirstMediaPlaylistLoaded",Qa.FIRST_FRAGMENT_LOADED="FirstFragmentLoaded",Qa.FIRST_FRAGMENT_BUFFERED="FirstFragmentBuffered",(Xa=Ka||(Ka={})).MANIFEST_LOAD_ERROR="ManifestLoadError",Xa.PLAYLIST_LOAD_ERROR="PlaylistLoadError",Xa.FRAGMENT_LOAD_ERROR="FragmentLoadError",($a=Ja||(Ja={})).VARIANTS_DETECTED="variantDetected",$a.RESOLUTION_CHANGED="resolutionChanged",$a.METRICS_AVAILABLE="metricsAvailable",$a.ERROR="error",$a.MANIFEST_LOADING="manifestLoading",$a.MANIFEST_LOADED="manifestLoaded",$a.MANIFEST_PARSED="manifestParsed",$a.LEVEL_LOADED="levelLoaded",$a.LEVEL_SWITCHED="levelSwitched",$a.LEVEL_SWITCHED_AUTO="levelSwitchedAuto",$a.LEVEL_SWITCHING="levelSwitching",$a.MEDIA_ATTACHED="mediaAttached",$a.MEDIA_DETACHED="mediaDetached",$a.FRAG_LOADED="fragmentLoaded",$a.LEVEL_METADATA_LOADED="levelMetadataLoaded",$a.STREAM_STATE_TRANSITION="streamStateTransition",$a.PLAYBACK_STATE_CHANGED="playbackStateChanged",$a.FRAG_BUFFERED="fragBuffered",$a.DEBUGGER_CONNECTED="debuggerConnected",$a.STREAM_ENDED="streamEnded",$a.LIFECYCLE_EVENT="lifecycleEvent",$a.LIFECYCLE_ERROR="lifecycleError",$a.FRAGMENT_FILTERED_OUT="fragmentFilteredOut",$a.RESOLUTION_NOT_FOUND="resolutionNotFound",(es=Za||(Za={})).MEDIA_ERROR="mediaError",es.NETWORK_ERROR="networkError",es.PARSING_ERROR="parsingError",_a=Gn("eQOGK");class is extends va{constructor(e){super("bufferController",e),Un(this,"_sourceBuffer",null),Un(this,"_opsQueue",[]),Un(this,"_sourceBufferStuckTimer",null),this._logger=zi(e,"Doppio - BufferOpsQueue"),this._eventBus=e}setSourceBuffer(e){this._sourceBuffer&&this._sourceBuffer.removeEventListener("updateend",this._onBufferReady),this._sourceBuffer=e,this._sourceBuffer.addEventListener("updateend",this._onBufferReady),this._sourceBufferStuckTimer=setTimeout(()=>{this._eventBus.publish(Aa,{})},this.config.sourceBufferStuckTimeout)}destroy(){super.destroy();try{var e,t;this._disarmSourceBufferStuckTimer(),null!==(e=this._sourceBuffer)&&void 0!==e&&e.removeEventListener("updateend",this._onBufferReady),null===(t=this._sourceBuffer)||void 0===t||t.abort()}catch(Ev){this._logger.info("Source buffer cannot be aborted. Ignore it")}this._opsQueue=[]}removeSourceBuffer(e){this._sourceBuffer&&(this.immediatelyRecreateSourceBuffer(e),this._sourceBuffer.removeEventListener("updateend",this._onBufferReady),this._sourceBuffer=null)}addBufferOperation(e,t,r){if(!this._sourceBuffer)return this._logger.warn("There is no sourceBuffer defined. Operation (".concat(r||"unknown",") will be executed once sourceBuffer will be appended")),void this._opsQueue.push({operation:e,errorHandler:t});if(this._sourceBuffer.updating||this._opsQueue.length>0)this._opsQueue.push({operation:e,errorHandler:t});else try{e(this._sourceBuffer)}catch(r){t?t(this._sourceBuffer,r):(this._eventBus.publish(Ja.ERROR,{type:Za.MEDIA_ERROR,details:r}),this._logger.error("Cannot recreate source buffer: ".concat(r.toString(),", ").concat(e)))}}immediatelyRecreateSourceBuffer(e){try{if(!this._sourceBuffer||!e||![...e.sourceBuffers].includes(this._sourceBuffer))return;this._disarmSourceBufferStuckTimer(),this._opsQueue=[],this._sourceBuffer.abort(),this._sourceBuffer.remove(0,Number.POSITIVE_INFINITY)}catch(e){this._logger.error("Cannot recreate source buffer: ".concat(e.toString()))}}_recheckQueue(){if(this._sourceBuffer&&!this._sourceBuffer.updating&&this._opsQueue.length){var e=this._opsQueue.shift();if(e)try{e.operation(this._sourceBuffer)}catch(zn){var t;e.errorHandler?null===(t=e.errorHandler)||void 0===t||t.call(e,this._sourceBuffer,zn):(this._logger.error("Cannot perform source buffer operation: ".concat(zn.toString()," ").concat(e)),this._eventBus.publish(Ja.ERROR,{type:Za.MEDIA_ERROR,details:zn}))}!this._sourceBuffer.updating&&this._opsQueue.length&&this._recheckQueue()}}_onBufferReady(){this._recheckQueue(),this._disarmSourceBufferStuckTimer()}_disarmSourceBufferStuckTimer(){this._sourceBufferStuckTimer&&clearTimeout(this._sourceBufferStuckTimer)}}(0,Hn.__decorate)([_a.default],is.prototype,"_onBufferReady",null),(0,Hn.__decorate)([_a.default],is.prototype,"_disarmSourceBufferStuckTimer",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class os extends va{constructor(e){super("bufferStallsDetector",e),Un(this,"_isPrevCheckStalled",!1),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener)}_handleConfigUpdated(){}_onBufferMetricsAvailable(e){var{isStallCandidate:t,bufferedTimeRanges:r,currentPlaybackPosition:n}=e,i=r.slice(-1)[0],o=i?i.end-n:0,a=t&&o<this.config.bufferAmountToDetectStall;this._isPrevCheckStalled!==a&&(this._isPrevCheckStalled=a,this._eventBus.publish(Oa,a))}}(0,Hn.__decorate)([_a.default],os.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],os.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],os.prototype,"_onBufferMetricsAvailable",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");var as,ss,us="debugger.lifecycleEvent",ls="debugger.connected",cs=(e,t)=>r=>{t.publish(us,{module:e,eventInfo:r,timestamp:Date.now()})};(ss=as||(as={})).UNKNOWN="unknown",ss.GAP="gap",ss.IN_RANGE="inRange",ss.END_OF_RANGE="endOfRange";class ds extends va{constructor(e){super("bufferController",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["buffer"]),Un(this,"_lastPlaybackPosition",0),Un(this,"_videoElement",null),Un(this,"_numberOfDetectedStallCandidates",0),this._logger=zi(e,"Doppio - LiveGapController"),this._lifecycleEventReporter=cs("LiveGapController",this._eventBus),this._onBufferMetricsReadyListener=this._eventBus.subscribe(Ea,this._onBufferMetricsReady)}setVideoElement(e){this._videoElement=e}removeVideoElement(){this._videoElement=null}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener)}_handleConfigUpdated(){}_checkIfJumpNeeded(e){var t=!1,r=as.UNKNOWN,n=this._lastPlaybackPosition!==e.currentPlaybackPosition;this._lastPlaybackPosition=e.currentPlaybackPosition,n?this._numberOfDetectedStallCandidates=0:this._numberOfDetectedStallCandidates+=1;var i=!e.bufferedTimeRanges.some(e=>{var{isCurrentTimeRange:t}=e;return t});return!n&&this.config.numberOfCandidatesToDetectGap<=this._numberOfDetectedStallCandidates&&(this._numberOfDetectedStallCandidates=0,this._lifecycleEventReporter("Playback stalled"),this._logger.info("Playback position didnt changed since last check"),t=!0,r=e.currentTimeRange&&e.currentTimeRange.end-e.currentPlaybackPosition<this.config.endOfRangeThreshold?as.END_OF_RANGE:as.IN_RANGE),i&&(this._lifecycleEventReporter("Gap detected"),this._logger.info("Gap detected"),t=!0,r=as.GAP),this.additionalInfo.isInLastBufferedRange=e.isInLastBufferedRange,this.additionalInfo.isPlaybackPositionChanged=n,this.additionalInfo.isInGap=i,this.additionalInfo.stuckType=r,{isJumpNeeded:t,stuckType:r}}_onBufferMetricsReady(e){var t,r;if(e.bufferedTimeRanges.length&&0!==(null===(t=this._videoElement)||void 0===t?void 0:t.currentTime)&&(null===(r=this._videoElement)||void 0===r||!r.paused)){var{isJumpNeeded:n,stuckType:i}=this._checkIfJumpNeeded(e);return n?(this._lifecycleEventReporter("Gap detected. Skipping it"),[as.END_OF_RANGE,as.GAP].includes(i)?this._jumpToNextRangeStart(e):this._nudgePlayback(e)):void 0}}_setNextPlaybackPosition(e){this._videoElement&&(this._videoElement.currentTime=e)}_jumpToNextRangeStart(e){if(e.isInLastBufferedRange||e.currentPlaybackPosition>=e.bufferedTimeRanges.slice(-1)[0].end)this._nudgePlayback(e);else{var t=e.bufferedTimeRanges.find(t=>{var{start:r}=t;return r>e.currentPlaybackPosition});t?(this._lifecycleEventReporter("Jump to next range requested, jumping to ".concat(t.start+.01)),this._setNextPlaybackPosition(t.start+.01)):this._nudgePlayback(e)}}_nudgePlayback(e){if(!e.isOnBufferEdge){var t=e.currentPlaybackPosition+this.config.nudgePlaybackAmount;this._lifecycleEventReporter("Nudge playback position"),this._setNextPlaybackPosition(t)}}}(0,Hn.__decorate)([_a.default],ds.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],ds.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],ds.prototype,"_onBufferMetricsReady",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class fs extends va{constructor(e){super("bufferController",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["buffer"]),Un(this,"_videoElement",null),Un(this,"_fragments",[]),Un(this,"_lastPlaybackPosition",0),Un(this,"_numberOfDetectedStallCandidates",0),this._onBufferMetricsReadyListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable),this._onVODFragmentInfoAvailableListener=this._eventBus.subscribe(ma.playlists.vodFragmentsInfo,this._onVODFragmentsInfoAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener),this._eventBus.unsubscribe(this._onVODFragmentInfoAvailableListener)}setVideoElement(e){this._videoElement=e}removeVideoElement(){this._videoElement=null}_handleConfigUpdated(){}_onVODFragmentsInfoAvailable(e){this._fragments=e.map(e=>{var{fragmentEndTS:t,fragmentStartTS:r}=e;return{startTs:r,endTs:t}})}_onBufferMetricsAvailable(e){var t;if(this._fragments.length&&e.bufferedTimeRanges&&(null===(t=this._videoElement)||void 0===t||!t.paused)){var r=this._lastPlaybackPosition!==e.currentPlaybackPosition;this._lastPlaybackPosition=e.currentPlaybackPosition,r?this._numberOfDetectedStallCandidates=0:this._numberOfDetectedStallCandidates+=1;var n=!e.bufferedTimeRanges.some(e=>{var{isCurrentTimeRange:t}=e;return t}),i=!r&&this.config.numberOfCandidatesToDetectGap<=this._numberOfDetectedStallCandidates;if(n||i){var o,a,s=(null===(o=this._fragments.find(t=>{var{startTs:r}=t;return r>e.currentPlaybackPosition}))||void 0===o?void 0:o.startTs)||-1,u=(null===(a=e.bufferedTimeRanges.find(t=>{var{start:r}=t;return r>e.currentPlaybackPosition}))||void 0===a?void 0:a.start)||-1;s===u&&this._videoElement&&(this._videoElement.currentTime=u+.01,this._numberOfDetectedStallCandidates=0)}}}}(0,Hn.__decorate)([_a.default],fs.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],fs.prototype,"_onVODFragmentsInfoAvailable",null),(0,Hn.__decorate)([_a.default],fs.prototype,"_onBufferMetricsAvailable",null);class hs{constructor(e){Un(this,"groups",["buffer"]),Un(this,"_liveGapController",null),Un(this,"_vodGapController",null),Un(this,"_videoElement",null),Un(this,"_isInVODMode",!1),this._eventBus=e,this._liveGapController=new ds(this._eventBus),this._recreateGapController()}destroy(){var e,t;null!==(e=this._vodGapController)&&void 0!==e&&e.destroy(),null===(t=this._liveGapController)||void 0===t||t.destroy()}setIsVod(e){this._isInVODMode=e,this._recreateGapController()}setVideoElement(e){this._videoElement=e,this._liveGapController&&this._liveGapController.setVideoElement(e),this._vodGapController&&this._vodGapController.setVideoElement(e)}removeVideoElement(){var e,t;this._videoElement=null,null!==(e=this._liveGapController)&&void 0!==e&&e.removeVideoElement(),null===(t=this._vodGapController)||void 0===t||t.removeVideoElement()}_recreateGapController(){var e,t;null!==(e=this._vodGapController)&&void 0!==e&&e.destroy(),null!==(t=this._liveGapController)&&void 0!==t&&t.destroy(),this._isInVODMode?this._vodGapController=new fs(this._eventBus):this._liveGapController=new ds(this._eventBus),this._videoElement&&this.setVideoElement(this._videoElement)}get status(){var e,t;return(null===(e=this._vodGapController)||void 0===e?void 0:e.status)||(null===(t=this._liveGapController)||void 0===t?void 0:t.status)||"Idle"}get state(){var e,t;return(null===(e=this._vodGapController)||void 0===e?void 0:e.state)||(null===(t=this._liveGapController)||void 0===t?void 0:t.state)||ca.OK}get additionalInfo(){var e,t;return(null===(e=this._vodGapController)||void 0===e?void 0:e.additionalInfo)||(null===(t=this._liveGapController)||void 0===t?void 0:t.additionalInfo)||{}}}Gn("8NFq9"),Hn=Gn("a8VW4");var ps,gs,vs="targetBuffer.targetBufferIncreaseRequested",ms="targetBuffer.targetBufferIncreased",_s="targetBuffer.targetBufferDecreaseRequested",ys="targetBuffer.originalTargetBufferDecreaseRequested",bs="targetBuffer.originalTargetBufferDisable",Es="playbackSpeed.setPlaybackSpeed";class Os{constructor(){Un(this,"_registeredEvents",[])}registerEvent(){this._registeredEvents.push(Date.now())}checkEventsInPeriod(e){var t=Date.now()-e;return this._registeredEvents=this._registeredEvents.filter(e=>e>=t),this._registeredEvents.length}clear(){this._registeredEvents=[]}}_a=Gn("eQOGK");class Ss extends va{constructor(e){super("originalTargetBufferDecreaser",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["PlaybackSpeed"]),Un(this,"_nextCheckTimestamp",0),Un(this,"_currentMultiplier",0),Un(this,"_increaseEventsCollector",new Os),this.additionalInfo={isDecreasingDisabled:!1,currentMultiplier:this._currentMultiplier},this._onTargetBufferIncreasedListener=this._eventBus.subscribe(ms,this._onTargetBufferIncreased),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onTargetBufferIncreasedListener),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener)}_updateIsDisabledAdditionalInfo(){this.additionalInfo.isDecreasingDisabled=!0}_updateMultiplier(){this._currentMultiplier+=1,this.additionalInfo.currentMultiplier=this._currentMultiplier}_onTargetBufferIncreased(){this._increaseEventsCollector.registerEvent(),this._eventBus.publish(bs,{}),this._updateIsDisabledAdditionalInfo()}_onBufferMetricsAvailable(){0!==this._nextCheckTimestamp&&this._nextCheckTimestamp<performance.now()&&this.config.allowTargetBufferDecrease&&0===this._increaseEventsCollector.checkEventsInPeriod(this.config.targetBufferDecreaseTimeout)&&this._currentMultiplier<this.config.maxTargetBufferMultiplier&&(this._eventBus.publish(ys,{}),this._updateMultiplier(),this._nextCheckTimestamp=performance.now()+this.config.targetBufferDecreaseTimeout),this._nextCheckTimestamp=0===this._nextCheckTimestamp?performance.now()+this.config.targetBufferDecreaseTimeout:this._nextCheckTimestamp}}(0,Hn.__decorate)([_a.default],Ss.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],Ss.prototype,"_onTargetBufferIncreased",null),(0,Hn.__decorate)([_a.default],Ss.prototype,"_onBufferMetricsAvailable",null),Gn("8NFq9"),Hn=Gn("a8VW4"),(gs=ps||(ps={})).FAST="fast",gs.NORMAL="normal",gs.SLOW="slow",_a=Gn("eQOGK");class ws extends va{constructor(e){super("playbackSpeedActuator",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["PlaybackSpeed"]),Un(this,"_videoElement",null),Un(this,"_currentPlaybackSpeed",ps.NORMAL),this._onPlaybackSpeedChangedListener=this._eventBus.subscribe(Es,this._onPlaybackSpeedChanged)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaybackSpeedChangedListener)}setVideoElement(e){this._videoElement=e,this._setPlaybackSpeed()}_handleConfigUpdated(){this._setPlaybackSpeed()}_onPlaybackSpeedChanged(e){this._currentPlaybackSpeed=e,this._setPlaybackSpeed()}_setPlaybackSpeed(){if(this._videoElement){var e={[ps.FAST]:this.config.maxPlaybackRate,[ps.NORMAL]:1,[ps.SLOW]:this.config.minPlaybackRate};this._videoElement.playbackRate=e[this._currentPlaybackSpeed]}}get additionalInfo(){return{currentPlaybackMode:this._currentPlaybackSpeed}}}(0,Hn.__decorate)([_a.default],ws.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],ws.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],ws.prototype,"_onPlaybackSpeedChanged",null),Gn("8NFq9"),Hn=Gn("a8VW4");var Ts,Ms,Ls="getSideMetricsAsyncEvents.getPlaybackSpeedControllerMetrics",As="getSideMetricsAsyncEvents.playbackSpeedControllerMetricsAvailable",Ps="getSideMetricsAsyncEvents.getPlayingTimeFraction",js="getSideMetricsAsyncEvents.getPlayingTimeFractionAvailable",Ds={fragments:{fragmentLoaded:"fragmentLoader.fragments.fragmentLoaded",fragmentLoadingStarted:"fragmentLoader.fragments.fragmentLoadingStarted",fragmentLoadingAborted:"fragmentLoader.fragments.fragmentLoadingAborted",fragmentLoadingError:"fragmentLoader.fragments.fragmentLoadingError",fragmentHistoryReadyForPrint:"fragmentLoader.fragments.fragmentHistoryReadyForPrint"}},Rs=Ds,Ns=ma,Is={playlistRotatorTypeChanged:"streamLoader.playlistRotatorTypeChanged"},Cs=(e,t)=>{var r,n;return e.partHoldBack||(null===(r=e.serverControl)||void 0===r?void 0:r.partHoldBack)||(null===(n=e.serverControl)||void 0===n?void 0:n.holdBack)||t};_a=Gn("eQOGK");class ks extends va{constructor(e){super("playbackSpeedWatcher",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["PlaybackSpeed"]),Un(this,"_originalTargetBuffer",2),Un(this,"_currentTargetBufferMultiplier",1),Un(this,"_currentPlaybackRateMode",ps.NORMAL),Un(this,"_isPaused",!1),Un(this,"_isDecriseable",!0),Un(this,"_currentOriginalTargetBufferMultiplier",0),this._logger=zi(e,"Doppio - PlaybackSpeedWatcher"),this._onBufferMetricsReadyListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable),this._onTargetBufferDecreaseRequestedListener=this._eventBus.subscribe(_s,this._targetBufferDecreaseRequested),this._onTargetBufferIncreaseRequestedListener=this._eventBus.subscribe(vs,this._targetBufferIncreaseRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Ns.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onPlaybackSpeedControllerMetricsRequestedListener=this._eventBus.subscribe(Ls,this._onPlaybackSpeedControllerMetricsRequested),this._onOriginalTargetBufferDecreaseRequestedListener=this._eventBus.subscribe(ys,this._originalTargetBufferDecreaseRequested),this._onOriginalTargetBufferDecreaseDisableListener=this._eventBus.subscribe(bs,this._onOriginalTargetBufferDecreaseDisable),this.config.targetBufferInitialMultiplier&&this.config.targetBufferInitialMultiplier<1&&this._logger.warn("Target buffer multiplier set to value lower than 1. It is unsafe to load less than target-duration, forcing no multiplier instead")}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener),this._eventBus.unsubscribe(this._onTargetBufferDecreaseRequestedListener),this._eventBus.unsubscribe(this._onTargetBufferIncreaseRequestedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onPlaybackSpeedControllerMetricsRequestedListener),this._eventBus.unsubscribe(this._onOriginalTargetBufferDecreaseRequestedListener),this._eventBus.unsubscribe(this._onOriginalTargetBufferDecreaseDisableListener)}pause(){this._isPaused=!0,this._setNewPlaybackRateMode(ps.NORMAL)}resume(){this._isPaused=!1}_handleConfigUpdated(){}_setNewPlaybackRateMode(e){this._currentPlaybackRateMode!==e&&(this._currentPlaybackRateMode=e,this._eventBus.publish(Es,e))}_onBufferMetricsAvailable(e){if(!this._isPaused){var t=this._getTargetBuffer(),r=e.bufferAmountWithoutGaps-t;0!==e.currentPlaybackPosition&&(r>this.config.maxLiveSyncThreshold*t?this._setNewPlaybackRateMode(ps.FAST):-1*r>this.config.minLiveSyncThreshold*t?this._setNewPlaybackRateMode(ps.SLOW):(this._currentPlaybackRateMode===ps.SLOW&&r>0||this._currentPlaybackRateMode===ps.FAST&&r<0)&&this._setNewPlaybackRateMode(ps.NORMAL))}}_targetBufferIncreaseRequested(){this._currentTargetBufferMultiplier<this.config.maxTargetBufferMultiplier&&(this._currentTargetBufferMultiplier+=1,this._eventBus.publish(ms,{}))}_targetBufferDecreaseRequested(){this._currentTargetBufferMultiplier>1&&(this._currentTargetBufferMultiplier-=1,this._eventBus.publish(ms,{}))}_onPlaylistInfoAvailable(e){this._originalTargetBuffer=Cs(e,3*e.targetDuration)}_onPlaybackSpeedControllerMetricsRequested(){this._eventBus.publish(As,this._getTargetBuffer())}_getTargetBuffer(){return this._isDecriseable?this._originalTargetBuffer-this._currentOriginalTargetBufferMultiplier*this.config.targetBufferDecreaseCoefficient:this._originalTargetBuffer*this._currentTargetBufferMultiplier*this.config.targetBufferInitialMultiplier}get additionalInfo(){return{currentTargetBufferMultiplier:this._currentTargetBufferMultiplier,currentTargetBuffer:this._getTargetBuffer()}}_originalTargetBufferDecreaseRequested(){this._currentOriginalTargetBufferMultiplier+=1}_onOriginalTargetBufferDecreaseDisable(){this._isDecriseable=!1}}(0,Hn.__decorate)([_a.default],ks.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_onBufferMetricsAvailable",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_targetBufferIncreaseRequested",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_targetBufferDecreaseRequested",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_onPlaylistInfoAvailable",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_onPlaybackSpeedControllerMetricsRequested",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_originalTargetBufferDecreaseRequested",null),(0,Hn.__decorate)([_a.default],ks.prototype,"_onOriginalTargetBufferDecreaseDisable",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class xs extends va{constructor(e){super("targetBufferDecreaser",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["PlaybackSpeed"]),Un(this,"additionalInfo",{}),Un(this,"currentTargetBufferMultiplier",1),Un(this,"_nextCheckTimestamp",0),Un(this,"_currentPlaybackRateMode",ps.NORMAL),Un(this,"_slowdownEventsCollector",new Os),this._onPlaybackRateModeChangedListener=this._eventBus.subscribe(Es,this._onPlaybackRateModeChanged),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable),this._onTargetBufferIncreasedListener=this._eventBus.subscribe(ms,this._onTargetBufferIncreased)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaybackRateModeChangedListener),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener),this._eventBus.unsubscribe(this._onTargetBufferIncreasedListener)}_handleConfigUpdated(){}_onPlaybackRateModeChanged(e){e===this._currentPlaybackRateMode||e!==ps.SLOW&&this._currentPlaybackRateMode!==ps.SLOW||this._slowdownEventsCollector.registerEvent(),this._currentPlaybackRateMode=e}_onBufferMetricsAvailable(){0!==this._nextCheckTimestamp&&this._nextCheckTimestamp<Date.now()&&this.currentTargetBufferMultiplier>1&&this._currentPlaybackRateMode!==ps.SLOW&&0===this._slowdownEventsCollector.checkEventsInPeriod(this.config.periodOfEventsToCancelDecrease)&&(this._eventBus.publish(_s,{}),this.currentTargetBufferMultiplier-=1,this._nextCheckTimestamp=this.currentTargetBufferMultiplier>1?Date.now()+this.config.periodOfEventsToCancelDecrease:0)}_onTargetBufferIncreased(){this.currentTargetBufferMultiplier+=1,this._nextCheckTimestamp=Date.now()+this.config.periodOfEventsToCancelDecrease}}(0,Hn.__decorate)([_a.default],xs.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],xs.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],xs.prototype,"_onPlaybackRateModeChanged",null),(0,Hn.__decorate)([_a.default],xs.prototype,"_onBufferMetricsAvailable",null),(0,Hn.__decorate)([_a.default],xs.prototype,"_onTargetBufferIncreased",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class Bs extends va{constructor(e){super("targetBufferIncreaser",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["PlaybackSpeed"]),Un(this,"_hasFallenBelowLine",!0),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener)}_handleConfigUpdated(){}_onBufferMetricsAvailable(e){this._hasFallenBelowLine?1e3*e.bufferAmountWithoutGaps>=this.config.bufferAmountThreshold&&(this._hasFallenBelowLine=!1):1e3*e.bufferAmountWithoutGaps<this.config.bufferAmountToIncrease&&(this._hasFallenBelowLine=!0,this._eventBus.publish(vs,{}))}get additionalInfo(){return{hasFallenBelowLine:this._hasFallenBelowLine}}}(0,Hn.__decorate)([_a.default],Bs.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],Bs.prototype,"_onBufferMetricsAvailable",null);class Fs{constructor(e){Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["PlaybackSpeed"]),Un(this,"additionalInfo",{}),this._eventBus=e,this._playbackSpeedActuator=new ws(this._eventBus),this._playbackSpeedWatcher=new ks(this._eventBus),this._targetBufferDecreaser=new xs(this._eventBus),this._targetBufferIncreaser=new Bs(this._eventBus),this._originalTargetBufferDecreaser=new Ss(this._eventBus)}setVideoElement(e){this._playbackSpeedActuator.setVideoElement(e)}removeVideoElement(){this._playbackSpeedActuator.setVideoElement(null)}pause(){this._playbackSpeedWatcher.pause()}resume(){this._playbackSpeedWatcher.resume()}destroy(){this._playbackSpeedActuator.destroy(),this._playbackSpeedWatcher.destroy(),this._targetBufferDecreaser.destroy(),this._targetBufferIncreaser.destroy(),this._originalTargetBufferDecreaser.destroy()}get additionalModules(){return{playbackSpeedActuator:this._playbackSpeedActuator,playbackSpeedWatcher:this._playbackSpeedWatcher,targetBufferIncreaser:this._targetBufferIncreaser,targetBufferDecreaser:this._targetBufferDecreaser,originalTargetBufferDecreaser:this._originalTargetBufferDecreaser}}}Gn("8NFq9"),Hn=Gn("a8VW4"),(Ms=Ts||(Ts={})).IDLE="idle",Ms.LOADING="loading",Ms.PLAYING="playing",Ms.PAUSED="paused",Ms.ERROR="error",_a=Gn("eQOGK");class Us extends va{constructor(e){super("playbackStateController",e),Un(this,"_currentState",Ts.IDLE),Un(this,"_numberOfStallsOnEdge",0),Un(this,"_videoElement",null),Un(this,"_syncOnNextMetrics",!1),Un(this,"_isInStall",!1),Un(this,"_targetLiveEdge",6),Un(this,"_stallTS",0),Un(this,"_startTS",0),Un(this,"_stalledTimeRanges",[]),Un(this,"_stallsToChangeState",3),this._onPlaybackMetricsReadyListener=this._eventBus.subscribe(Ea,this._onMetricsAvailable),this._onResolutionChangedListener=this._eventBus.subscribe(ja,this.reset),this._onFragmentRequestedListener=this._eventBus.subscribe(Rs.fragments.fragmentLoadingStarted,this._onFragmentRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Ns.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onPlayingTimeFractionRequestedListener=this._eventBus.subscribe(Ps,this._onPlayingTimeFractionRequested)}destroy(){var e,t,r;super.destroy(),this._eventBus.unsubscribe(this._onPlaybackMetricsReadyListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onFragmentRequestedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onPlayingTimeFractionRequestedListener),null!==(e=this._videoElement)&&void 0!==e&&e.removeEventListener("canplaythrough",this._onCanPlayThrough),null!==(t=this._videoElement)&&void 0!==t&&t.removeEventListener("play",this._onPlay),null===(r=this._videoElement)||void 0===r||r.removeEventListener("playing",this._onPlaying)}setVideoElement(e){var t,r,n,i,o;this._videoElement&&(this._videoElement.removeEventListener("canplaythrough",this._onCanPlayThrough),null!==(t=this._videoElement)&&void 0!==t&&t.removeEventListener("play",this._onPlay),null!==(r=this._videoElement)&&void 0!==r&&r.removeEventListener("playing",this._onPlaying)),this._videoElement=e,null!==(n=this._videoElement)&&void 0!==n&&n.addEventListener("canplaythrough",this._onCanPlayThrough),null!==(i=this._videoElement)&&void 0!==i&&i.addEventListener("play",this._onPlay),null===(o=this._videoElement)||void 0===o||o.addEventListener("playing",this._onPlaying)}reset(){this._currentState=Ts.IDLE,this._numberOfStallsOnEdge=0}resetPlayingTimeCollector(){this._stallTS=0,this._startTS=0,this._stalledTimeRanges=[]}_handleConfigUpdated(){}_setNextState(e){e!==this._currentState&&(this._eventBus.publish(wa,{prevState:this._currentState,nextState:e}),this._currentState=e)}_onFragmentRequested(){this._currentState===Ts.IDLE&&this._setNextState(Ts.LOADING)}_onMetricsAvailable(e){if(this._syncOnNextMetrics&&e.bufferedTimeRanges.length&&(this._syncOnNextMetrics=!1,this._syncToLiveEdge(e.bufferedTimeRanges.slice(-1)[0].end)),this._currentState!==Ts.IDLE){this._isInStall!==e.isStallCandidate&&(this._isInStall=e.isStallCandidate,e.isStallCandidate?this._onStall():this._onPlaying());var t=0===e.playbackPositionDelta&&e.isOnBufferEdge;if(!t)return this._numberOfStallsOnEdge=0,void this._setNextState(Ts.PLAYING);t&&this._currentState===Ts.PLAYING&&this._numberOfStallsOnEdge++,this._numberOfStallsOnEdge>=this._stallsToChangeState&&this._setNextState(Ts.PAUSED),this._isInStall&&this.config.stallDurationToDisableTargetBufferDecrease<=Date.now()-this._stallTS&&this._eventBus.publish(bs,{})}}_onCanPlayThrough(){var e;this._startTS||(this._startTS=Date.now()),this.config.autoPlay&&(null===(e=this._videoElement)||void 0===e||e.play())}_onPlaylistInfoAvailable(e){this._targetLiveEdge=Cs(e,3*e.targetDuration)}_onPlay(){this.config.syncToLiveEdge&&this._videoElement&&(this._videoElement.buffered.length?this._syncToLiveEdge(this._videoElement.buffered.end(this._videoElement.buffered.length-1)):this._syncOnNextMetrics=!0)}_getDesiredPosition(e){return e-this.config.syncToLiveDelta*this._targetLiveEdge}_syncToLiveEdge(e){var t;if(this._videoElement&&null!==(t=this._videoElement)&&void 0!==t&&t.buffered.length){var r=this._getDesiredPosition(e);r>this._videoElement.buffered.start(0)&&r>this._videoElement.currentTime&&(this._videoElement.currentTime=r)}}_onPlaying(){this._stallTS&&(this._stalledTimeRanges.push({startTS:this._stallTS,endTS:Date.now()}),this._stallTS=0)}_onStall(){this._stallTS=Date.now()}_onPlayingTimeFractionRequested(){var e=this._calculatePlayingTimeFraction();this._eventBus.publish(js,e)}_calculatePlayingTimeFraction(){if(!this._startTS)return null;var e=Date.now()-this.config.playingTimeFractionCollectionWindow;this._stalledTimeRanges=this._stalledTimeRanges.filter(t=>{var{endTS:r}=t;return r>e});var t=Date.now()-this._startTS,r=t-this._stalledTimeRanges.reduce((e,t)=>e+(t.endTS-t.startTS),0)-(this._stallTS?Date.now()-this._stallTS:0);return this._startTS=Date.now(),r/t}}(0,Hn.__decorate)([_a.default],Us.prototype,"reset",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onFragmentRequested",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onMetricsAvailable",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onCanPlayThrough",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onPlaylistInfoAvailable",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onPlay",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onPlaying",null),(0,Hn.__decorate)([_a.default],Us.prototype,"_onPlayingTimeFractionRequested",null);var zs={fragmentsParsed:"fragmentParser.fragments.fragmentsParsed",videoFragmentParsed:"fragmentParser.fragments.videoFragmentParsed",audioFragmentParsed:"fragmentParser.fragments.audioFragmentParsed"};_a=Gn("eQOGK");class Vs extends va{constructor(e){super("bufferController",e),Un(this,"_cache",[]),Un(this,"_lastMsn",-1)}append(e){var t=this,r=function(){if(t._cache.length){if(n.msn!==t._lastMsn){var e=n.msn-t.config.saveLastSegmentsCount+1;t._cache=[...t._cache.filter(t=>t.isInitSection||t.msn>=e),n]}else t._cache.push(n);t._lastMsn=n.msn}else n.isInitSection&&(t._cache=[n])};for(var n of e)r()}getAll(){return this._cache}reset(){this._cache=[],this._lastMsn=-1}destroy(){super.destroy(),this._cache=[],this._lastMsn=-1}}Gn("8NFq9"),Hn=Gn("a8VW4");_a=Gn("eQOGK");class qs extends va{constructor(e){super("bufferController",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["buffer","general"]),Un(this,"additionalInfo",{}),Un(this,"_videoElement",null),Un(this,"_checkIntervalId",null),Un(this,"_lastCheckTimestamp",0),Un(this,"_lastFramesTotal",0),Un(this,"_lastFramesDropped",0),Un(this,"_lastFramesPlayed",0),Un(this,"_lastRealFPS",0),Un(this,"_lastPlaybackFPS",0),Un(this,"_lastPlaybackPosition",0),Un(this,"_lastBufferAmount",0),this._logger=zi(e,"Doppio - BufferMetrics")}destroy(){this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId)}setVideoElement(e){this._videoElement=e,this._rearmInterval()}removeVideoElement(){this._videoElement=null,this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId)}_handleConfigUpdated(e){Number.isNaN(e.checkMetricsInterval)||this._rearmInterval()}_rearmInterval(){this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId),this._checkIntervalId=globalThis.setInterval(this._performCheck,this.config.checkMetricsInterval)}_getCurrentBufferAmount(e){if(!this._videoElement)return this._logger.warn("Cannot compute buffer, there is no video element registered"),0;var{currentTime:t,buffered:r}=this._videoElement;return 0===r.length||t>r.end(r.length-1)?0:e?r.end(r.length-1)-t:0}_getCurrentBufferAmountWithoutGaps(e,t){if(!this._videoElement)return this._logger.warn("Cannot compute buffer, there is no video element registered"),0;if(!e)return 0;var{currentTime:r}=this._videoElement;return e.end-r+t.filter(t=>{var{start:r}=t;return r>=e.end}).reduce((e,t)=>e+(t.end-t.start),0)}_performCheck(){var e=this;return xn(function*(){if(!e._videoElement)return e._checkIntervalId&&globalThis.clearInterval(e._checkIntervalId),void e._logger.warn("Cannot compute metrics, there is no video element registered");var{creationTime:t,totalVideoFrames:r,droppedVideoFrames:n}=e._videoElement.getVideoPlaybackQuality(),{buffered:i,currentTime:o,paused:a,duration:s,playbackRate:u}=e._videoElement,l=t/1e3;if(!e._lastCheckTimestamp)return e._lastCheckTimestamp=l,e._lastFramesTotal=r,e._lastFramesDropped=n,e._lastFramesPlayed=r-n,void(e._lastPlaybackPosition=o);var c,d=yield(c=e._eventBus,new Promise(e=>{c.publish(Ls,{}),c.subscribeOnce(As,t=>{e(t)})})),f=(yield(e=>new Promise(t=>{e.publish(Ps,{}),e.subscribeOnce(js,e=>{t(e)})}))(e._eventBus))||0,h=r-n,p=l-e._lastCheckTimestamp,g=o-e._lastPlaybackPosition,v=r-e._lastFramesTotal,m=n-e._lastFramesDropped,_=h-e._lastFramesPlayed,y=v/p,b=v/g,E=e._lastRealFPS-y,O=e._lastPlaybackFPS-b,S=Array(i.length).fill(null).map((e,t)=>{var r={start:i.start(t),end:i.end(t),index:t,isCurrentTimeRange:!1};return(r.start<=o&&o<=r.end||a&&0===t)&&(r.isCurrentTimeRange=!0),r}),w=S.find(e=>{var{isCurrentTimeRange:t}=e;return t})||null,T=e._getCurrentBufferAmount(w),M=T<e.config.bufferEdgeThreshold,L=o>0&&!a&&(T<e.config.bufferStallThreshold||0===g),A=(null==w?void 0:w.index)===S.length-1,P=e._getCurrentBufferAmountWithoutGaps(w,S),j={currentTimestamp:t,currentPlaybackPosition:o,playedVideoFrames:h,totalVideoFramesDelta:v,droppedVideoFramesDelta:m,playedVideoFramesDelta:_,playbackSpeed:u,isOnBufferEdge:M,bufferAmount:T,bufferAmountWithoutGaps:P,latency:0,totalVideoFrames:r,droppedVideoFrames:n,realFPS:y,playbackFPS:b,timeDelta:p,playbackPositionDelta:g,playingTimeFraction:f,realFPSDelta:E,playbackFPSDelta:O,isStallCandidate:L,bufferedTimeRanges:S,currentTimeRange:w,isInLastBufferedRange:A,knownDuration:s,isPaused:a,targetBuffer:d};e._lastCheckTimestamp=l,e._lastFramesTotal=r,e._lastFramesDropped=n,e._lastFramesPlayed=r-n,e._lastRealFPS=y,e._lastPlaybackFPS=b,e._lastPlaybackPosition=o,e._lastBufferAmount=T,e._eventBus.publish(Ea,j),e.additionalInfo=j})()}}(0,Hn.__decorate)([_a.default],qs.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],qs.prototype,"_performCheck",null);var Ws=e=>'video/mp4; codecs="'.concat(e,'"');class Ys extends va{constructor(e){super("bufferController",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["buffer","general"]),Un(this,"_sourceBuffer",null),Un(this,"_isSourceBufferReady",!1),Un(this,"_awaitingForNextSourceBuffer",!1),Un(this,"_isVODMode",!1),Un(this,"_closeOnNextSegment",!1),Un(this,"_currentVideoDuration",Number.POSITIVE_INFINITY),Un(this,"_videoElement",null),Un(this,"_mediaSource",null),Un(this,"_knownObjectURL",""),Un(this,"_mimeType",'video/mp4; codecs="mp4a.40.2,avc1.64001f"'),Un(this,"_shouldRecreateSourceBufferOnStall",!1),Un(this,"_sourceBufferStuckTimer",null),this._logger=zi(e,"Doppio - BufferController"),this._logger.info("Created"),this._eventBus=e,this._bufferCleaner=new ns(this._eventBus),this._bufferMetrics=new qs(this._eventBus),this._bufferStallsDetector=new os(this._eventBus),this._bufferOpsQueue=new is(this._eventBus),this._playbackSpeedController=new Fs(this._eventBus),this._playbackStateController=new Us(this._eventBus),this._bufferChunksCache=new Vs(this._eventBus),this._onFragmentParsedListener=this._eventBus.subscribe(zs.fragmentsParsed,this._onFragmentsParsed),this._onSoftResetRequestedListener=this._eventBus.subscribe(ba,this._onSoftResetRequested),this._onVODPlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.vodDetected,this._onVODPlaylistDetected),this._onSimplePlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.simpleDetected,this._onLivePlaylistDetected),this._onLLPlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.llDetected,this._onLivePlaylistDetected),this._onSourceBufferOperationRequestedListener=this._eventBus.subscribe(Sa,this._onSourceBufferOperationRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Ns.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onEndOfStreamReachedListener=this._eventBus.subscribe(Ta,this._onEndOfStreamReached),this._onResolutionCodecChangeRequestListener=this._eventBus.subscribe(La,this._onResolutionCodecChangeRequest),this._onResolutionChangeListener=this._eventBus.subscribe(ja,this._onResolutionChange),this._onPlaybackStallChangedListener=this._eventBus.subscribe(Oa,this._onPlaybackStallChanged),this._onSourceBufferStuckListener=this._eventBus.subscribe(Aa,this._onSourceBufferStuck),this._gapController=new hs(this._eventBus)}attachVideoElement(e){this._logger.info("Attach video element"),this._bufferMetrics.setVideoElement(e),this._playbackSpeedController.setVideoElement(e),this._gapController.setVideoElement(e),this._bufferCleaner.setVideoElement(e),this._playbackStateController.setVideoElement(e),this._videoElement=e,this._recreateMediaSource()}scheduleSourceBufferRecreation(){this._awaitingForNextSourceBuffer=!0}detachVideoElement(){var e;if(this._logger.info("Detaching video element"),this._eventBus.publish(ba,{}),this._bufferMetrics.removeVideoElement(),this._playbackSpeedController.removeVideoElement(),this._gapController.removeVideoElement(),this._bufferCleaner.removeVideoElement(),this._playbackStateController.setVideoElement(null),"open"===(null===(e=this._mediaSource)||void 0===e?void 0:e.readyState)&&this._videoElement&&this._videoElement.readyState>=this._videoElement.HAVE_METADATA)try{this._logger.verbose("Calling endOfStream of mediaSource"),this._mediaSource.endOfStream()}catch(Ev){this._logger.warn("Error occurred while detaching video element. Ignoring it ".concat(Ev.message))}try{this._mediaSource&&this._sourceBuffer&&([...this._mediaSource.sourceBuffers].includes(this._sourceBuffer)&&(this._logger.debug("Removing sourceBuffer from MediaSource"),this._mediaSource.removeSourceBuffer(this._sourceBuffer)),this._sourceBuffer=null)}catch(Ev){this._logger.error("Failed to reset source buffer ".concat(Ev.message))}if(this._mediaSource&&(this._mediaSource.removeEventListener("sourceopen",this._onSourceBufferOpened),this._mediaSource.removeEventListener("sourceclose",this._onSourceBufferClosed),this._mediaSource.removeEventListener("error",this._onSourceBufferClosed)),this._videoElement){if(this._knownObjectURL){var t=this._knownObjectURL;setTimeout(()=>{this._logger.debug("Revoking Object URL ".concat(t)),globalThis.URL.revokeObjectURL(t)},100)}this._videoElement.src===this._knownObjectURL&&(this._videoElement.removeAttribute("src"),this._videoElement.load())}this._mediaSource=null,this._videoElement=null,this._knownObjectURL="",this._isSourceBufferReady=!1}destroy(){super.destroy(),this._logger.info("Destroy"),this.detachVideoElement(),this._eventBus.unsubscribe(this._onFragmentParsedListener),this._eventBus.unsubscribe(this._onSoftResetRequestedListener),this._eventBus.unsubscribe(this._onSourceBufferOperationRequestedListener),this._eventBus.unsubscribe(this._onVODPlaylistDetectedListener),this._eventBus.unsubscribe(this._onSimplePlaylistDetectedListener),this._eventBus.unsubscribe(this._onLLPlaylistDetectedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onEndOfStreamReachedListener),this._eventBus.unsubscribe(this._onResolutionCodecChangeRequestListener),this._eventBus.unsubscribe(this._onResolutionChangeListener),this._eventBus.unsubscribe(this._onPlaybackStallChangedListener),this._eventBus.unsubscribe(this._onSourceBufferStuckListener),this._gapController.destroy(),this._bufferMetrics.destroy(),this._bufferOpsQueue.destroy(),this._bufferCleaner.destroy(),this._playbackSpeedController.destroy(),this._playbackStateController.destroy(),this._bufferChunksCache.destroy(),this._disarmSourceBufferStuckTimer()}reset(){this._disarmSourceBufferStuckTimer(),this._recreateSourceBuffer(),this._bufferChunksCache.reset()}_onFragmentsParsed(e){var t=this;this._awaitingForNextSourceBuffer&&(this._awaitingForNextSourceBuffer=!1,this._recreateSourceBuffer()),this._bufferOpsQueue.addBufferOperation(()=>{this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration)},()=>{this._logger.warn("Could not set mediaSource duration")},"setMediaSourceDuration");var r=function(e){t._bufferOpsQueue.addBufferOperation(r=>{t._logger.debug("Adding ".concat(e.getMsnPn()," to buffer")),r.appendBuffer(e.data),e.msn>-1&&(t._logger.debug("".concat(e.startTs," -> ").concat(e.endTs," loaded (").concat(e.getMsnPn(),")")),t._eventBus.publish(Ma,e)),t._mediaSource&&e.endTs===t._mediaSource.duration&&t._eventBus.publish(Ta,{})},(r,n)=>{t._logger.error("".concat(e.url," (").concat(e.getMsnPn(),") cannot be added to buffer: ").concat(n))},"appendBuffer")};for(var n of e)r(n);this._sourceBuffer||this._bufferChunksCache.append(e),this._bufferOpsQueue.addBufferOperation(()=>{this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration,this._videoElement&&0===this._videoElement.currentTime&&this._videoElement.buffered.length>0&&this._videoElement.buffered.start(0)>0&&(this._videoElement.currentTime=this._videoElement.buffered.start(0)))},()=>{this._logger.warn("Could not change current time of video")},"setVideoElementStartPosition")}_onSourceBufferOpened(){if(this._disarmSourceBufferStuckTimer(),this._mediaSource){"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration),this._isSourceBufferReady=!0,this._sourceBuffer=this._mediaSource.addSourceBuffer(this._mimeType),this._bufferOpsQueue.setSourceBuffer(this._sourceBuffer);var e=this._bufferChunksCache.getAll();this._bufferChunksCache.destroy(),e.length&&this._onFragmentsParsed(e)}}_recreateSourceBuffer(){this._logger.info("Will recreate source buffer"),this._bufferOpsQueue.immediatelyRecreateSourceBuffer(this._mediaSource),this._videoElement&&(this._videoElement.currentTime=0)}_onResolutionCodecChangeRequest(e){var{codec:t}=e;if(t){var r=Ws(t);r!==this._mimeType&&(this._mimeType=r)}}_onSourceBufferClosed(){this._isSourceBufferReady=!1}_onSoftResetRequested(){this._shouldRecreateSourceBufferOnStall=!1,this._awaitingForNextSourceBuffer=!0,this._playbackStateController.resetPlayingTimeCollector()}_endOfStreamReached(){this._mediaSource&&(this._closeOnNextSegment=!0)}_onSourceBufferOperationRequested(e){this._bufferOpsQueue.addBufferOperation(e)}_onLivePlaylistDetected(){this._isVODMode=!1,this._bufferCleaner.setVODMode(!1),this._gapController.setIsVod(!1),this._currentVideoDuration=Number.POSITIVE_INFINITY,this._playbackSpeedController.resume(),this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration)}_onVODPlaylistDetected(){this._isVODMode=!0,this._bufferCleaner.setVODMode(!0),this._playbackSpeedController.pause(),this._gapController.setIsVod(!0)}_onPlaybackStallChanged(e){e&&this._shouldRecreateSourceBufferOnStall&&(this._logger.info("Will recreate source buffer, because playback stall was detected"),this._onSoftResetRequested())}_onPlaylistInfoAvailable(e){e&&e.playlists&&e.playlists[0].attributes.CODECS&&(this._mimeType=Ws(e.playlists[0].attributes.CODECS),this._bufferOpsQueue.addBufferOperation(e=>{e.changeType(this._mimeType)},()=>{this._logger.warn("Could not change codecs")},"changeType")),("VOD"===e.playlistType||e.endList)&&(this._currentVideoDuration=e.segments.reduce((e,t)=>e+t.duration,0),this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration,this._mediaSource.setLiveSeekableRange(0,this._currentVideoDuration)))}_onEndOfStreamReached(){this._bufferOpsQueue.addBufferOperation(()=>{var e;this._logger.info("Setting endOfStream"),null===(e=this._mediaSource)||void 0===e||e.endOfStream()})}_onResolutionChange(){this.config.recreateSourceBufferOnResolutionChange?(this._logger.info("Will recreate source buffer, because resolution was changed, and config.recreateSourceBufferOnResolutionChange is true"),this._onSoftResetRequested()):this._shouldRecreateSourceBufferOnStall=!0}_onSourceBufferStuck(){this._onSoftResetRequested()}_recreateMediaSource(){this._mediaSource&&(this._mediaSource.removeEventListener("sourceopen",this._onSourceBufferOpened),this._mediaSource.removeEventListener("sourceclose",this._onSourceBufferClosed),this._mediaSource.removeEventListener("error",this._onSourceBufferClosed)),this._mediaSource=new Ys.MediaSource,this._mediaSource.addEventListener("sourceopen",this._onSourceBufferOpened,{once:!0}),this._mediaSource.addEventListener("sourceclose",this._onSourceBufferClosed),this._mediaSource.addEventListener("error",this._onSourceBufferClosed),this._videoElement&&(this._videoElement.src=globalThis.URL.createObjectURL(this._mediaSource)),this._sourceBufferStuckTimer=setTimeout(()=>{this._recreateMediaSource()},this.config.sourceBufferStuckTimeout)}_disarmSourceBufferStuckTimer(){this._sourceBufferStuckTimer&&clearTimeout(this._sourceBufferStuckTimer)}get additionalModules(){return{gapController:this._gapController,bufferMetrics:this._bufferMetrics,playbackSpeed:this._playbackSpeedController}}static get MediaSource(){var e,t;if(null!==(e=window)&&void 0!==e&&e.ManagedMediaSource)return window.ManagedMediaSource;if(null!==(t=window)&&void 0!==t&&t.MediaSource)return window.MediaSource;throw new Error("No Media Source candidates found")}}(0,Hn.__decorate)([_a.default],Ys.prototype,"_onFragmentsParsed",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onSourceBufferOpened",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onResolutionCodecChangeRequest",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onSourceBufferClosed",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onSoftResetRequested",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_endOfStreamReached",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onSourceBufferOperationRequested",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onLivePlaylistDetected",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onVODPlaylistDetected",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onPlaybackStallChanged",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onPlaylistInfoAvailable",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onEndOfStreamReached",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onResolutionChange",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_onSourceBufferStuck",null),(0,Hn.__decorate)([_a.default],Ys.prototype,"_recreateMediaSource",null);class Gs extends Si{}Gn("8NFq9"),Hn=Gn("a8VW4");var Hs="fragmentsFilter.fragmentsReleased",Qs="fragmentsFilter.problemDetected";_a=Gn("eQOGK");class Ks extends va{constructor(e){super("fragmentParser",e),Un(this,"_localFragmentParser",null),Un(this,"_workerFragmentParser",null),Un(this,"_fragmentsCache",[]),Un(this,"_isCacheRequired",!1),this._logger=zi(e,"Doppio - FragmentParser"),this._onFragmentReleasedListener=this._eventBus.subscribe(Hs,this._onFragmentsLoaded),this._onVODPlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.vodDetected,this._onVODPlaylistDetected),this._onSimplePlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.simpleDetected,this._onLivePlaylistDetected),this._onLLPlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.llDetected,this._onLivePlaylistDetected),this._onReleaseFromCacheRequestedListener=this._eventBus.subscribe(ma.fragments.requestReleaseFromCache,this._onReleaseFromCacheRequested)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentReleasedListener),this._eventBus.unsubscribe(this._onVODPlaylistDetectedListener),this._eventBus.unsubscribe(this._onSimplePlaylistDetectedListener),this._eventBus.unsubscribe(this._onLLPlaylistDetectedListener),this._eventBus.unsubscribe(this._onReleaseFromCacheRequestedListener)}_handleConfigUpdated(){}_onReleaseFromCacheRequested(e){var{msn:t}=e,r=this._fragmentsCache.find(e=>e.msn===t);r&&this._eventBus.publish(zs.fragmentsParsed,[r])}_onLivePlaylistDetected(){this._isCacheRequired=!1,this._fragmentsCache=[]}_onVODPlaylistDetected(){this._isCacheRequired=!0}_onFragmentsLoaded(e){var t=this;return xn(function*(){t._logger.verbose("Sending fragment ".concat(e.map(e=>e.getMsnPn())," for parsing")),t._eventBus.publish(zs.fragmentsParsed,e)})()}}(0,Hn.__decorate)([_a.default],Ks.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],Ks.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],Ks.prototype,"_onReleaseFromCacheRequested",null),(0,Hn.__decorate)([_a.default],Ks.prototype,"_onLivePlaylistDetected",null),(0,Hn.__decorate)([_a.default],Ks.prototype,"_onVODPlaylistDetected",null),(0,Hn.__decorate)([_a.default],Ks.prototype,"_onFragmentsLoaded",null),Gn("8NFq9"),Hn=Gn("a8VW4");var Xs=e=>{for(var t=new DataView(e),r=0,n=[];r<e.byteLength;){var i=t.getUint32(r,!1),o={size:i,name:(new TextDecoder).decode(e.slice(r+4,r+8)),payload:e.slice(r+8,r+i)};r+=i,n.push(o)}return n},Js="fragmentsQueue.fragmentReleased";_a=Gn("eQOGK");var $s,Zs,eu="fragmentsBufferEvents.saveData";class tu extends va{constructor(e){super("fragmentsFilter",e),Un(this,"_lastKnownInitSectionNumberOfTracks",null),this._logger=zi(e,"Doppio - FragmentsFilter"),this._onFragmentReleasedListenerToken=this._eventBus.subscribe(Js,this._onFragmentReleasedFromQueue)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentReleasedListenerToken)}_onFragmentReleasedFromQueue(e){var t=[];for(var r of e)if(r.isInitSection)this._parseInitSection(r),t.push(r);else{var n=this._parseMediaFragment(r);this.config.filterOutInconsistentTracks&&!n||t.push(r)}this._eventBus.publish(Hs,t)}_parseInitSection(e){this._logger.debug("Parsing init section");var t=Xs(e.data),r=t.find(e=>{var{name:t}=e;return"moov"===t})||null;if(this._logger.verbose("Found following root boxes: ".concat(t.map(e=>{var{name:t}=e;return t}).join(", "))),r){var n=Xs(r.payload);this._logger.verbose("Found following child of moov boxes: ".concat(n.map(e=>{var{name:t}=e;return t}).join(", ")));var i=n.filter(e=>{var{name:t}=e;return"trak"===t});this._logger.info("Found ".concat(i.length," trak boxes")),this._lastKnownInitSectionNumberOfTracks=i.length}}_parseMediaFragment(e){if(null===this._lastKnownInitSectionNumberOfTracks)return!0;var t=Xs(e.data),r=t.filter(e=>{var{name:t}=e;return"sidx"===t});this._logger.verbose("Found following root boxes: ".concat(t.map(e=>{var{name:t}=e;return t}).join(", ")));var n=t.filter(e=>{var{name:t}=e;return"moof"===t}),i=[],o=!1;for(var a of(r.length>0&&r.length%this._lastKnownInitSectionNumberOfTracks!=0&&(this._logger.warn("Inconsistent media chunk: number of SIDX boxes is invalid, ".concat(r.length," found, ").concat(this._lastKnownInitSectionNumberOfTracks," expected")),i.push("Number of SIDX boxes (".concat(r.length,") is not equal to the known amount of media tracks (").concat(this._lastKnownInitSectionNumberOfTracks,")")),o=!0),n)){var s=Xs(a.payload),u=s.filter(e=>{var{name:t}=e;return"traf"===t});this._logger.verbose("Found following child of moof boxes: ".concat(s.map(e=>{var{name:t}=e;return t}).join(", "))),u.length!==this._lastKnownInitSectionNumberOfTracks&&(this._logger.warn("Inconsistent media chunk: number of TRAF boxes is invalid, ".concat(u.length," found, ").concat(this._lastKnownInitSectionNumberOfTracks," expected")),i.push("Number of TRAF boxes (".concat(u.length,") is not equal to the known amount of media tracks (").concat(this._lastKnownInitSectionNumberOfTracks,")")),o=!0)}return o&&(this._logger.warn("Fragment ".concat(e.getMsnPn()," should be reported")),this._eventBus.publish(Qs,{fragment:e.url.split("/").slice(-1)[0],reason:i.join("; ")}),this._eventBus.publish(eu,{})),o}}(0,Hn.__decorate)([_a.default],tu.prototype,"_onFragmentReleasedFromQueue",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK"),(Zs=$s||($s={})).UNKNOWN="unknown",Zs.INDEPENDENT="independent",Zs.PART="part";class ru{constructor(e){Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["queue"]),Un(this,"_queuedFragments",[]),Un(this,"_additionalInfo",{}),this._eventBus=e,this._logger=zi(e,"Doppio - FragmentsQueue"),this._fragmentRequestedListenerToken=this._eventBus.subscribe(Rs.fragments.fragmentLoadingStarted,this._onFragmentRequested),this._onFragmentsDetectedListenerToken=this._eventBus.subscribe(ma.fragments.fragmentsDetected,this._onFragmentsDetected),this._softResetRequestedListenerToken=this._eventBus.subscribe(ba,this._onSoftResetRequested),this._fragmentLoadedListenerToken=this._eventBus.subscribe(Rs.fragments.fragmentLoaded,this._onFragmentLoaded),this._fragmentAbortedListenerToken=this._eventBus.subscribe(Rs.fragments.fragmentLoadingAborted,this._onFragmentAborted),this._fragmentErrorListenerToken=this._eventBus.subscribe(Rs.fragments.fragmentLoadingError,this._onFragmentAborted),this._onFragmentReleaseFromCacheRequestedToken=this._eventBus.subscribe(ma.fragments.requestReleaseFromCache,this._onFragmentReleasedFromCache),this._onResolutionChangedListenerToken=this._eventBus.subscribe(ja,this._onSoftResetRequested)}getCurrentQueue(){return this._queuedFragments}destroy(){this._eventBus.unsubscribe(this._onFragmentsDetectedListenerToken),this._eventBus.unsubscribe(this._fragmentLoadedListenerToken),this._eventBus.unsubscribe(this._fragmentRequestedListenerToken),this._eventBus.unsubscribe(this._softResetRequestedListenerToken),this._eventBus.unsubscribe(this._onResolutionChangedListenerToken),this._eventBus.unsubscribe(this._fragmentErrorListenerToken),this._eventBus.unsubscribe(this._fragmentAbortedListenerToken),this._eventBus.unsubscribe(this._onFragmentReleaseFromCacheRequestedToken),this.reset()}reset(){this._queuedFragments=[],this.status="Idle"}_onSoftResetRequested(){this.reset()}_onFragmentRequested(e){this._queuedFragments.find(t=>{var{url:r}=t;return e.url===r})?this._logger.warn("Same fragment (".concat(e.getMsnPn(),") was already in queue! Ignoring it")):(this._logger.verbose("Add fragment ".concat(e.getMsnPn()," to queue")),e.goToLifecycleStage("addedToQueue"),this._queuedFragments.push(e),this.status="Awaiting fragments")}_onFragmentLoaded(e){var t=this._queuedFragments.find(t=>{var{msn:r,pn:n}=t;return r===e.msn&&n===e.pn});t?(this._logger.debug("Fragment ".concat(e.getMsnPn()," was resolved finally")),t.data=e.data,this._checkQueue()):this._logger.warn("Received fragment ".concat(e.getMsnPn()," was not in queue. Pls check it"))}_onFragmentReleasedFromCache(e){var{msn:t}=e;this._queuedFragments=this._queuedFragments.filter(e=>e.msn===t),this._checkQueue()}_onFragmentsDetected(e){e.forEach(e=>{var t=this._queuedFragments.find(t=>{var{msn:r,pn:n}=t;return r===e.msn&&n===e.pn});t&&(t.independent=e.independent)}),this._checkQueue()}_onFragmentAborted(e){var t=this._queuedFragments.filter(t=>{var{msn:r}=t;return r<=e.msn});this._queuedFragments=this._queuedFragments.filter(e=>!t.includes(e)),this._checkQueue()}_checkQueue(){if(this._logger.verbose("Checking queue"),this._queuedFragments.length)if(this._queuedFragments[0].data&&this._queuedFragments[0].independent!==$s.UNKNOWN){var e=this._queuedFragments.findIndex(e=>!e.data||e.independent===$s.UNKNOWN);if(-1===e)return this._logger.verbose("Looks like whole queue was resolved"),void this._releaseFragmentsFromQueue(this._queuedFragments);this._logger.verbose("".concat(e," fragments ready. Releasing them"));var t=this._queuedFragments.slice(0,e);this._releaseFragmentsFromQueue(t)}else this._logger.verbose("First queued fragment is empty. Skipping");else this._logger.verbose("Queue is empty. Skipping")}_releaseFragmentsFromQueue(e){this._logger.verbose("Release fragment  ".concat(e.map(e=>e.getMsnPn()),"from queue")),e.forEach(e=>e.goToLifecycleStage("releasedFromQueue")),this._queuedFragments=this._queuedFragments.filter(t=>!e.includes(t)),this._eventBus.publish(Js,e),this.status=this._queuedFragments.length>0?this.status:"Idle"}get additionalInfo(){return Fn(Fn({},this._additionalInfo),{},{awaitingFragments:this.getCurrentQueue().map(e=>Fn(Fn({},e),{},{data:void 0}))})}}(0,Hn.__decorate)([_a.default],ru.prototype,"_onSoftResetRequested",null),(0,Hn.__decorate)([_a.default],ru.prototype,"_onFragmentRequested",null),(0,Hn.__decorate)([_a.default],ru.prototype,"_onFragmentLoaded",null),(0,Hn.__decorate)([_a.default],ru.prototype,"_onFragmentReleasedFromCache",null),(0,Hn.__decorate)([_a.default],ru.prototype,"_onFragmentsDetected",null),(0,Hn.__decorate)([_a.default],ru.prototype,"_onFragmentAborted",null),(0,Hn.__decorate)([_a.default],ru.prototype,"_releaseFragmentsFromQueue",null);var nu,iu,ou,au,su=new class{constructor(){Un(this,"_ooEndpoint","/api/front/v2/logs/streaming")}reportError(e,t){var r=this;return xn(function*(){try{yield fetch(r._ooEndpoint,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({doppioLifecycleError:{errorType:e,context:t}})})}catch(e){}})()}};Gn("8NFq9"),Hn=Gn("a8VW4"),Gn("8NFq9"),Hn=Gn("a8VW4"),Gn("8NFq9"),Hn=Gn("a8VW4"),(iu=nu||(nu={})).UNKNOWN="unknown",iu.LOADING="loading",iu.LOADED="loaded",iu.ABORTED="aborted",iu.ERROR="error",iu.DESTROYED="destroyed",Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK"),(au=ou||(ou={})).FETCH="fetch",au.ABORT="abort",au.DESTROY="destroy",au.DATA_READY="dataReady",au.STATS_READY="statsReady",au.CHANGE_STATE="changeState",au.ERROR="error",au.REDIRECT_DETECTED="redirectDetected";var uu=e=>{var t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t),n=0;return e.forEach(e=>{r.set(e,n),n+=e.length}),r};class lu{constructor(e){Un(this,"requestUrl",""),Un(this,"realUrl",""),Un(this,"mode",""),Un(this,"_dataChunks",[]),Un(this,"_receivedLength",0),Un(this,"_abortController",new AbortController),Un(this,"_startLoadTimestamp",0),Un(this,"_isAborted",!1),this._config=e}abort(){this._isAborted=!0,this._abortController.abort()}fetch(e,t){var r=this;return xn(function*(){try{var n;globalThis.performance&&globalThis.performance.clearResourceTimings&&globalThis.performance.clearResourceTimings(),r._config.onChangeState(nu.LOADING),r._startLoadTimestamp=Date.now(),r.requestUrl=e,r.mode=t,r._receivedLength=0;var i=new Request(r.requestUrl),o={signal:r._abortController.signal};r._config.requestCustomReferer&&(o.headers={"X-Referer":r._config.requestCustomReferer});var a=yield fetch(i,o);r.realUrl=a.url;var s=null===(n=a.body)||void 0===n?void 0:n.getReader();if(!s)throw new Error;for(;;){var{done:u,value:l}=yield s.read();if(u)break;r._dataChunks.push(l),r._receivedLength+=l.length}if(!a.ok&&(!a.status||a.status>399))throw r.error={status:a.status,statusText:a.statusText||r._receivedLength?String.fromCharCode(...uu(r._dataChunks)):""},new Error;var c=uu(r._dataChunks).buffer;r._config.onDataReady("text"!==r.mode?c:new TextDecoder("utf-8").decode(c)),r._config.onStatsReady(r._getNetworkStats()),r.realUrl!==r.requestUrl&&r._config.onRedirectDetected(r.requestUrl,r.realUrl),r._config.onChangeState(nu.LOADED,{realUrl:a.url,status:a.status})}catch(e){if(r._isAborted)return r._config.onStatsReady(r._getNetworkStats()),void r._config.onChangeState(nu.ABORTED);r.error||(r.error={status:-1,statusText:e.toString()}),r._config.onError(r.error),r._config.onChangeState(nu.ERROR,{status:r.error.status})}})()}_getNetworkStats(){var e=Date.now()-this._startLoadTimestamp,t="text"===this.mode?"text":"binary";return((e,t,r,n)=>{var i=((e,t,r)=>{if(!globalThis.performance||!globalThis.performance.getEntriesByName)return null;var n=globalThis.performance.getEntriesByName(e)[0];if(!n)return null;var{connectStart:i,connectEnd:o,domainLookupEnd:a,duration:s,domainLookupStart:u,encodedBodySize:l,responseStart:c,requestStart:d}=n,f=(l||t)/1024,h=s;return globalThis.performance.clearResourceTimings(),{connectDuration:o-i,domainLookupDuration:a-u,sizeInKb:f,ttfb:c-d,downloadDuration:h,calculatedSpeed:f/(h/1e3)*8,type:r,url:e}})(e,r,n);return i||{connectDuration:0,domainLookupDuration:0,sizeInKb:r/1024,ttfb:0,url:e,downloadDuration:t,calculatedSpeed:r/1024/(t/1e3)*8,type:n}})(this.requestUrl,e,this._receivedLength,t)}}var cu=[nu.ERROR,nu.LOADED,nu.ABORTED],du=new Map,fu=function(){var e=xn(function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=du.get(e);if(!r&&t){var n=URL.createObjectURL(new Blob(["".concat(qn('let e;var t;(t=e||(e={})).FETCH="fetch",t.ABORT="abort",t.DESTROY="destroy",t.DATA_READY="dataReady",t.STATS_READY="statsReady",t.CHANGE_STATE="changeState",t.ERROR="error",t.REDIRECT_DETECTED="redirectDetected";const r=e=>{const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let a=0;return e.forEach((e=>{r.set(e,a),a+=e.length})),r};let a;var o;(o=a||(a={})).UNKNOWN="unknown",o.LOADING="loading",o.LOADED="loaded",o.ABORTED="aborted",o.ERROR="error",o.DESTROYED="destroyed";const s=(e,t,r,a)=>{const o=((e,t,r)=>{if(!globalThis.performance||!globalThis.performance.getEntriesByName)return null;const a=globalThis.performance.getEntriesByName(e)[0];if(!a)return null;const{connectStart:o,connectEnd:s,domainLookupEnd:n,duration:i,domainLookupStart:l,encodedBodySize:d,responseStart:c,requestStart:u}=a,h=(d||t)/1024,g=i;return globalThis.performance.clearResourceTimings(),{connectDuration:s-o,domainLookupDuration:n-l,sizeInKb:h,ttfb:c-u,downloadDuration:g,calculatedSpeed:h/(g/1e3)*8,type:r,url:e}})(e,r,a);return o||{connectDuration:0,domainLookupDuration:0,sizeInKb:r/1024,ttfb:0,url:e,downloadDuration:t,calculatedSpeed:r/1024/(t/1e3)*8,type:a}};class $23b27e332a61b135$export$df6d58d46cb3f0ea{requestUrl="";realUrl="";mode="";_dataChunks=[];_receivedLength=0;_abortController=new AbortController;_startLoadTimestamp=0;_isAborted=!1;constructor(e){this._config=e}abort(){this._isAborted=!0,this._abortController.abort()}async fetch(e,t){try{globalThis.performance&&globalThis.performance.clearResourceTimings&&globalThis.performance.clearResourceTimings(),this._config.onChangeState(a.LOADING),this._startLoadTimestamp=Date.now(),this.requestUrl=e,this.mode=t,this._receivedLength=0;const o=new Request(this.requestUrl),s={signal:this._abortController.signal};this._config.requestCustomReferer&&(s.headers={"X-Referer":this._config.requestCustomReferer});const n=await fetch(o,s);this.realUrl=n.url;const i=n.body?.getReader();if(!i)throw new Error;for(;;){const{done:e,value:t}=await i.read();if(e)break;this._dataChunks.push(t),this._receivedLength+=t.length}if(!n.ok&&(!n.status||n.status>399))throw this.error={status:n.status,statusText:n.statusText||this._receivedLength?String.fromCharCode(...r(this._dataChunks)):""},new Error;const l=r(this._dataChunks).buffer;this._config.onDataReady("text"!==this.mode?l:new TextDecoder("utf-8").decode(l)),this._config.onStatsReady(this._getNetworkStats()),this.realUrl!==this.requestUrl&&this._config.onRedirectDetected(this.requestUrl,this.realUrl),this._config.onChangeState(a.LOADED,{realUrl:n.url,status:n.status})}catch(e){if(this._isAborted)return this._config.onStatsReady(this._getNetworkStats()),void this._config.onChangeState(a.ABORTED);this.error||(this.error={status:-1,statusText:e.toString()}),this._config.onError(this.error),this._config.onChangeState(a.ERROR,{status:this.error.status})}}_getNetworkStats(){const e=Date.now()-this._startLoadTimestamp,t="text"===this.mode?"text":"binary";return s(this.requestUrl,e,this._receivedLength,t)}}const n=new Map;self.addEventListener("message",(({data:t})=>{if(t.type)switch(t.type){case e.ABORT:{const e=n.get(t.payload.url);e&&e.abort();break}case e.DESTROY:{const e=n.get(t.payload.url);e&&e.abort(),n.delete(t.payload.url);break}case e.FETCH:{const r=new $23b27e332a61b135$export$df6d58d46cb3f0ea({requestCustomReferer:t.payload.requestCustomReferer,onDataReady:r=>{self.postMessage({type:e.DATA_READY,payload:{binaryData:r,url:t.payload.url}})},onChangeState:(r,a)=>{self.postMessage({type:e.CHANGE_STATE,payload:{newState:r,url:t.payload.url,metadata:a}})},onStatsReady:r=>{self.postMessage({type:e.STATS_READY,payload:{stats:r,url:t.payload.url}})},onError:r=>{self.postMessage({type:e.ERROR,payload:{error:r,url:t.payload.url}})},onRedirectDetected:(t,r)=>{self.postMessage({type:e.REDIRECT_DETECTED,payload:{url:t,responseUrl:r}})}});r.fetch(t.payload.url,t.payload.mode),n.set(t.payload.url,r);break}}}));'))],{type:"application/javascript"}));if(!(r=new Worker(n)))throw new Error;du.set(e,r)}return r||null});return function(){return e.apply(this,arguments)}}(),hu=function(){var e=xn(function*(e){var t=yield fu(e);t&&t.terminate(),du.delete(e)});return function(t){return e.apply(this,arguments)}}();class pu{constructor(e,t){if(Un(this,"data",null),Un(this,"error",null),Un(this,"stats",null),Un(this,"realUrl",""),Un(this,"_state",nu.UNKNOWN),Un(this,"_retriesAmount",0),Un(this,"_timeoutAbortHandler",null),Un(this,"_retryTimeoutHandler",null),Un(this,"_fetcherWorker",null),Un(this,"_fetcherSimple",null),Un(this,"_workerMode",!1),this._eventBus=t,this._logger=zi(this._eventBus,"Doppio - NetworkLoader"),!e.url||!e.onStateChanged)throw new Error("Invalid config");this._workerMode=!!e.workerMode,this._config=e,this._logger.debug("Created with config",e),this._recreateFetcherAndAutoload()}startLoad(){return this._state===nu.UNKNOWN&&(this._armTimeoutAbort(),this._logger.debug("Starting load ".concat(this._config.url)),this._startAsyncLoad(),!0)}cancel(e){var t,r;this._disarmTimeoutAbort(),this._disarmRetryTimeout(),this.error={status:-1,statusText:"Cancelled because of ".concat(null!=e?e:"unknown reason")},cu.includes(this._state)||(this._logger.warn("".concat(this._config.url," loading was cancelled with reason ").concat(e,", current status is ").concat(this._state)),this._workerMode?null===(t=this._fetcherWorker)||void 0===t||t.postMessage({type:ou.ABORT,payload:{url:this._config.url}}):null===(r=this._fetcherSimple)||void 0===r||r.abort())}destroy(){cu.includes(this._state)||(this.cancel("Destroyed"),this._state=nu.DESTROYED),this._disarmTimeoutAbort(),this._disarmRetryTimeout(),this.data=null,this.error=null,this._removeFetcherFromWorker()}_onAbortTimeoutFired(){this._logger.info("".concat(this._config.url," loading timeout")),this.cancel("Loading timeout")}_armRetryTimeout(){this._logger.info("Retry loading ".concat(this._retriesAmount," time")),this._disarmRetryTimeout(),this._setNewState(nu.UNKNOWN),this._retriesAmount++,this._retryTimeoutHandler=globalThis.setTimeout(()=>{this.startLoad()},2**this._retriesAmount)}_disarmRetryTimeout(){this._retryTimeoutHandler&&globalThis.clearTimeout(this._retryTimeoutHandler)}_armTimeoutAbort(){!this._config.loadingTimeout||this._config.loadingTimeout<=0?this._logger.debug("LoadingTimeout is not defined or below zero! Skipping abort timeout arming"):(this._logger.debug("Arming loading abort timeout"),this._timeoutAbortHandler&&(this._logger.debug("Another timeout already armed. Cancel it"),this._disarmTimeoutAbort()),this._timeoutAbortHandler=setTimeout(()=>{this._onAbortTimeoutFired()},this._config.loadingTimeout))}_disarmTimeoutAbort(){this._timeoutAbortHandler&&(this._logger.debug("Disarming abort timeout"),clearTimeout(this._timeoutAbortHandler))}_setNewState(e,t){this._state!==e&&(e===nu.LOADED&&this._logger.verbose("".concat(this._config.url," loading finished")),cu.includes(e)&&(this._eventBus.publish(za.networkRequestSettled,{response:Fn({url:this.url,body:this.data,timestamp:performance.now()},t||{})}),this._removeFetcherFromWorker(),this._disarmTimeoutAbort()),this._logger.verbose("Loading ".concat(this._config.url,", state transition: ").concat(this._state," -> ").concat(e)),[nu.ABORTED,nu.ERROR].includes(e)&&this._state!==nu.DESTROYED&&this._config.maxRetries&&this._config.baseRetryTimeout&&this._retriesAmount<this._config.maxRetries?this._armRetryTimeout():(this._config.onStateChanged(this._state,e,this),this._state=e))}_removeFetcherFromWorker(){var e,t;null!==(e=this._fetcherWorker)&&void 0!==e&&e.removeEventListener("message",this._handleWorkerMessage),null===(t=this._fetcherWorker)||void 0===t||t.postMessage({type:ou.DESTROY,payload:{url:this._config.url}})}_startAsyncLoad(){var e=this;return xn(function*(){var t;if(e._workerMode){var r,n={type:ou.FETCH,payload:{url:e._config.url,mode:e._config.mode,requestCustomReferer:e._config.requestCustomReferer}};null===(r=e._fetcherWorker)||void 0===r||r.postMessage(n)}else null===(t=e._fetcherSimple)||void 0===t||t.fetch(e._config.url,e._config.mode)})()}_recreateFetcherAndAutoload(){var e=this;return xn(function*(){var t,r;if(null!==(t=e._fetcherSimple)&&void 0!==t&&t.abort(),null!==(r=e._fetcherWorker)&&void 0!==r&&r.postMessage({type:ou.DESTROY,payload:{url:e._config.url}}),e._workerMode)try{var n;e._fetcherWorker=yield fu(e._eventBus.getAppId(),!0),null===(n=e._fetcherWorker)||void 0===n||n.addEventListener("message",e._handleWorkerMessage)}catch(Ev){return e._logger.warn("Could not use worker for network request. Fallback to simple mode",{error:Ev}),e._workerMode=!1,void e._recreateFetcherAndAutoload()}else e._fetcherSimple=new lu({requestCustomReferer:e._config.requestCustomReferer,onDataReady:e._handleDataReady,onChangeState:e._setNewState,onStatsReady:e._handleLoadStatsReady,onError:e._handleError,onRedirectDetected:e._handleRedirectDetected});e._config.autoLoad&&(e._logger.debug("AutoLoad config field set to true. Starting load"),globalThis.queueMicrotask(()=>{e.startLoad()}))})()}_handleDataReady(e){this.data=e}_handleLoadStatsReady(e){this.stats=e,this._eventBus.publish(Va.statsReady,e)}_handleError(e){this.error=e,this._logger.warn("Cannot load ".concat(this._config.url),e)}_handleRedirectDetected(e,t){this._eventBus.publish(za.browserRedirectDetected,{requestUrl:e,responseUrl:t})}_handleWorkerMessage(e){var{data:t}=e;if(t.payload.url===this._config.url&&t.type)switch(t.type){case ou.DATA_READY:this._handleDataReady(t.payload.binaryData);break;case ou.CHANGE_STATE:this._setNewState(t.payload.newState,t.payload.metadata);break;case ou.STATS_READY:this._handleLoadStatsReady(t.payload.stats);break;case ou.ERROR:this._handleError(t.payload.error);break;case ou.REDIRECT_DETECTED:this._handleRedirectDetected(t.payload.url,t.payload.responseUrl)}}get url(){return this._config.url}}(0,Hn.__decorate)([_a.default],pu.prototype,"_setNewState",null),(0,Hn.__decorate)([_a.default],pu.prototype,"_handleDataReady",null),(0,Hn.__decorate)([_a.default],pu.prototype,"_handleLoadStatsReady",null),(0,Hn.__decorate)([_a.default],pu.prototype,"_handleError",null),(0,Hn.__decorate)([_a.default],pu.prototype,"_handleRedirectDetected",null),(0,Hn.__decorate)([_a.default],pu.prototype,"_handleWorkerMessage",null),_a=Gn("eQOGK");class gu extends va{constructor(e){super("fragmentLoader",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["loader"]),Un(this,"additionalInfo",{loadingFragments:{}}),Un(this,"_lastRequestedFragments",[]),Un(this,"_pendingFragments",[]),Un(this,"_loaders",[]),this._logger=zi(this._eventBus,"Doppio - FragmentLoader"),this._fragmentsDetectedSubscription=this._eventBus.subscribe(ma.fragments.fragmentsDetected,this._onFragmentsDetected),this._fragmentAddedToBufferSubscription=this._eventBus.subscribe(Ma,this._onFragmentAddedToBuffer),this._fragmentHistoryReadyToPrintSubscription=this._eventBus.subscribe(Ds.fragments.fragmentHistoryReadyForPrint,this._onFragmentHistoryReadyToPrint),this._logger.info("Instance created")}destroy(){super.destroy(),this._loaders.forEach(e=>{e.destroy()}),this._eventBus.unsubscribe(this._fragmentsDetectedSubscription),this._eventBus.unsubscribe(this._fragmentAddedToBufferSubscription),this._eventBus.unsubscribe(this._fragmentHistoryReadyToPrintSubscription),this._logger.info("Destroyed")}_handleConfigUpdated(){}_onFragmentsDetected(e){this.status="Handling new fragments",this._logger.debug("Fragments was requested to load",e.map(e=>e.getMsnPn()));var t=e.filter(e=>!this._lastRequestedFragments.find(t=>t.url===e.url));this._logger.verbose("Actual fragments is",t.map(e=>e.getMsnPn())),this._pendingFragments=this._pendingFragments.concat(t),t.forEach(e=>{this._eventBus.publish(Ds.fragments.fragmentLoadingStarted,e),this.additionalInfo.loadingFragments.url=nu.UNKNOWN,this._addFragmentToQueue(e.url,e.requestedLoadingTimeout,e)}),this._lastRequestedFragments=e}_onFragmentAddedToBuffer(e){e.goToLifecycleStage("addedToBuffer")}_onFragmentLoadAborted(e){e.goToLifecycleStage("loadDataAborted")}_onFragmentHistoryReadyToPrint(e){this._logger.info(e.historyString)}_addFragmentToQueue(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(t=this.config)||void 0===t?void 0:t.fragmentLoadingTimeout,n=arguments.length>2?arguments[2]:void 0;this._logger.verbose("Requesting ".concat(e," to load; Fragment ").concat(n.getMsnPn())),n.goToLifecycleStage("loadDataStart");var i=new pu({url:e,autoLoad:!0,mode:"arrayBuffer",onStateChanged:this._onLoaderStateChanged,loadingTimeout:r,workerMode:this.config.workerMode},this._eventBus);this._loaders.push(i)}_onLoaderStateChanged(e,t,r){if(this.additionalInfo.loadingFragments[r.url]=t,[nu.LOADED,nu.ERROR,nu.ABORTED].includes(t)){this._logger.verbose("Loader state changed: ".concat(e," -> ").concat(t));var n=this._pendingFragments.find(e=>e.url===r.url);n&&(n.stats=r.stats,n.data=r.data),n?(r.error&&(n.error=r.error),t===nu.LOADED&&(this._logger.debug("".concat(r.url," fragment downloaded (").concat(n.getMsnPn(),")")),n.goToLifecycleStage("loadDataEnd"),delete this.additionalInfo.loadingFragments[r.url],this._eventBus.publish(Ds.fragments.fragmentLoaded,n)),t===nu.ERROR&&(this._lastRequestedFragments=this._lastRequestedFragments.filter(e=>e.url!==r.url),this._logger.debug("".concat(r.url," fragment loading error (").concat(n.getMsnPn(),")")),this._onFragmentLoadAborted(n),this._eventBus.publish(Ds.fragments.fragmentLoadingError,n)),t===nu.ABORTED&&(this._lastRequestedFragments=this._lastRequestedFragments.filter(e=>e.url!==r.url),this._logger.debug("".concat(r.url," fragment loading aborted (").concat(n.getMsnPn(),")")),this._onFragmentLoadAborted(n),this._eventBus.publish(Ds.fragments.fragmentLoadingError,n)),this._pendingFragments=this._pendingFragments.filter(e=>e!==n),this._loaders=this._loaders.filter(e=>e!==r),this.status=this._loaders.length?"Loading fragments":"Idle"):this._logger.warn("Downloaded fragment was not even planned. Ignoring it",{url:r.url})}}}(0,Hn.__decorate)([_a.default],gu.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],gu.prototype,"_onFragmentsDetected",null),(0,Hn.__decorate)([_a.default],gu.prototype,"_onFragmentAddedToBuffer",null),(0,Hn.__decorate)([_a.default],gu.prototype,"_onFragmentLoadAborted",null),(0,Hn.__decorate)([_a.default],gu.prototype,"_onFragmentHistoryReadyToPrint",null),(0,Hn.__decorate)([_a.default],gu.prototype,"_onLoaderStateChanged",null),Gn("8NFq9"),Hn=Gn("a8VW4"),Gn("8NFq9"),Hn=Gn("a8VW4");var vu=e=>{try{var t=new URL(e);return Boolean(t.origin)}catch(e){return!1}};_a=Gn("eQOGK");class mu{constructor(e,t,r){var n;Un(this,"_logger",null),Un(this,"_shouldLogHistory",!1),Un(this,"_history",[]),Un(this,"_hasLifecycleEnded",!1),Un(this,"_isStuckTimer",null),Un(this,"_lastTs",Date.now()),Object.assign(this,e),this._eventBus=t,this._shouldLogHistory=r||!1,t&&(this._logger=zi(t,"Doppio - Fragment")),this.duration=e.duration,this.msn=e.msn,this.pn=e.pn,e.playlistUrl||e.fragmentUrl?this.url=mu._buildUrl(e.playlistUrl,e.fragmentUrl):this.url=e.url,null!==(n=this._logger)&&void 0!==n&&n.verbose("Fragment ".concat(this.getMsnPn()," created")),this.goToLifecycleStage("created")}getMsnPn(){return"".concat(this.msn,"/").concat(this.pn||0)}goToLifecycleStage(e){if(this._clearStuckTimer(),this._shouldLogHistory&&!this._hasLifecycleEnded){var t=Date.now();this._history.push({event:e,timeSincePreviousEvent:t-this._lastTs}),this._lastTs=t,"loadDataAborted"===e?(this._hasLifecycleEnded=!0,this._publishHistoryReadyForPrint("Fragments lifecycle: ABORTED")):"addedToBuffer"===e?(this._hasLifecycleEnded=!0,this._publishHistoryReadyForPrint("Fragments lifecycle: SUCCESS")):this._isStuckTimer=setTimeout(this._handleFragmentStuck,3e3)}}static _buildUrl(e,t){if(vu(t))return t;var r=new URL(e);if(t.startsWith("/"))return"".concat(r.origin).concat(t);var n=r.pathname.split("/");return n.pop()||n.pop(),"".concat(r.origin,"/").concat(n.concat(t).join("/"))}_handleFragmentStuck(){this._publishHistoryReadyForPrint("Fragments lifecycle: STUCK")}_publishHistoryReadyForPrint(e){var t;null===(t=this._eventBus)||void 0===t||t.publish(Ds.fragments.fragmentHistoryReadyForPrint,{historyString:"".concat(e," ").concat(this.getMsnPn(),":\n").concat(this._history.map(e=>"Event: ".concat(e.event,", ").concat(e.timeSincePreviousEvent,"ms since previous event")).join("\n"))})}_clearStuckTimer(){this._isStuckTimer&&clearTimeout(this._isStuckTimer)}}(0,Hn.__decorate)([_a.default],mu.prototype,"_handleFragmentStuck",null),Gn("8NFq9"),Hn=Gn("a8VW4");var _u={},yu={};function bu(e,t){return(yu=bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e}).__esModule=!0,yu.default=yu,bu(e,t)}(yu=bu).__esModule=!0,yu.default=yu,(_u=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yu(e,t)}).__esModule=!0,_u.default=_u;var Eu=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),Ou={};function Su(){return Ou=Su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ou.__esModule=!0,Ou.default=Ou,Su.apply(null,arguments)}(Ou=Su).__esModule=!0,Ou.default=Ou;var wu,Tu,Mu={};(Mu=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}).__esModule=!0,Mu.default=Mu,Tu="undefined"!=typeof window?window:void 0!==Vn?Vn:"undefined"!=typeof self?self:{},wu=Tu;var Lu=Cn.hp;function Au(e){for(var t,r=(t=e,qn(wu).atob?qn(wu).atob(t):Lu.from(t,"base64").toString("binary")),n=new Uint8Array(r.length),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}var Pu=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return qn(_u)(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Eu),ju=String.fromCharCode(9),Du=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),r={};return t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),r},Ru=function(e){for(var t,r=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=r.length;i--;)""!==r[i]&&((t=/([^=]*)=(.*)/.exec(r[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},Nu=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}qn(_u)(t,e);var r=t.prototype;return r.push=function(e){var t,r,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,r){var n=r(e);return n===e?t:t.concat([n])},[e]).forEach(function(e){for(var i=0;i<n.customParsers.length;i++)if(n.customParsers[i].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void n.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void n.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return r=qn(Ou)(Du(t[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var o=Ru(t[1]);o.URI&&(r.uri=o.URI),o.BYTERANGE&&(r.byterange=Du(o.BYTERANGE))}n.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=Ru(t[1]),r.attributes.RESOLUTION){var a=r.attributes.RESOLUTION.split("x"),s={};a[0]&&(s.width=parseInt(a[0],10)),a[1]&&(s.height=parseInt(a[1],10)),r.attributes.RESOLUTION=s}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}n.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=Ru(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=Ru(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void n.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=Ru(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"skip"}).attributes=Ru(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(ju)),void n.trigger("data",r);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"part"}).attributes=Ru(t[1]),["DURATION"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=/YES/.test(r.attributes[e]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=Du(r.attributes.BYTERANGE)),void n.trigger("data",r);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"server-control"}).attributes=Ru(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=/YES/.test(r.attributes[e]))}),void n.trigger("data",r);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"part-inf"}).attributes=Ru(t[1]),["PART-TARGET"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))}),void n.trigger("data",r);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"preload-hint"}).attributes=Ru(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){if(r.attributes.hasOwnProperty(e)){r.attributes[e]=parseInt(r.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[t]=r.attributes[e],delete r.attributes[e]}}),void n.trigger("data",r);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"rendition-report"}).attributes=Ru(t[1]),["LAST-MSN","LAST-PART"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseInt(r.attributes[e],10))}),void n.trigger("data",r);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},r.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push(function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:o}),!0})},r.addTagMapper=function(e){var t=e.expression,r=e.map;this.tagMappers.push(function(e){return t.test(e)?r(e):e})},t}(Eu),Iu=function(e){var t={};return Object.keys(e).forEach(function(r){var n;t[(n=r,n.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()}))]=e[r]}),t},Cu=function(e){var t=e.serverControl,r=e.targetDuration,n=e.partTargetDuration;if(t){var i="#EXT-X-SERVER-CONTROL",o="holdBack",a="partHoldBack",s=r&&3*r,u=n&&2*n;r&&!t.hasOwnProperty(o)&&(t[o]=s,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+s+")."})),s&&t[o]<s&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+s+")"}),t[o]=s),n&&!t.hasOwnProperty(a)&&(t[a]=3*n,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[a]+")."})),n&&t[a]<u&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+t[a]+") to partTargetDuration * 2 ("+u+")."}),t[a]=u)}},ku=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new Pu,t.parseStream=new Nu,t.lineStream.pipe(t.parseStream);var r,n,i=qn(Mu)(t),o=[],a={},s=!1,u=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var d=0,f=0;return t.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&r&&(a.map=r),!a.key&&n&&(a.key=n),a.timeline||"number"!=typeof c||(a.timeline=c),t.manifest.preloadSegment=a)}),t.parseStream.on("data",function(e){var t,h;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(e.offset=d)),"offset"in e&&(a.byterange=t,t.offset=e.offset),d=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Au(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange),n&&(r.key=n)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(a.attributes||(a.attributes={}),qn(Ou)(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).default?h.autoselect=!0:h.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),a.dateTimeString=e.dateTimeString,a.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,Cu.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data},skip:function(){this.manifest.skip=Iu(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;s=!0;var r=this.manifest.segments.length,n=Iu(e.attributes);a.parts=a.parts||[],a.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=f),f=n.byterange.offset+n.byterange.length);var i=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+i+" for segment #"+r,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(e,r){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+r+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var t=this.manifest.serverControl=Iu(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Cu.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,r=Iu(e.attributes),n=r.type&&"PART"===r.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=n?f:0,n&&(f=r.byterange.offset+r.byterange.length)));var i=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t,e.attributes,["TYPE","URI"]),r.type)for(var o=0;o<a.preloadHints.length-1;o++){var s=a.preloadHints[o];s.type&&s.type===r.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t+" has the same TYPE "+r.type+" as preload hint #"+o})}},"rendition-report":function(){var t=Iu(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var r=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];s&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+r,e.attributes,n)},"part-inf":function(){this.manifest.partInf=Iu(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Cu.call(this,this.manifest)}}[e.tagType]||u).call(i)},uri:function(){a.uri=e.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),n&&(a.key=n),a.timeline=c,r&&(a.map=r),f=0,a={}},comment:function(){},custom:function(){e.segment?(a.custom=a.custom||{},a.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)}),t}qn(_u)(t,e);var r=t.prototype;return r.warnOnMissingAttributes_=function(e,t,r){var n=[];r.forEach(function(e){t.hasOwnProperty(e)||n.push(e)}),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n"),this.trigger("end")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Eu);_a=Gn("eQOGK");var xu,Bu,Fu,Uu,zu=(e,t)=>e.reduce((e,t)=>(t.startTs=e.prevStart,t.endTs=t.startTs+t.duration,e.prevStart=t.endTs,e.parts.push(t),e),{parts:[],prevStart:t}).parts;class Vu extends va{constructor(e,t,r){super(t,r),Un(this,"_lastPlaylistContent",""),Un(this,"_samePlaylistsCount",0),Un(this,"_isActive",!0),Un(this,"_currentPlaylistLoader",null),Un(this,"_url",null),this._logger=zi(r,"Doppio - ".concat(e)),this._lifecycleEventReporter=cs("playlistRotator",this._eventBus),this._logger.info("Instance created")}destroy(){super.destroy(),this._isActive=!1,this._logger.info("Destroyed")}_onPlaylistLoadingStateChanged(e,t){var r,n,i,o,a;if(this._isActive){if(!this._currentPlaylistLoader||[nu.ABORTED,nu.ERROR].includes(t))return this._lifecycleEventReporter("Loading error reported, ".concat(null===(r=this._currentPlaylistLoader)||void 0===r?void 0:r.error)),this._logger.warn("Playlist loader reported ".concat(t===nu.ERROR?"error":"as aborted"," (").concat((null===(n=this._currentPlaylistLoader)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.statusText)||"no error"," with status ").concat((null===(i=this._currentPlaylistLoader)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.statusText)||"no status","). Planning next load")),this._eventBus.publish(ma.playlists.playlistLoadingError,{error:null===(o=this._currentPlaylistLoader)||void 0===o?void 0:o.error}),t===nu.ERROR&&"4"===(null===(a=this._currentPlaylistLoader)||void 0===a||null===(a=a.error)||void 0===a?void 0:a.status.toString()[0])&&(this._logger.warn("Playlist loading reported 4xx status. Requesting start over"),this._eventBus.publish(Na,{})),this._currentPlaylistLoader=null,void this._planNextLoad();if(t===nu.LOADED){if(!this._isPlaylistValid(this._currentPlaylistLoader.data))return this._logger.warn("Playlist seems to be invalid. Plan next load"),this._currentPlaylistLoader=null,void this._planNextLoad();this._eventBus.publish(ma.playlists.playlistLoaded,{originalUrl:this._url,realUrl:this._currentPlaylistLoader.realUrl,stats:this._currentPlaylistLoader.stats});var s=this._currentPlaylistLoader.data,u=this._isPlaylistChanged(s);if(this._currentPlaylistLoader=null,!u)return this._logger.warn("Loaded playlist is identical to previous one. Skipping it"),void this._planNextLoad();var l=this._parsePlaylist(s);if(!l)return this._logger.warn("Empty playlist parse result! Should restart"),void this._eventBus.publish(Na,{});this._eventBus.publish(ma.playlists.playlistInfo,l),this._lifecycleEventReporter("Playlist loaded"),this._handleParsedPlaylist(l)}}else this._logger.warn("Loader was destroyed, but we are trying to load handle playlist load state change!")}_isPlaylistValid(e){return Boolean(null==e?void 0:e.trim().length)&&(null==e?void 0:e.includes("#EXT-X-VERSION"))}_isPlaylistChanged(e){return this._lastPlaylistContent!==e}_isPlaylistUpToDate(e){if(void 0!==this.config.equalPlaylistsAmountToDecline&&this.config.equalPlaylistsAmountToDecline<1)return!0;if(e===this._lastPlaylistContent){this._samePlaylistsCount++;var{equalPlaylistsAmountToDecline:t=2}=this.config;if(this._samePlaylistsCount>=t)return!1}else this._samePlaylistsCount=0;return this._lastPlaylistContent=e,!0}_parsePlaylist(e){this._logger.verbose("Parsing manifest");try{var t=new ku;t.push(e),t.end();var{manifest:r}=t;this._logger.verbose("Manifest parsed");var n=Array.isArray(null==r?void 0:r.playlists)&&r.playlists.length>0,i=Array.isArray(null==r?void 0:r.segments)&&r.segments.length>0;return n||i||su.reportError("Playlist seems to be parsed invalid",{playlistContent:e,playlistUrl:this._url,parsedPlaylistResult:r}),function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.mediaSequence,o=e.segments.map((e,t)=>Fn(Fn({},e),{},{uri:e.uri,msnNumber:i+t,partNumber:0,parts:((null==e?void 0:e.parts)||[]).map((e,r)=>Fn(Fn({},e),{},{msnNumber:i+t,partNumber:r}))})).map(e=>(e.parts=e.dateTimeObject?zu(e.parts,e.dateTimeObject.getTime()/1e3):e.parts,e)),a=i+o.length,s=((null===(t=e.preloadSegment)||void 0===t?void 0:t.parts)||[]).map((e,t)=>Fn(Fn({},e),{},{msnNumber:a,partNumber:t})),u=((null===(r=e.preloadSegment)||void 0===r?void 0:r.preloadHints)||[]).map((e,t)=>Fn(Fn({},e),{},{msnNumber:a,partNumber:t+s.length})),l=o.slice(-1)[0],c=Fn(Fn({},e.preloadSegment),{},{parts:e.preloadSegment&&l.dateTimeObject?zu(s,l.dateTimeObject.getTime()/1e3+l.duration):s,preloadHints:u,msnNumber:a,partNumber:0}),d=Fn(Fn({},e),{},{segments:o,preloadSegment:c});return n.partHoldBack&&(d.partHoldBack=n.partHoldBack),d}(r,{partHoldBack:this.config.partHoldBack?this.config.partHoldBack/1e3:void 0})}catch(zn){return su.reportError("Could not parse playlist",{playlistContent:e,playlistUrl:this._url}),null}}_isMultiVariantPlaylist(e){return e.playlists&&(!e.segments||Array.isArray(e.segments)&&0===e.segments.length)}_isVODPlaylist(e){return"VOD"===e.playlistType||e.endList}_isSimplePlaylist(e){return!this._isLowLatencyPlaylist(e)&&!this._isVODPlaylist(e)}_isLowLatencyPlaylist(e){return Boolean(e.partInf)}_handleFragmentsDetected(e){this._logger.verbose("Detected fragments",e.map(e=>e.getMsnPn())),this._logger.debug("Fragments was detected and extracted. Emitting it"),this._lifecycleEventReporter("Found fragments ".concat(e.map(e=>{var{url:t}=e;return t}).join(","))),this._eventBus.publish(ma.fragments.fragmentsDetected,e)}_handleLLManifestDetected(e){this._logger.debug("Low-latency playlist detected. Emitting it"),this._eventBus.publish(ma.playlistType.llDetected,e)}_handleVODPlaylist(e){this._logger.debug("VOD playlist detected. Emitting it"),this._eventBus.publish(ma.playlistType.vodDetected,e)}_handleMultivariantManifestDetected(e){var t=e.playlists.reduce((e,t)=>(e[t.attributes.NAME]={name:t.attributes.NAME,bitrate:t.attributes.BANDWIDTH,url:t.uri,width:t.attributes.RESOLUTION.width,height:t.attributes.RESOLUTION.height,fps:t.attributes["FRAME-RATE"]},e),{});this._logger.verbose("Variants detected",t),this._logger.debug("Multivariant playlist detected. Emitting it"),this._eventBus.publish(ma.playlistType.multivariantDetected,t)}_handleSimplePlaylistDetected(e){this._logger.debug("Simple playlist detected. Emitting it"),this._eventBus.publish(ma.playlistType.simpleDetected,e)}}(0,Hn.__decorate)([_a.default],Vu.prototype,"_onPlaylistLoadingStateChanged",null),_a=Gn("eQOGK");class qu extends Vu{constructor(e,t){var{url:r,startManifest:n,initialMSN:i,initialPN:o,lastLoadedFragment:a}=t;super("LLPlaylistRotationController","playlistLoader",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["loader"]),Un(this,"_playlistLoaderTimeout",null),Un(this,"_nextMSN",-1),Un(this,"_nextPN",-1),Un(this,"_partHoldBack",-1),Un(this,"_lastLoadedFragment",null),Un(this,"_awaitingFragmentURL",null),Un(this,"_hasLoadedInitialAmount",!1),this._lifecycleEventReporter("Created"),this._url=r,this._lastLoadedFragment=a,n?this._handleParsedPlaylist(n):(this._nextMSN=Number.isFinite(i)?i:-1,this._nextPN=Number.isFinite(o)?o:-1,this._loadNextPlaylist()),this._onSegmentLoadedListener=this._eventBus.subscribe(Ds.fragments.fragmentLoaded,this._onFragmentFinished),this._onSegmentFailedListener=this._eventBus.subscribe(Ds.fragments.fragmentLoadingError,this._onFragmentFinished),this._onSegmentAbortedListener=this._eventBus.subscribe(Ds.fragments.fragmentLoadingAborted,this._onFragmentFinished),this._onFragmentAddedListener=this._eventBus.subscribe(Ma,this._onFragmentAdded),this.config.targetBufferMultiplier&&this.config.targetBufferMultiplier<1&&this._logger.warn("Target buffer multiplier set to value lower than 1. It is unsafe to load less than target-duration, forcing no multiplier instead")}destroy(){var e;this._isActive=!1,super.destroy(),null!==(e=this._currentPlaylistLoader)&&void 0!==e&&e.destroy(),this._currentPlaylistLoader=null,this._logger.info("Destroy controller"),this._eventBus.unsubscribe(this._onSegmentLoadedListener),this._eventBus.unsubscribe(this._onSegmentAbortedListener),this._eventBus.unsubscribe(this._onSegmentFailedListener),this._eventBus.unsubscribe(this._onFragmentAddedListener),this._lifecycleEventReporter("Destroyed")}abortCurrentPlaylistLoading(){this._logger.info("Aborting current loading playlist")}setURL(e,t){var r;t?this._url=e:(this._logger.info("Setting new url ".concat(e)),null!==(r=this._currentPlaylistLoader)&&void 0!==r&&r.destroy(),this._url=e,this._nextPN=-1,this._nextMSN=-1,this._loadNextPlaylist())}_handleConfigUpdated(e){if(e.equalPlaylistsAmountToDecline&&(this._samePlaylistsCount=0),!1===e.lowLatencyMode){var t=this._parsePlaylist(this._lastPlaylistContent);t?this._handleSimplePlaylistDetected(t):this._eventBus.publish(Na,{})}}_loadNextPlaylist(){var e;if(this._isActive){var{playlistLoadingTimeout:t}=this.config;this._logger.debug("Loading next playlist"),this._lifecycleEventReporter("Loading next playlist with url ".concat(this._url)),this.status="Loading playlist",this._currentPlaylistLoader&&this._currentPlaylistLoader.cancel("Another playlist with url ".concat(this._url," scheduled to load"));var r=this._buildUrl();this._currentPlaylistLoader=new pu({url:r,loadingTimeout:t,autoLoad:!0,mode:"text",onStateChanged:this._onPlaylistLoadingStateChanged,workerMode:this.config.workerMode,requestCustomReferer:this.config.sendCustomRefererHeader?null===(e=Qn().location)||void 0===e?void 0:e.href:void 0},this._eventBus),this._eventBus.publish(ma.playlists.playlistRequested,{})}else this._logger.warn("Loader was destroying, but we trying to load next playlist!")}_handleParsedPlaylist(e){var t,r,n,i,o,a,s,u;this._lifecycleEventReporter("Playlist parsed");var l=Math.max(this.config.targetBufferMultiplier,1);if(this._partHoldBack=Cs(e,e.targetDuration||2)*l,this._isMultiVariantPlaylist(e))this._handleMultivariantManifestDetected(e);else if(this._isSimplePlaylist(e))this._handleSimplePlaylistDetected(e);else if(this._isVODPlaylist(e))this._handleVODPlaylist(e);else{var c=0===(e.preloadSegment.parts||[]).length,d=e.segments.flatMap(t=>t.parts.map(t=>{var r,{uri:n,independent:i,partNumber:o,startTs:a,endTs:s,msnNumber:u,duration:l}=t;return new mu({url:n,independent:i?$s.INDEPENDENT:$s.PART,msn:u,pn:o,duration:l,isTransmuxingBypassRequested:!(null===(r=e.segments[0].map)||void 0===r||!r.uri),startTs:a,endTs:s},this._eventBus,this.config.shouldLogFragmentsHistory)})).concat((e.preloadSegment.parts||[]).map(t=>{var r,{uri:n,independent:i=!1,msnNumber:o,partNumber:a,startTs:s,endTs:u,duration:l}=t;return new mu({url:n,independent:i?$s.INDEPENDENT:$s.PART,msn:o,pn:a,duration:l,isTransmuxingBypassRequested:!(null===(r=e.segments[0].map)||void 0===r||!r.uri),startTs:s,endTs:u},this._eventBus,this.config.shouldLogFragmentsHistory)})).filter(e=>{var{msn:t,pn:r}=e;return!this._hasLoadedInitialAmount||t>this._nextMSN||t===this._nextMSN&&r>=this._nextPN}),f=d.reverse(),h=f.reduce((e,t)=>(e.currentDuration<this._partHoldBack&&(e.currentIndex+=1,e.currentDuration+=t.duration),e),{currentDuration:0,currentIndex:-1}).currentIndex,p=this._lastLoadedFragment?f.findIndex(e=>{var t;return(e.startTs||0)<((null===(t=this._lastLoadedFragment)||void 0===t?void 0:t.endTs)||0)}):-1,g=Math.min(f.length,Math.max(h,p)+this.config.additionalStartParts);this._logger.debug("Minimal part ".concat(null===(t=f[g])||void 0===t?void 0:t.msn,":").concat(null===(r=f[g])||void 0===r?void 0:r.pn,"(").concat(new Date((null===(n=f[g])||void 0===n?void 0:n.startTs)||0),")"));var v=f.findIndex((e,t)=>{var{independent:r}=e;return t>=g&&r===$s.INDEPENDENT});-1===v&&(v=f.length-1),this._logger.debug("Part to start load from: ".concat(null===(i=f[v])||void 0===i?void 0:i.msn,":").concat(null===(o=f[v])||void 0===o?void 0:o.pn));var m=v>-1?f.slice(0,v+1).reverse():d;this.config.blockingMode===sa.WAIT_FOR_PREFETCH_SEGMENT&&Array.isArray(e.preloadSegment.preloadHints)&&e.preloadSegment.preloadHints.length&&(this._awaitingFragmentURL=(null===(a=e.preloadSegment.preloadHints[0])||void 0===a?void 0:a.uri)||null,m.push(...e.preloadSegment.preloadHints.map(t=>{var r,{uri:n,msnNumber:i,partNumber:o}=t;return new mu({url:n,independent:$s.UNKNOWN,msn:i,pn:o,duration:0,isTransmuxingBypassRequested:!(null===(r=e.segments[0].map)||void 0===r||!r.uri)},this._eventBus,this.config.shouldLogFragmentsHistory)}))),null!==(s=e.segments[0].map)&&void 0!==s&&s.uri&&m.unshift(new mu({playlistUrl:this._url||"",fragmentUrl:null===(u=e.segments[0].map)||void 0===u?void 0:u.uri,duration:0,independent:$s.INDEPENDENT,msn:-1,pn:-1,isTransmuxingBypassRequested:!0,isInitSection:!0},this._eventBus,this.config.shouldLogFragmentsHistory)),this._handleFragmentsDetected(m),this._hasLoadedInitialAmount=!0,this._nextMSN=e.mediaSequence+e.segments.length,this._nextPN=(e.preloadSegment.parts||[]).length,this.additionalInfo.msn=this._nextMSN,this.additionalInfo.pn=this._nextPN,this.status="Awaiting fragment to load next playlist",c&&this._eventBus.publish(ma.playlists.lastPlaylistOfSegmentLoaded,{}),this.config.blockingMode!==sa.WAIT_FOR_PLAYLIST||this._loadNextPlaylist()}}_planNextLoad(){this._playlistLoaderTimeout=Qn().setTimeout(()=>{this._loadNextPlaylist()},this.config.retryLowLatencyPlaylistTimeout)}_buildUrl(){if(-1===this._nextPN||-1===this._nextMSN)return this._url||"";if(!this._url)return"";var e=new URL(this._url);return e.searchParams.set("_HLS_msn","".concat(this._nextMSN)),e.searchParams.set("_HLS_part","".concat(this._nextPN)),e.toString()}_onFragmentFinished(e){this._logger.debug("".concat(e.startTs," -> ").concat(e.endTs," loaded (").concat(e.getMsnPn(),")")),this.config.blockingMode===sa.WAIT_FOR_PREFETCH_SEGMENT&&this._awaitingFragmentURL===e.url&&(this._logger.debug("Prefetch segment is ready now, loading next playlist"),this._loadNextPlaylist())}_onFragmentAdded(e){this._lastLoadedFragment=e}}(0,Hn.__decorate)([_a.default],qu.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],qu.prototype,"_onFragmentFinished",null),(0,Hn.__decorate)([_a.default],qu.prototype,"_onFragmentAdded",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class Wu extends Vu{constructor(e,t,r){super("SimplePlaylistRotationController","playlistLoader",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["loader"]),Un(this,"additionalInfo",{}),Un(this,"_playlistLoaderTimeout",null),Un(this,"_lastTargetDuration",2),this._lifecycleEventReporter("Created"),this._url=t,r?this._handleParsedPlaylist(r):this._loadNextPlaylist()}destroy(){var e;this._isActive=!1,super.destroy(),null!==(e=this._currentPlaylistLoader)&&void 0!==e&&e.destroy(),this._currentPlaylistLoader=null,this._logger.info("Destroy controller"),this._playlistLoaderTimeout&&clearTimeout(this._playlistLoaderTimeout),this._lifecycleEventReporter("Destroyed")}abortCurrentPlaylistLoading(){var e;this._logger.info("Aborting current loading playlist"),null===(e=this._currentPlaylistLoader)||void 0===e||e.destroy()}setURL(e,t){var r;t?this._url=e:(this._logger.info("Setting new url ".concat(e)),null!==(r=this._currentPlaylistLoader)&&void 0!==r&&r.destroy(),this._url=e,this._loadNextPlaylist())}_handleConfigUpdated(e){e.equalPlaylistsAmountToDecline&&(this._samePlaylistsCount=0)}_loadNextPlaylist(){var e;if(this._isActive){var{playlistLoadingTimeout:t}=this.config;this._logger.debug("Loading next playlist"),this._lifecycleEventReporter("Loading next playlist with url ".concat(this._url)),this.status="Loading playlist",this._currentPlaylistLoader&&this._currentPlaylistLoader.cancel("Another playlist with url ".concat(this._url," scheduled to load")),this._url&&(this._currentPlaylistLoader=new pu({url:this._url,loadingTimeout:t,autoLoad:!0,mode:"text",onStateChanged:this._onPlaylistLoadingStateChanged,workerMode:this.config.workerMode,requestCustomReferer:this.config.sendCustomRefererHeader?null===(e=Qn().location)||void 0===e?void 0:e.href:void 0},this._eventBus),this._eventBus.publish(ma.playlists.playlistRequested,{}))}else this._logger.warn("Loader was destroying, but we trying to load next playlist!")}_handleParsedPlaylist(e){var t;if(this._lifecycleEventReporter("Playlist parsed"),this._isMultiVariantPlaylist(e))this._handleMultivariantManifestDetected(e);else if(this._isLowLatencyPlaylist(e)&&this.config.lowLatencyMode)this._handleLLManifestDetected(e);else if(this._isVODPlaylist(e))this._handleVODPlaylist(e);else if(this._eventBus.publish(ma.playlists.lastPlaylistOfSegmentLoaded,{}),this._url){var r=this._url;this._lastTargetDuration=e.targetDuration||2;var n=e.segments.map(t=>{var n;return new mu({fragmentUrl:t.uri,playlistUrl:r,duration:t.duration,independent:$s.INDEPENDENT,msn:t.msnNumber,pn:t.partNumber,isTransmuxingBypassRequested:!(null===(n=e.segments[0].map)||void 0===n||!n.uri)},this._eventBus,this.config.shouldLogFragmentsHistory)});null!==(t=e.segments[0])&&void 0!==t&&null!==(t=t.map)&&void 0!==t&&t.uri&&n.unshift(new mu({fragmentUrl:e.segments[0].map.uri,playlistUrl:r,independent:$s.INDEPENDENT,msn:-1,pn:-1,isTransmuxingBypassRequested:!0,duration:0,isInitSection:!0},this._eventBus,this.config.shouldLogFragmentsHistory)),this._handleFragmentsDetected(n),this._planNextLoad()}}_planNextLoad(){var e=this._getNextPlaylistLoadTimeout();this._currentPlaylistLoader&&(this._currentPlaylistLoader.destroy(),this._currentPlaylistLoader=null),this._logger.info("Expecting next load in ".concat(e," ms")),this._lifecycleEventReporter("Awaiting next loading"),this.status="Awaiting next loading",this._playlistLoaderTimeout=globalThis.setTimeout(()=>{this._loadNextPlaylist()},e)}_getNextPlaylistLoadTimeout(){var{forceStaticPlaylistLoadingTimeout:e,staticPlaylistLoadingTimeoutInDurations:t}=this.config;if(e&&t)return this._logger.verbose("forceStaticPlaylistLoadingTimeout is set to true and staticPlaylistLoadingTimeoutInDurations is set to ".concat(t,". Using static timeout")),t*this._lastTargetDuration*1e3;var r=!this.config.disableRotateTimeoutIncrease&&this._samePlaylistsCount>1?1.5:1;return this._logger.verbose("There was ".concat(this._samePlaylistsCount," same playlists. Multiplier is ").concat(r,". Target duration is ").concat(this._lastTargetDuration)),r*this._lastTargetDuration*1e3}}(0,Hn.__decorate)([_a.default],Wu.prototype,"_handleConfigUpdated",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK"),(Bu=xu||(xu={}))[Bu.NONE=0]="NONE",Bu[Bu.LOADING=1]="LOADING",Bu[Bu.LOADED=2]="LOADED",Bu[Bu.ERROR=3]="ERROR";class Yu extends Vu{constructor(e,t,r){super("VODPlaylistRotationController","playlistLoader",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"_fragments",[]),Un(this,"_lastHandledFragments",[]),Un(this,"_chunksRetryTimeout",null),Un(this,"_isDurationPositive",!1),this._url=t,this._onFragmentLoadedListener=this._eventBus.subscribe(Rs.fragments.fragmentLoaded,this._onFragmentLoaded),this._onFragmentAbortedListener=this._eventBus.subscribe(Rs.fragments.fragmentLoadingAborted,this._onFragmentLoadingError),this._onFragmentErrorListener=this._eventBus.subscribe(Rs.fragments.fragmentLoadingError,this._onFragmentLoadingError),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable),r?this._handleParsedPlaylist(r):this._loadNextPlaylist()}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentLoadedListener),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener),this._eventBus.unsubscribe(this._onFragmentErrorListener),this._eventBus.unsubscribe(this._onFragmentAbortedListener)}setURL(e,t){var r;t?this._url=e:(this._logger.info("Setting new url ".concat(e)),null!==(r=this._currentPlaylistLoader)&&void 0!==r&&r.destroy(),this._url=e,this._loadNextPlaylist())}abortCurrentPlaylistLoading(){var e;this._logger.info("Aborting current loading playlist"),null===(e=this._currentPlaylistLoader)||void 0===e||e.destroy()}_handleConfigUpdated(){}_loadNextPlaylist(){var{playlistLoadingTimeout:e,baseVODPlaylistRetryTimeout:t,maxVODPlaylistLoadingRetries:r}=this.config;this._logger.debug("Loading VOD playlist"),this._currentPlaylistLoader&&this._currentPlaylistLoader.cancel("Another playlist with url ".concat(this._url," scheduled to load")),this._currentPlaylistLoader=new pu({url:this._url||"",loadingTimeout:e,autoLoad:!0,mode:"text",onStateChanged:this._onPlaylistLoadingStateChanged,baseRetryTimeout:t,maxRetries:r,workerMode:this.config.workerMode},this._eventBus)}_onPlaylistLoadingStateChanged(e,t){var r,n,i;if(!this._currentPlaylistLoader||[nu.ABORTED,nu.ERROR].includes(t))return this.state=ca.ERROR,this.additionalInfo={playlistLoadError:null===(r=this._currentPlaylistLoader)||void 0===r?void 0:r.error},this._logger.warn("Playlist loader reported ".concat(t===nu.ERROR?"error":"as aborted"," (").concat((null===(n=this._currentPlaylistLoader)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.statusText)||"no error"," with status ").concat((null===(i=this._currentPlaylistLoader)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.statusText)||"no status","). Planning next load")),void(this._currentPlaylistLoader=null);if(t===nu.LOADED){var o=this._currentPlaylistLoader.data;this._currentPlaylistLoader=null;var a=this._parsePlaylist(o);a?(this._eventBus.publish(ma.playlists.playlistInfo,a),this._handleParsedPlaylist(a)):this._eventBus.publish(Na,{})}}_handleParsedPlaylist(e){this._isMultiVariantPlaylist(e)?this._handleMultivariantManifestDetected(e):this._isLowLatencyPlaylist(e)&&this.config.lowLatencyMode?this._handleLLManifestDetected(e):this._isSimplePlaylist(e)?this._handleSimplePlaylistDetected(e):(this.status="Playlist loaded",this._populateVODFragments(e.segments))}_planNextLoad(){}_populateVODFragments(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i={url:n.uri,fragmentIndex:r,fragmentStartTS:t,fragmentEndTS:t+n.duration,readinessState:xu.NONE,isLast:r===e.length-1};this._fragments.push(i),t=i.fragmentEndTS}this._isDurationPositive=t>0,this._eventBus.publish(ma.playlists.vodFragmentsInfo,this._fragments)}_loadFragment(e){var t=e.map(e=>{var{url:t}=e;return t});e.filter(e=>{var{readinessState:r,url:n}=e;return r===xu.LOADED&&t.includes(n)}).forEach(e=>{this._logger.info("Some fragments already loaded, reemitting it: ".concat(e.fragmentIndex)),this._eventBus.publish(ma.fragments.requestReleaseFromCache,{msn:e.fragmentIndex})});var r=e.filter(e=>{var{readinessState:t}=e;return[xu.NONE].includes(t)});r.forEach(e=>e.readinessState=xu.LOADING),this._handleFragmentsDetected(r.map(e=>new mu({msn:e.fragmentIndex,playlistUrl:this._url||"",fragmentUrl:e.url,pn:0,independent:$s.INDEPENDENT,duration:e.fragmentEndTS-e.fragmentStartTS,requestedLoadingTimeout:this.config.disableTimeoutsInVOD?-1:this.config.baseVODFragmentRetryTimeout,startTs:e.fragmentStartTS,endTs:e.fragmentEndTS,isTransmuxingBypassRequested:e.url.endsWith(".mp4")},this._eventBus,this.config.shouldLogFragmentsHistory))),this._lastHandledFragments=t}_onFragmentLoaded(e){this._logger.info("Fragment ".concat(e.msn," loaded"));var t=this._fragments.find(t=>{var{fragmentIndex:r}=t;return r===e.msn});t&&(t.readinessState=xu.LOADED,t.data=e.data,this.additionalInfo.fragments=this._fragments.map(e=>Fn(Fn({},e),{},{data:void 0})))}_onFragmentLoadingError(e){var t=this._fragments.find(t=>{var{fragmentIndex:r}=t;return r===e.msn});t&&(t.readinessState=xu.ERROR,this._chunksRetryTimeout||(this._chunksRetryTimeout=globalThis.setTimeout(this._retryFragments,this.config.baseVODFragmentRetryTimeout)))}_retryFragments(){this._chunksRetryTimeout=null,this._fragments.filter(e=>{var{readinessState:t}=e;return t===xu.ERROR}).forEach(e=>e.readinessState=xu.NONE)}_onBufferMetricsAvailable(e){if(!this._fragments.some(e=>{var{readinessState:t}=e;return t===xu.LOADING})&&this._isDurationPositive){var t=[],{currentTimeRange:r,currentPlaybackPosition:n,isInLastBufferedRange:i,bufferedTimeRanges:o}=e,a=i||!!r&&!o.some(e=>{var{start:t,end:n}=e;return t<=r.end+1&&r.end+1<=n}),s=n+this.config.VODLoadNextSegmentThreshold/1e3;if(r&&r.end-n<this.config.VODLoadNextSegmentThreshold/1e3&&a&&s<e.knownDuration-.1&&(t=this._findNextFragmentsByTime(n,s).filter(e=>{var{fragmentStartTS:t,fragmentEndTS:r}=e;return!(t<=n&&n<=r)})),r||(t=this._findNextFragmentsByTime(n,n)),t.length){this._logger.info("Loading following fragments ".concat(t.map(e=>{var{fragmentIndex:t}=e;return t}).join(",")));var u=Math.min(...t.map(e=>{var{fragmentStartTS:t}=e;return t})),l=Math.max(...t.map(e=>{var{fragmentEndTS:t}=e;return t}));this._eventBus.publish(ma.fragments.periodFragmentsFound,{startTsOfPeriod:u,endTsOfPeriod:l}),this._loadFragment(t)}}}_findNextFragmentsByTime(e,t){return this._fragments.filter(r=>{var{fragmentEndTS:n,fragmentStartTS:i}=r;return i<=e&&e<=n||i>=e&&t>=n||i<=t&&t<=n})}}(0,Hn.__decorate)([_a.default],Yu.prototype,"destroy",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_onPlaylistLoadingStateChanged",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_planNextLoad",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_onFragmentLoaded",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_onFragmentLoadingError",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_retryFragments",null),(0,Hn.__decorate)([_a.default],Yu.prototype,"_onBufferMetricsAvailable",null),_a=Gn("eQOGK"),(Uu=Fu||(Fu={})).VOD="VOD",Uu.LOW_LATENCY="lowLatency",Uu.SIMPLE="simple";class Gu{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fu.SIMPLE,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{}),Un(this,"groups",["loader"]),Un(this,"_streamUrl",null),Un(this,"_aclToken",null),Un(this,"_playlistsRotator",null),Un(this,"_actualRenditionReport",null),Un(this,"_lastAddedFragment",null),this._eventBus=r,this._logger=zi(this._eventBus,"Doppio - StreamLoader"),this._logger.info("Created"),this._fragmentsLoader=new gu(this._eventBus),this._initialType=e,this._simplePlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.simpleDetected,this._onSimplePlaylistDetected),this._llPlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.llDetected,this._onLLPlaylistDetected),this._vodPlaylistDetectedListener=this._eventBus.subscribe(Ns.playlistType.vodDetected,this._onVODPlaylistDetected),this._onSoftResetRequestedListener=this._eventBus.subscribe(ba,this._resetPlaylistLoaders),this._onBrowserRedirectDetectedListener=this._eventBus.subscribe(za.browserRedirectDetected,this._onBrowserRedirectDetected),this._onFragmentAddedListener=this._eventBus.subscribe(Ma,this._onFragmentAdded),this._lastAddedFragment=t}startLoad(e){this._streamUrl=e,this._recreateLoaders()}destroy(){var e;this._logger.info("Destroying instance, ".concat(this._streamUrl)),this._fragmentsLoader.destroy(),null!==(e=this._playlistsRotator)&&void 0!==e&&e.destroy(),this._eventBus.unsubscribe(this._simplePlaylistDetectedListener),this._eventBus.unsubscribe(this._llPlaylistDetectedListener),this._eventBus.unsubscribe(this._vodPlaylistDetectedListener),this._eventBus.unsubscribe(this._onSoftResetRequestedListener),this._eventBus.unsubscribe(this._onFragmentAddedListener),this._eventBus.unsubscribe(this._onBrowserRedirectDetectedListener)}setActualRenditionReport(e){e&&(this._actualRenditionReport=e)}_recreateLoaders(){var e;this.status="Restarting";var t=this._buildUrl();this._logger.debug("Recreate loaders"),t&&(this._fragmentsLoader.destroy(),this._fragmentsLoader=new gu(this._eventBus),this._playlistsRotator?null===(e=this._playlistsRotator)||void 0===e||e.setURL(t):this._recreateInitialLoader(),this.status="Working")}_recreateInitialLoader(){switch(this._initialType){case Fu.SIMPLE:this._onSimplePlaylistDetected();break;case Fu.VOD:this._onVODPlaylistDetected();break;case Fu.LOW_LATENCY:this._onLLPlaylistDetected();break;default:this._onSimplePlaylistDetected()}}_buildUrl(){return this._streamUrl?"".concat(this._streamUrl).concat(this._aclToken?"?aclToken="+this._aclToken:""):null}_onFragmentAdded(e){this._lastAddedFragment=e}_onSimplePlaylistDetected(e){var t;if(!(this._playlistsRotator instanceof Wu)){this._eventBus.publish(Is.playlistRotatorTypeChanged,Fu.SIMPLE),this._logger.info("Simple playlist detected, switching to simple loader");var r=this._buildUrl();r&&(null!==(t=this._playlistsRotator)&&void 0!==t&&t.destroy(),this._playlistsRotator=new Wu(this._eventBus,r,e),this.additionalInfo.playlistRotatorType="SimplePlaylistRotator")}}_onVODPlaylistDetected(e){var t;if(!(this._playlistsRotator instanceof Yu)){this._eventBus.publish(Is.playlistRotatorTypeChanged,Fu.VOD),this._logger.info("VOD playlist detected, switching to VOD loader");var r=this._buildUrl();r&&(null!==(t=this._playlistsRotator)&&void 0!==t&&t.destroy(),this._playlistsRotator=new Yu(this._eventBus,r,e),this.additionalInfo.playlistRotatorType="VODPlaylistRotator")}}_onLLPlaylistDetected(e){var t,r,n;if(!(this._playlistsRotator instanceof qu)){this._eventBus.publish(Is.playlistRotatorTypeChanged,Fu.LOW_LATENCY),this._logger.info("LL Playlist detected, switching to ll loader");var i=this._buildUrl();i&&(null!==(t=this._playlistsRotator)&&void 0!==t&&t.destroy(),this._playlistsRotator=new qu(this._eventBus,{url:i,startManifest:e,initialMSN:null===(r=this._actualRenditionReport)||void 0===r?void 0:r.lastMsn,initialPN:null===(n=this._actualRenditionReport)||void 0===n?void 0:n.lastPart,lastLoadedFragment:this._lastAddedFragment}),this.additionalInfo.playlistRotatorType="LowLatencyPlaylistRotator")}}_resetPlaylistLoaders(){var e;null!==(e=this._playlistsRotator)&&void 0!==e&&e.abortCurrentPlaylistLoading(),this.status="Idle"}_onBrowserRedirectDetected(e){var t,{responseUrl:r}=e;this._streamUrl=r;var n=this._buildUrl();n&&(null===(t=this._playlistsRotator)||void 0===t||t.setURL(n,!0))}get additionalModules(){var e={};return this._playlistsRotator&&(e.playlistRotator=this._playlistsRotator),this._fragmentsLoader&&(e.fragmentLoader=this._fragmentsLoader),e}}(0,Hn.__decorate)([_a.default],Gu.prototype,"_onFragmentAdded",null),(0,Hn.__decorate)([_a.default],Gu.prototype,"_onSimplePlaylistDetected",null),(0,Hn.__decorate)([_a.default],Gu.prototype,"_onVODPlaylistDetected",null),(0,Hn.__decorate)([_a.default],Gu.prototype,"_onLLPlaylistDetected",null),(0,Hn.__decorate)([_a.default],Gu.prototype,"_resetPlaylistLoaders",null),(0,Hn.__decorate)([_a.default],Gu.prototype,"_onBrowserRedirectDetected",null),_a=Gn("eQOGK");class Hu extends va{constructor(e){super("resolutionsManager",e),Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"additionalInfo",{currentResolution:""}),Un(this,"groups",["resolutionsManager"]),Un(this,"_currentResolutionsDecreasing",[]),Un(this,"_currentResolution",null),Un(this,"_awaitingResolution",null),Un(this,"_lastMSN",-1),Un(this,"_lastDSN",-1),Un(this,"_lastPDT",-1),Un(this,"_url",""),Un(this,"_isAutoEnabled",!0),Un(this,"_lastPlaylistRotatorType",Fu.SIMPLE),Un(this,"_streamLoader",null),Un(this,"_restartTimeout",null),Un(this,"_renditionReports",[]),Un(this,"_lastLoadedFragment",null),Un(this,"_codecsByResolutions",{}),this._logger=zi(e,"Doppio - ResolutionManager"),this._multiVariantsPlaylistDetectionListener=this._eventBus.subscribe(Ns.playlistType.multivariantDetected,this._onMultiVariantsPlaylists),this._onResolutionChangeRequestedListener=this._eventBus.subscribe(Ra,this._onResolutionChangeRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Ns.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onRestartFromMainRequestedListener=this._eventBus.subscribe(Na,this._restartFormMain),this._onPlaylistRotatorTypeChangedListener=this._eventBus.subscribe(Is.playlistRotatorTypeChanged,this._onPlaylistRotatorTypeChanged),this._onEndOfSegmentPlaylistLoadedListener=this._eventBus.subscribe(ma.playlists.lastPlaylistOfSegmentLoaded,this._onEndOfSegmentPlaylistLoaded),this._onFragmentAddedListener=this._eventBus.subscribe(Ma,this._onFragmentAdded)}destroy(){var e;super.destroy(),this._restartTimeout&&(clearTimeout(this._restartTimeout),this._restartTimeout=null),this._eventBus.unsubscribe(this._multiVariantsPlaylistDetectionListener),this._eventBus.unsubscribe(this._onResolutionChangeRequestedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onRestartFromMainRequestedListener),this._eventBus.unsubscribe(this._onPlaylistRotatorTypeChangedListener),this._eventBus.unsubscribe(this._onEndOfSegmentPlaylistLoadedListener),this._eventBus.unsubscribe(this._onFragmentAddedListener),null!==(e=this._streamLoader)&&void 0!==e&&e.destroy(),this._codecsByResolutions={}}setUrl(e){this._url!==e&&(this._lastPDT=-1,this._lastDSN=-1,this._lastMSN=-1,this._logger.info("Setting new url"),this._url=e,this._currentResolution=null,this._currentResolutionsDecreasing=[],this._restart())}setResolution(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._awaitingResolution=null,e.name!==(null===(t=this._currentResolution)||void 0===t?void 0:t.name))if(this._url&&aa(this._url).streamId&&aa(e.url).streamId&&aa(this._url).streamId!==aa(e.url).streamId)this._logger.warn("Tried to set resolution with ".concat(e.url,", but the current url is ").concat(this._url,". Skipping since they don't match"));else{var i=this._currentResolution;this._logger.info("Resolution changed: ".concat(null===(r=this._currentResolution)||void 0===r?void 0:r.name," -> ").concat(e.name)),this._currentResolution=e,this.additionalInfo.currentResolution=e.name,this._eventBus.publish(ja,e),this._codecsByResolutions[e.url]&&this._eventBus.publish(La,{codec:this._codecsByResolutions[e.url]}),n&&i&&this._eventBus.publish(Da,{prevResolution:i.name,nextResolution:e.name}),this._restart()}}setNearestResolutionByWidth(e){return this._setResolutionByCriteria(t=>{var{width:r}=t;return r<=e})}setNearestResolutionByHeight(e){return this._setResolutionByCriteria(t=>{var{height:r}=t;return r<=e})}setNearestResolutionByBitrate(e){return this._setResolutionByCriteria(t=>{var{bitrate:r}=t;return r<=e+this.config.initialResolutionBitrateThreshold})}setResolutionByName(e){return this._setResolutionByCriteria(t=>{var{name:r}=t;return r===e})}toggleAutoResolution(e){this._isAutoEnabled=e}restart(){this._restart()}_handleConfigUpdated(){}_setResolutionByCriteria(e){var t=this._findResolutionByCriteria(e);return t?this.config.awaitForSegmentEndToSwitchManual&&this._currentResolution&&this._lastMSN>-1?(this._logger.info("Await for segment end for switch resolution"),void(this._awaitingResolution=t)):void this.setResolution(t):(this._logger.warn("There are no any resolution in current stream"),this.state=ca.ERROR,void(this._awaitingResolution=null))}_findResolutionByCriteria(e){if(!this._currentResolutionsDecreasing.length)return null;if(1===this._currentResolutionsDecreasing.length)return this._currentResolutionsDecreasing[0];var t=this._currentResolutionsDecreasing.find(e);return t||(this._eventBus.publish(Ia,{}),!1!==this.config.useFallbackResolutionIfResolutionNotFound)?t||this._currentResolutionsDecreasing.slice(-1)[0]:null}_restartFormMain(){this._currentResolution=null,this._logger.info("Restart from main"),this._renditionReports=[],this._eventBus.publish(ba,{}),this._restart(2e3)}_restart(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._restartTimeout&&(clearTimeout(this._restartTimeout),this._restartTimeout=null),this._logger.info("Restart resolution manager"),this._destroyStreamLoader(),this._restartTimeout=setTimeout(()=>{this._recreateStreamLoader()},e)}_destroyStreamLoader(){var e;null!==(e=this._streamLoader)&&void 0!==e&&e.destroy(),this._streamLoader=null,this.status="Awaiting resolutions"}_recreateStreamLoader(){this._destroyStreamLoader(),this._streamLoader=new Gu(this._lastPlaylistRotatorType,this._lastLoadedFragment,this._eventBus),this._streamLoader.setActualRenditionReport(this._getActualRenditionReport()),this._streamLoader.startLoad(this._currentResolution?this._currentResolution.url:this._url)}_onMultiVariantsPlaylists(e){this._currentResolutionsDecreasing=Object.values(e).sort((e,t)=>t.bitrate-e.bitrate),this.additionalInfo.resolutionsAvailable=this._currentResolutionsDecreasing.map(e=>{var{name:t}=e;return t}),this._eventBus.publish(Pa,this._currentResolutionsDecreasing),this.config.initialResolutionBitrate?this.setNearestResolutionByBitrate(this.config.initialResolutionBitrate):this.config.initialResolutionHeight?this.setNearestResolutionByHeight(this.config.initialResolutionHeight):this.config.initialResolutionWidth?this.setNearestResolutionByWidth(this.config.initialResolutionWidth):this.config.autoloadLowestResolution&&this.setResolution(this._currentResolutionsDecreasing.slice(-1)[0])}_onEndOfSegmentPlaylistLoaded(){this._awaitingResolution&&(this._logger.info("Last playlist of segment loaded. Ready to switch"),this.setResolution(this._awaitingResolution,!0))}_onFragmentAdded(e){this._lastLoadedFragment=e}_onPlaylistInfoAvailable(e){var t,r,{mediaSequence:n,discontinuitySequence:i,segments:o}=e;if(e.playlists&&(this._codecsByResolutions=e.playlists.reduce((e,t)=>{var r;return null!==(r=t.attributes)&&void 0!==r&&r.CODECS?Fn(Fn({},e),{},{[t.uri]:t.attributes.CODECS}):e},{})),void 0!==n&&void 0!==i&&void 0!==o){var a=(null===(t=o[0])||void 0===t||null===(t=t.dateTimeObject)||void 0===t?void 0:t.getTime())||0;-1===this._lastPDT||-1===this._lastDSN||-1===this._lastMSN||(i!==this._lastDSN&&(this._logger.info("DSN changed. Requesting overplay"),this._eventBus.publish(ba,{})),Math.abs(a-this._lastPDT)>this.config.maxPlaylistTimeDifference&&(this._logger.warn("PDT delta reached max delta. Restarting from main"),this._restartFormMain())),this._lastMSN=n,this._lastDSN=i,this._lastPDT=a,this._renditionReports=e.renditionReports||[],null===(r=this._streamLoader)||void 0===r||r.setActualRenditionReport(this._getActualRenditionReport())}}_onResolutionChangeRequested(e){if(this._isAutoEnabled)return this.config.awaitForSegmentEndToSwitch?(this._logger.info("Await for segment end for switch resolution"),void(this._awaitingResolution=e)):void this.setResolution(e,!0)}_getActualRenditionReport(){if(!this._renditionReports.length)return null;try{return this._renditionReports.find(e=>{var t,{uri:r}=e;return new URL(r).pathname===new URL((null===(t=this._currentResolution)||void 0===t?void 0:t.url)||"").pathname})||null}catch(Ev){return null}}_onPlaylistRotatorTypeChanged(e){this._lastPlaylistRotatorType=e}get additionalModules(){return this.additionalInfo.isAutoEnabled=this._isAutoEnabled,this._streamLoader?{streamLoader:this._streamLoader}:{}}}(0,Hn.__decorate)([_a.default],Hu.prototype,"_handleConfigUpdated",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_restartFormMain",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_onMultiVariantsPlaylists",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_onEndOfSegmentPlaylistLoaded",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_onFragmentAdded",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_onPlaylistInfoAvailable",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_onResolutionChangeRequested",null),(0,Hn.__decorate)([_a.default],Hu.prototype,"_onPlaylistRotatorTypeChanged",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class Qu{constructor(e,t){var r;Un(this,"_isResolutionSelected",!1),this._eventBus=t,this._sendEvent=e,this._isDebugEnabled=null===(r=document)||void 0===r||null===(r=r.cookie)||void 0===r?void 0:r.includes("__mmpDebug__=1"),this._onPlaylistLoadingStartedListener=this._eventBus.subscribe(ma.playlists.playlistRequested,this._onPlaylistLoadingStarted),this._onResolutionChangedListener=this._eventBus.subscribe(ja,this._onResolutionChanged),this._onResolutionChangedAutoListener=this._eventBus.subscribe(Da,this._onResolutionAutoChanged),this._onPlaylistLoadedListener=this._eventBus.subscribe(ma.playlists.playlistLoaded,this._onPlaylistLoaded),this._onPlaylistParsedListener=this._eventBus.subscribe(ma.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onFragmentLoadedListener=this._eventBus.subscribe(Ds.fragments.fragmentLoaded,this._onFragmentLoaded),this._onDebuggerConnectedListener=this._eventBus.subscribe(ls,this._onDebuggerConnected),this._onNetworkRequestSettledListener=this._eventBus.subscribe(za.networkRequestSettled,this._onNetworkRequestSettled)}destroy(){this._eventBus.unsubscribe(this._onPlaylistLoadingStartedListener),this._eventBus.unsubscribe(this._onPlaylistLoadedListener),this._eventBus.unsubscribe(this._onPlaylistParsedListener),this._eventBus.unsubscribe(this._onFragmentLoadedListener),this._eventBus.unsubscribe(this._onDebuggerConnectedListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onResolutionChangedAutoListener),this._eventBus.unsubscribe(this._onNetworkRequestSettledListener)}_onPlaylistLoadingStarted(){this._isResolutionSelected||this._sendEvent(new CustomEvent(Ja.MANIFEST_LOADING))}_onResolutionChanged(){this._isResolutionSelected=!0}_onPlaylistLoaded(e){var{originalUrl:t,realUrl:r,stats:n}=e;this._isResolutionSelected?this._sendEvent(new CustomEvent(Ja.LEVEL_LOADED,{detail:{netStats:n}})):this._sendEvent(new CustomEvent(Ja.MANIFEST_LOADED,{detail:{originalUrl:t,realUrl:r}}))}_onPlaylistInfoAvailable(e){this._sendEvent(new CustomEvent(Ja.MANIFEST_PARSED,{detail:e}))}_onFragmentLoaded(e){this._sendEvent(new CustomEvent(Ja.FRAG_LOADED,{detail:{netStats:e.stats,duration:e.duration}}))}_onDebuggerConnected(e){this._sendEvent(new CustomEvent(Ja.DEBUGGER_CONNECTED,{detail:{panelUrl:e}}))}_onResolutionAutoChanged(e){var{prevResolution:t,nextResolution:r}=e;this._sendEvent(new CustomEvent(Ja.LEVEL_SWITCHED_AUTO,{detail:{prevResolution:t,nextResolution:r}}))}_onNetworkRequestSettled(e){var{response:t}=e;this._isDebugEnabled&&globalThis.dispatchEvent(new CustomEvent("mmpFetchSettled",{detail:{response:t}}))}}(0,Hn.__decorate)([_a.default],Qu.prototype,"_onPlaylistLoadingStarted",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onResolutionChanged",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onPlaylistLoaded",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onPlaylistInfoAvailable",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onFragmentLoaded",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onDebuggerConnected",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onResolutionAutoChanged",null),(0,Hn.__decorate)([_a.default],Qu.prototype,"_onNetworkRequestSettled",null);_a=Gn("eQOGK");class Ku{constructor(){Un(this,"state",ca.OK),Un(this,"status","Idle"),Un(this,"groups",["general"]),Un(this,"_lastMetrics",null)}get additionalInfo(){var e,t,r;return Fn({totalHeapSize:null===(e=performance.memory)||void 0===e?void 0:e.totalJSHeapSize,usedHeapSize:null===(t=performance.memory)||void 0===t?void 0:t.usedJSHeapSize,sizeLimit:null===(r=performance.memory)||void 0===r?void 0:r.jsHeapSizeLimit},this._lastMetrics||{})}}Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");var Xu,Ju=Gn("3264a");class $u extends va{constructor(e){super("debugger",e),Un(this,"_debuggableModules",{}),Un(this,"_modulesInfoGatheringInterval",null),Un(this,"_debuggerWorker",null),this._onLifecycleEventReportedListener=this._eventBus.subscribe(us,this._onLifecycleEventReported),this.config.enableRemoteDebugging&&this.config.debuggerUrl&&this.config.maxWSConnectionRetries&&this._startDebugger()}registerDebuggableModules(e){this._debuggableModules=Fn(Fn({},this._debuggableModules),e)}unregisterDebuggableModules(e){e.forEach(e=>{delete this._debuggableModules[e]})}destroy(){var e;super.destroy(),null!==(e=this._debuggerWorker)&&void 0!==e&&e.disconnect(),this._eventBus.unsubscribe(this._onLifecycleEventReportedListener)}_handleConfigUpdated(e){this._debuggerWorker&&(e.debuggerUrl||e.maxWSConnectionRetries)&&(this._destroyWorker(),this._getDebuggerModule()),!1===e.enableRemoteDebugging&&this._stopDebugger(),e.enableRemoteDebugging&&(this._destroyWorker(),this._getDebuggerModule()),e.modulesStateGatheringPeriod&&(this._disarmSendModulesInfoTimeout(),this._armSendModulesInfoTimeout())}_destroyWorker(){var e;null!==(e=this._debuggerWorker)&&void 0!==e&&e.disconnect(),this._debuggerWorker=null}_startDebugger(){this._getDebuggerModule(),this._armSendModulesInfoTimeout()}_stopDebugger(){this._debuggerWorker&&(this._debuggerWorker.disconnect(),this._disarmSendModulesInfoTimeout())}_sendMessage(e){var t=this;return xn(function*(){(yield t._getDebuggerModule()).sendMessage(e)})()}_onConnected(e){this._eventBus.publish(ls,e),this._armSendModulesInfoTimeout()}_onDisconnected(){this._disarmSendModulesInfoTimeout()}_onLifecycleEventReported(e){this._debuggerWorker&&this.config.enableLifecycleEvents&&this._sendMessage({command:Ju.ECommand.MODULE_LIFECYCLE_EVENT_AVAILABLE,event:e})}_armSendModulesInfoTimeout(){this._modulesInfoGatheringInterval=globalThis.setInterval(this._sendModulesInfo,this.config.modulesStateGatheringPeriod)}_disarmSendModulesInfoTimeout(){this._modulesInfoGatheringInterval&&globalThis.clearInterval(this._modulesInfoGatheringInterval)}_unzipDebuggableModules(e){var t=Fn({},e);return Object.values(e).forEach(e=>{e.additionalModules&&(t=Fn(Fn({},t),this._unzipDebuggableModules(e.additionalModules)))}),t}_sendModulesInfo(){var e=this._unzipDebuggableModules(this._debuggableModules),t=Object.entries(e).reduce((e,t)=>{var[r,n]=t;return e[r]={additionalInfo:n.additionalInfo,state:n.state,groups:n.groups,status:n.status},e},{});this._sendMessage({command:Ju.ECommand.MODULES_INFO_AVAILABLE,payload:t})}_getDebuggerModule(){var e=this;return xn(function*(){if(!e._debuggerWorker){var{DebuggerWorker:t}=yield Gn("iVqGx");e._debuggerWorker=new t,e._debuggerWorker.setConfig(e.config.debuggerUrl,e.config.maxWSConnectionRetries,e._onConnected,e._onDisconnected),e._debuggerWorker.connect()}return e._debuggerWorker})()}}(0,Hn.__decorate)([_a.default],$u.prototype,"_onConnected",null),(0,Hn.__decorate)([_a.default],$u.prototype,"_onDisconnected",null),(0,Hn.__decorate)([_a.default],$u.prototype,"_onLifecycleEventReported",null),(0,Hn.__decorate)([_a.default],$u.prototype,"_sendModulesInfo",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK");class Zu extends va{constructor(e){super("fragmentBuffer",e),Un(this,"_initSectionCache",null),Un(this,"_expectedUnitedChunkName",""),Un(this,"_fragmentsCache",[]),this._logger=zi(e,"Doppio - FragmentsBuffer"),this._onFragmentReleasedListenerToken=this._eventBus.subscribe(Js,this._onFragmentReleasedFromQueue),this._onSaveDataRequestedListenerToken=this._eventBus.subscribe(eu,this.sendUnitedChunk)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentReleasedListenerToken),this._eventBus.unsubscribe(this._onSaveDataRequestedListenerToken),this._initSectionCache=null,this._fragmentsCache=[]}sendUnitedChunk(){if(this._initSectionCache&&!(Math.random()>this.config.saveProbability))try{var e=(e=>{var t=e.reduce((e,t)=>e+t.byteLength,0),r=new Uint8Array(t);return e.reduce((e,t)=>(r.set(t,e),e+t.byteLength),0),r.buffer})([this._initSectionCache.data].concat(...this._fragmentsCache.map(e=>{var{data:t}=e;return t}))),t=new Headers;t.append("Content-Type","video/mp4"),fetch("https://".concat(this.config.baseChunksSaverUrl,"/").concat(this._expectedUnitedChunkName),{method:"PUT",headers:t,body:e,redirect:"follow"}).catch(e=>{this._logger.warn("Could not save problem chunks: ".concat(e))})}catch(Ev){this._logger.warn("Could not save problem chunks: ".concat(Ev))}}_onFragmentReleasedFromQueue(e){var t=this;try{var r,n=function(){if(i.isInitSection)return{v:(t._initSectionCache=i,t._expectedUnitedChunkName=i.url.split("/").slice(-1)[0],void(t._fragmentsCache=[]))};t._fragmentsCache.push(i);var r=Math.max(...e.map(e=>{var{msn:t}=e;return t})),n=Math.max(0,r-t.config.numberOfFragmentsToKeepInBuffer+1);t._fragmentsCache=t._fragmentsCache.filter(e=>{var{msn:t}=e;return t>=n})};for(var i of e)if(r=n())return r.v}catch(e){this._logger.warn("Could not handle fragment"),this._fragmentsCache=[],this._initSectionCache=null}}}(0,Hn.__decorate)([_a.default],Zu.prototype,"sendUnitedChunk",null),(0,Hn.__decorate)([_a.default],Zu.prototype,"_onFragmentReleasedFromQueue",null),Gn("8NFq9"),Hn=Gn("a8VW4"),_a=Gn("eQOGK"),(Xu||(Xu={})).SAME_PLAYLIST_LOADED_MORE_TIMES="Same playlist was loaded more than expected times. Looks lise server is malfunctioning";class el extends Error{constructor(e,t,r){super(e),this.name="DoppioNetworkError",this.statusCode=t,this.statusText=r}}var tl="LifecycleEventsManager.LIFECYCLE_EVENT",rl="LifecycleEventsManager.LIFECYCLE_ERROR";class nl{constructor(e){Un(this,"_manifestLoaded",!1),Un(this,"_firstMediaPlaylistLoaded",!1),Un(this,"_firstFragmentLoaded",!1),Un(this,"_firstFragmentBuffered",!1),this._eventBus=e,this._onManifestLoadedListener=this._eventBus.subscribe(ma.playlistType.multivariantDetected,this._onManifestLoaded),this._onSimplePlaylistDetectedListener=this._eventBus.subscribe(ma.playlistType.simpleDetected,this._onPlaylistLoaded),this._onLLPlaylistDetectedListener=this._eventBus.subscribe(ma.playlistType.llDetected,this._onPlaylistLoaded),this._onVODPlaylistDetectedListener=this._eventBus.subscribe(ma.playlistType.vodDetected,this._onPlaylistLoaded),this._onFragmentLoadedListener=this._eventBus.subscribe(Ds.fragments.fragmentLoaded,this._onFragmentLoaded),this._onFragmentBufferedListener=this._eventBus.subscribe(Ma,this._onFragmentBuffered),this._onFragmentLoadErrorListener=this._eventBus.subscribe(Ds.fragments.fragmentLoadingError,this._onFragmentLoadError),this._onFragmentLoadAbortListener=this._eventBus.subscribe(Ds.fragments.fragmentLoadingAborted,this._onFragmentLoadError),this._onPlaylistLoadErrorListener=this._eventBus.subscribe(ma.playlists.playlistLoadingError,this._onPlaylistLoadError)}destroy(){this._eventBus.unsubscribe(this._onManifestLoadedListener),this._eventBus.unsubscribe(this._onSimplePlaylistDetectedListener),this._eventBus.unsubscribe(this._onLLPlaylistDetectedListener),this._eventBus.unsubscribe(this._onVODPlaylistDetectedListener),this._eventBus.unsubscribe(this._onFragmentLoadedListener),this._eventBus.unsubscribe(this._onFragmentBufferedListener),this._eventBus.unsubscribe(this._onFragmentLoadErrorListener),this._eventBus.unsubscribe(this._onFragmentLoadAbortListener),this._eventBus.unsubscribe(this._onPlaylistLoadErrorListener)}reset(){this._manifestLoaded=!1,this._firstMediaPlaylistLoaded=!1,this._firstFragmentLoaded=!1,this._firstFragmentBuffered=!1}_onManifestLoaded(){this._manifestLoaded||(this._manifestLoaded=!0,this._eventBus.publish(tl,{eventType:Ha.MANIFEST_LOADED}))}_onPlaylistLoaded(){this._firstMediaPlaylistLoaded||(this._firstMediaPlaylistLoaded=!0,this._eventBus.publish(tl,{eventType:Ha.FIRST_MEDIA_PLAYLIST_LOADED}))}_onFragmentLoaded(){this._firstFragmentLoaded||(this._firstFragmentLoaded=!0,this._eventBus.publish(tl,{eventType:Ha.FIRST_FRAGMENT_LOADED}))}_onFragmentBuffered(){this._firstFragmentBuffered||(this._firstFragmentBuffered=!0,this._eventBus.publish(tl,{eventType:Ha.FIRST_FRAGMENT_BUFFERED}))}_onFragmentLoadError(e){var t,r,n,i;this._eventBus.publish(rl,{errorType:Ka.FRAGMENT_LOAD_ERROR,nativeError:new el(" ".concat(null===(t=e.error)||void 0===t?void 0:t.statusText," (").concat(null===(r=e.error)||void 0===r?void 0:r.status,")"),(null===(n=e.error)||void 0===n?void 0:n.status)||-1,(null===(i=e.error)||void 0===i?void 0:i.statusText)||"No status text known")})}_onPlaylistLoadError(e){var{error:t}=e;this._eventBus.publish(rl,{errorType:this._manifestLoaded?Ka.PLAYLIST_LOAD_ERROR:Ka.MANIFEST_LOAD_ERROR,nativeError:new el("Could not load ".concat(this._manifestLoaded?"playlist":"manifest",": ").concat(null==t?void 0:t.statusText,"(").concat(null==t?void 0:t.status,")"),(null==t?void 0:t.status)||-1,(null==t?void 0:t.statusText)||"No status text known")})}}(0,Hn.__decorate)([_a.default],nl.prototype,"_onManifestLoaded",null),(0,Hn.__decorate)([_a.default],nl.prototype,"_onPlaylistLoaded",null),(0,Hn.__decorate)([_a.default],nl.prototype,"_onFragmentLoaded",null),(0,Hn.__decorate)([_a.default],nl.prototype,"_onFragmentBuffered",null),(0,Hn.__decorate)([_a.default],nl.prototype,"_onFragmentLoadError",null),(0,Hn.__decorate)([_a.default],nl.prototype,"_onPlaylistLoadError",null);class il extends EventTarget{constructor(){super(),Un(this,"_eventBus",new Gs),Un(this,"_loggerTransport",null),Un(this,"_fragmentParser",new Ks(this._eventBus)),Un(this,"_fragmentQueue",new ru(this._eventBus)),Un(this,"_buffer",new Ys(this._eventBus)),Un(this,"_resolutionManager",new Hu(this._eventBus)),Un(this,"_abrController",new rs(this._eventBus)),Un(this,"_debugger",new $u(this._eventBus)),Un(this,"_fragmentsFilter",new tu(this._eventBus)),Un(this,"_fragmentsBuffer",new Zu(this._eventBus)),Un(this,"_url",null),Un(this,"_key",null),Un(this,"_videoElement",null),Un(this,"_isStarted",!1),Un(this,"_commonMetricsCollector",new Ku),Un(this,"_lifecycleEventsManager",new nl(this._eventBus));var e=(Math.random()+1).toString(36).substring(7);this._eventBus.setAppId(e),this._loggerTransport=new Yi(this._eventBus,ha,[],[]),this._logger=zi(this._eventBus,"Doppio - core"),this._logger.info("Created"),this._onResolutionsAvailableListener=this._eventBus.subscribe(Pa,this._onResolutionsAvailable),this._onMetricsAvailableListener=this._eventBus.subscribe(Ea,this._onBufferMetricsAvailable),this._onResolutionChangedListener=this._eventBus.subscribe(ja,this._onResolutionChanged),this._onStreamEndedListener=this._eventBus.subscribe(Ta,this._onStreamEnded),this._onPlaybackStateChangedListener=this._eventBus.subscribe(wa,this._onPlaybackStateChanged),this._legacyEventsController=new Qu(this.dispatchEvent.bind(this),this._eventBus),this._debugger.registerDebuggableModules({fragmentQueue:this._fragmentQueue,commonInfo:this._commonMetricsCollector,resolutionManager:this._resolutionManager,abr:this._abrController}),this._onLifecycleEventReportedListener=this._eventBus.subscribe(tl,this._onLifecycleEventReported),this._onLifecycleErrorReportedListener=this._eventBus.subscribe(rl,this._onLifecycleErrorReported),this._onResolutionNotFoundListener=this._eventBus.subscribe(Ia,this._onResolutionNotFound),this._onFragmentsFilterProblemDetectedListener=this._eventBus.subscribe(Qs,this._onFragmentFilterProblemDetected)}destroy(){var e;this._eventBus.unsubscribe(this._onResolutionsAvailableListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onMetricsAvailableListener),this._eventBus.unsubscribe(this._onStreamEndedListener),this._eventBus.unsubscribe(this._onPlaybackStateChangedListener),this._eventBus.unsubscribe(this._onLifecycleEventReportedListener),this._eventBus.unsubscribe(this._onLifecycleErrorReportedListener),this._eventBus.unsubscribe(this._onResolutionNotFoundListener),this._eventBus.unsubscribe(this._onFragmentsFilterProblemDetectedListener),this._fragmentParser.destroy(),this._buffer.destroy(),this._resolutionManager.destroy(),this._abrController.destroy(),this._fragmentQueue.destroy(),this._debugger.destroy(),this._legacyEventsController.destroy(),null!==(e=this._videoElement)&&void 0!==e&&e.removeEventListener("error",this._onMediaElementError),this._logger.info("Destroyed"),this._lifecycleEventsManager.destroy(),this._fragmentsFilter.destroy(),this._fragmentsBuffer.destroy(),setTimeout(()=>{var e;null===(e=this._loggerTransport)||void 0===e||e.destroy()},1e3),hu(this._eventBus.getAppId())}get version(){return"v1.13.2"}get isStarted(){return this._isStarted}recoverMediaError(){var e;this._buffer.detachVideoElement(),this._videoElement&&this._buffer.attachVideoElement(this._videoElement),this._resolutionManager.restart(),null===(e=this._videoElement)||void 0===e||e.play()}start(){this._url?(this._videoElement||this._logger.warn("Video element is not defined."),this._isStarted?this._restart():(this._debugger.registerDebuggableModules({bufferController:this._buffer}),this._resolutionManager.setUrl(this._url),this._isStarted=!0)):this._logger.fatal("Stream URL is not defined. Cannot start player")}setUrl(e){if(!e.trim())return this._stop(),this;var t=(e=>{if(vu(e))return e;var t=new URL(document.location.href);if(e.startsWith("/"))return"".concat(t.origin).concat(e);var r=t.pathname.split("/").filter(e=>e.trim().length>0);return r.pop()||r.pop(),"".concat(t.origin,"/").concat(r.concat(e).join("/"))})(e),r=this._url!==t&&this._isStarted;return this._url=t,this._key=null,r&&(this._lifecycleEventsManager.reset(),this._restart()),this}setKey(e){return this._key=e,this}setVideoElement(e){return e===this._videoElement||(this._videoElement&&(this._buffer.detachVideoElement(),this._videoElement.removeEventListener("error",this._onMediaElementError)),this._videoElement=e,this._buffer.attachVideoElement(e),this._buffer.scheduleSourceBufferRecreation(),this._videoElement.addEventListener("error",this._onMediaElementError)),this}getFragmentQueue(){return this._fragmentQueue.getCurrentQueue()}setLoggerLevel(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this._loggerTransport&&(this._loggerTransport.destroy(),this._loggerTransport=null),this._loggerTransport=new Yi(this._eventBus,e,t,r),this}setResolutionByName(e){return this._resolutionManager.setResolutionByName(e),this}setResolutionByBitrate(e){return this._resolutionManager.setNearestResolutionByBitrate(e)}disableABR(){return this._resolutionManager.toggleAutoResolution(!1),this}enableABR(){return this._resolutionManager.toggleAutoResolution(!0),this}setConfig(e){ga(e,this._eventBus)}setMaxABRResolution(e){this._eventBus.publish(Ba,e)}_restart(){var e=this;return xn(function*(){var t;e._logger.info("restarting"),null!==(t=e._buffer)&&void 0!==t&&t.reset(),yield e.recoverMediaError(),e._fragmentParser.destroy(),e._fragmentParser=new Ks(e._eventBus),e._fragmentQueue.reset(),e._url&&e._resolutionManager.setUrl(e._url)})()}_stop(){this._url=null,this._restart(),this._resolutionManager.setUrl("")}_onResolutionsAvailable(e){this.dispatchEvent(new CustomEvent(Ja.VARIANTS_DETECTED,{detail:e}))}_onStreamEnded(){this.dispatchEvent(new Event(Ja.STREAM_ENDED))}_onResolutionChanged(e){this.dispatchEvent(new CustomEvent(Ja.RESOLUTION_CHANGED,{detail:e}))}_onBufferMetricsAvailable(e){this.dispatchEvent(new CustomEvent(Ja.METRICS_AVAILABLE,{detail:e}))}_onPlaybackStateChanged(e){var{prevState:t,nextState:r}=e;this.dispatchEvent(new CustomEvent(Ja.PLAYBACK_STATE_CHANGED,{detail:{prevState:t,nextState:r}}))}_onFragmentFilterProblemDetected(e){var{reason:t,fragment:r}=e;this.dispatchEvent(new CustomEvent(Ja.FRAGMENT_FILTERED_OUT,{detail:{reason:t,fragment:r}}))}_onMediaElementError(){var e,t,r,n,i;su.reportError("VideoElementError",{msg:null===(e=this._videoElement)||void 0===e||null===(e=e.error)||void 0===e?void 0:e.message,code:null===(t=this._videoElement)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.code}),this._eventBus.publish(eu,{}),this._logger.error("Media error occurred ".concat(null===(r=this._videoElement)||void 0===r||null===(r=r.error)||void 0===r?void 0:r.message," ").concat(null===(n=this._videoElement)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.code)),(null===(i=this._videoElement)||void 0===i?void 0:i.error)&&this.recoverMediaError()}_onLifecycleEventReported(e){var{eventType:t}=e;this.dispatchEvent(new CustomEvent(Ja.LIFECYCLE_EVENT,{detail:{eventType:t}}))}_onLifecycleErrorReported(e){var{errorType:t,nativeError:r}=e;this.dispatchEvent(new CustomEvent(Ja.LIFECYCLE_ERROR,{detail:{errorType:t,nativeError:r}}))}_onResolutionNotFound(){this.dispatchEvent(new CustomEvent(Ja.RESOLUTION_NOT_FOUND))}_addAirPlaySourceIfNeeded(){if(this._url&&this._videoElement&&window.ManagedMediaSource){var e=document.createElement("source");e.type="application/x-mpegURL",e.src=this._url.replace(/playlistType=lowLatency/gi,""),this._videoElement.appendChild(e)}}}(0,Hn.__decorate)([_a.default],il.prototype,"_onResolutionsAvailable",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onStreamEnded",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onResolutionChanged",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onBufferMetricsAvailable",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onPlaybackStateChanged",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onFragmentFilterProblemDetected",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onMediaElementError",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onLifecycleEventReported",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onLifecycleErrorReported",null),(0,Hn.__decorate)([_a.default],il.prototype,"_onResolutionNotFound",null);var ol=[401,403,404],al=e=>{var t,{video:r,stream:n,modelId:i,quality:o,onPlay:a,onError:s,onDownload:u,thumbFit:l,thumbPlace:c,isVertical:d}=e,{urls:f={},url:h}=n,p=!1,g=f[o]||h,v=e=>{var{detail:t}=e;u(t.netStats.sizeInKb),a()};return{pause:()=>(t&&p&&(t.setUrl(""),p=!1),Promise.resolve()),play:()=>{if(t)return p||(a(),p=!0,t.setUrl(g).start()),Promise.resolve();vn(r,n,{thumbFit:l,thumbPlace:c},d);var e=new il;t=e,p=!0,a();var o=(e=>{var{modelId:t,onError:r,instance:n}=e;return e=>{var{detail:{errorType:i,nativeError:{statusCode:o,statusText:a}}}=e,s=(document.cookie.includes("sc-dev-hls"),i===Ka.MANIFEST_LOAD_ERROR||o>500);(s||ol.includes(o))&&(s&&n.destroy(),r({fatal:s,type:"hls",response:{text:a,code:o},modelId:t}))}})({modelId:i,onError:s,instance:t});return t.addEventListener(Ja.FRAG_LOADED,v),t.addEventListener(Ja.LIFECYCLE_ERROR,o),e.setVideoElement(r),e.setUrl(g).start(),Promise.resolve()},destroy:()=>{t&&t.destroy()}}},sl=e=>{var{video:t,stream:r,quality:n,onPlay:i,onError:o,thumbFit:a,isUsePreroll:s}=e,{urls:u={},url:l}=r;t.src=s?l:u[n]||l,fn({video:t,onPlay:i,onError:o,onMetaLoaded:()=>{t.setAttribute("metaloaded","true"),vn(t,void 0,a)}})},ul=(e,t,r)=>{var{video:n,stream:i,modelId:o}=e,a=function(e){var{urls:t={}}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if("optimal"===r){var i=Object.keys(t).reduce((e,t)=>{var r=parseFloat(t);return Number.isNaN(r)?e:[...e,r]},[]).sort().find(e=>e>=n);return i&&"".concat(i,"p")}return t[r]?r:void 0}(i,Mr(t),n.clientHeight),{usePreroll:s,thumbFit:u,thumbPlace:l,landing:c}=(0,_.zj)(t),d=i.url.includes(".mp4"),f={video:n,stream:i,modelId:o,thumbFit:u,thumbPlace:l,isVertical:"vertical"===c,quality:a,onPlay:()=>r(Ln({modelId:o})),onError:e=>r(An(e)),onDownload:e=>r(Pn(e)),isUsePreroll:s},{urls:h={},url:p}=i,g=h[a]||p,v={video:n,stream:i,modelId:o,quality:a,streamUrl:g};switch(!0){case i.local:case d:sl(f);break;case Me():v.hls=al(f);break;case!!n.canPlayType("application/vnd.apple.mpegurl"):sl(f)}return v},ll=(0,ae.A)("Model updated"),cl=(0,ae.A)("Thumb appeared"),dl=(0,ae.A)("Thumb disappeared"),fl=(0,ae.A)("traffic limit exceeded"),hl=(0,ae.A)("traffic consumed"),pl=o(681),gl="sCashGuestId",vl=e=>{if(e.has(gl))return e.get(gl);var t=[...Array(64)].map(()=>Math.floor(16*Math.random()).toString(16)).join("");return e.set(gl,t,90),t},ml=(e,t)=>{var r=[],n=[],i=null,o=0,a=()=>r[0]&&e(r[0]);return{get items(){return r},get size(){return o},setOrder:e=>{n=e},isHeadedWith:e=>r[0]===e,append(e){r.includes(e)||(r=[...r,e].sort((e,t)=>n.indexOf(e)-n.indexOf(t)),o+=1)},remove(e){var n=r.length;(r=r.filter(t=>t!==e)).length<n&&(o-=1),t(e)},replace(e,t){this.remove(e),this.append(t)},run:e=>{r=n.filter(t=>e.playingState[t]),i=setInterval(a,300)},stop:()=>{clearInterval(i)},enough:()=>{r=[],o=0,n.forEach(t)},destroy(){this.stop(),this.enough()},next(){r.shift(),a()}}},_l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).some(r=>t[r]===e)},yl={key:"autoplay",title:"Autoplay",description:"\n    Possible values:\n    \n    onHover - default, play/stop on thumb's mouse hover/leave\n    all - the first 3 thumbs are playing immediately if a page is in focus and thumbs are in viewport, other thumbs are playing on hover. Autoplay stops after 1 min, thumbs can be played on hover.\n    notAtAll - thumbs are not playing.\n    forced to notAtAll, if nonNudeContent=1\n    Available values : onHover, all, notAtAll\n  ",section:_e,type:me.A.ENUM,enum:Object.values(F),default:F.ON_HOVER,multiple:!1},bl=()=>Me()||Boolean(document.createElement("video").canPlayType("application/vnd.apple.mpegurl")),El=["fatal","type","modelId"];function Ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(r),!0).forEach(function(t){wl(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ol(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wl(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tl=6e4,Ml=e=>t=>{var{modelId:r,force:n}=t;return t=>({playingState:Sl(Sl({},t.playingState),{},{[r]:n||On(t,r,Sn(e=>{var{id:t}=e;return t===r},t.modelsList))===e&&e})})},Ll=e=>e.modelsList.filter(En(e)).map(e=>{var{id:t}=e;return t}),Al=(0,Z.A)((e,t,r,n)=>{var i,{navigator:o}=e,a=dn(),s=(0,re.A)({playingState:{},playerEnabled:!0,isPlaybackErrorSent:!1,failedToPlayCount:0,viewEventTimes:{}}).on(Xt.modelsReadyEvent,()=>e=>({playingState:e.modelsList.reduce((t,r,n)=>{var{id:i}=r;return Sl(Sl({},t),{},{[i]:On(e,i,n)})},{})})).on(Tn,Ml(!0)).on(Mn,Ml(!1)).on(In,e=>e).on(jn,()=>({playerEnabled:!1})).on(Dn,()=>({playerEnabled:!0})).on(Rn,e=>t=>({viewEventTimes:Sl(Sl({},t.viewEventTimes),{},{[e]:Date.now()})})).on(Nn,()=>({isPlaybackErrorSent:!0})),u=ml((e=>t=>{var{video:r,hls:n,playing:i=Promise.resolve(),isPlaying:o=!1}=e.get(t)||{};r&&!o&&e.update(t,{playing:i.then(()=>Promise.resolve(n?n.play():r.play()).catch(Te)),isPlaying:!0})})(a),(e=>t=>{var{video:r,hls:n,playing:i=Promise.resolve(),isPlaying:o}=e.get(t)||{};r&&o&&(e.clearTimeouts(t),e.update(t,{playing:i.then(()=>Promise.resolve(n?n.pause():r.pause()).catch(Te)),isPlaying:!1}))})(a)),l=Pn.effect(e=>(t,r)=>r(hl(e))),c=fl.effect(()=>(e,t)=>{t(...wn(e).map(e=>Mn({modelId:e}))),u.stop()}),d=te.z.effect(()=>(e,t)=>{e.config.nonStopPlaying||setTimeout(()=>{t(jn())},6e4)}),f=jn.effect(()=>u.enough()),h=Tn.effect(e=>{var{modelId:n,force:i}=e;return e=>{var{playingState:o,playerEnabled:s}=e;if(s&&o[n]&&u.size<3||i){u.append(n);var{landing:l,queryParams:{userId:c,smartpopId:d,masterSmartpopId:f,sourceId:h,creativeId:p,p1:g}}=(0,_.zj)(e);if((0,Tt.IV)("storePlay")(e).enabled){var v=a.get(n),m=null!=v&&v.hls?"hls":"video";null!=v&&v.playingInterval&&a.clearPlayingInterval(n),a.update(n,{playingInterval:setInterval(()=>{var e,i,o,s=a.get(n).playingTime||0;s%Tl===0&&(e=s/Tl,i=(0,pl.A)(r),o={type:m,minute:e,landing:l,domain:r.hostname,userId:c,smartpopId:d,masterSmartpopId:f,sourceId:h,creativeId:p,p1:g},t.post("".concat(i,"/metric/store/play"),{message:o})),a.update(n,{playingTime:s+1e3})},1e3)})}}}}),p=Mn.effect(e=>{var{modelId:t}=e;return e=>{var{playingState:r}=e;r[t]||(u.remove(t),a.clearPlayingInterval(t))}}),g=Ln.effect(e=>{var{modelId:t}=e;u.isHeadedWith(t)&&u.next(),a.clearTimeouts(t)}),v=Xt.modelsReadyEvent.effectOnce(()=>e=>{u.setOrder(Ll(e)),u.run(e)}),m=Xt.replaceModelByModel.effect(e=>{var{modelId:t,replaceBy:r}=e;return e=>a.waitFor(r.id).then(()=>{u.setOrder(Ll(e)),u.replace(t,r.id)})}),y=An.effect(e=>{var{fatal:i,type:o,modelId:s}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,El);return(e,l)=>{var c=a.get(s),{landing:d,thumbFit:f,queryParams:{userId:h=""}}=(0,_.zj)(e),p=(0,Tt.IV)("storePlaybackError")(e);if(!i&&!e.isPlaybackErrorSent&&p.enabled){var g,v=(0,pl.A)(r),m=(null==u||null===(g=u.response)||void 0===g?void 0:g.text)||"";t.post("".concat(v,"/metric/store/creative-playback-error"),{message:Sl(Sl({type:o,error:!0,landing:d,guestId:vl(n)},h?{userId:h}:[]),m?{errorMessage:m}:[])}),l(Nn())}!i&&e.window.hasFocus&&c&&(c.hls?c.hls.play():e.failedToPlayCount<=10&&((e=>{for(var{stream:t,video:r,onPlay:n,onError:i,thumbFit:o}=e,a=r.parentElement,s=a.getElementsByTagName("video"),u=s.length-1;u<0;u--)s[u].id!==r.id&&a.removeChild(s[u]);var l=document.createElement("video");l.id=Math.random(),l.src=t.url,l.muted="muted",l.playsinline="playsinline",l.style.height=r.style.height,l.style.width="auto",r.parentElement.appendChild(l),l.load(),l.addEventListener("loadedmetadata",()=>{l.play()}),fn({video:l,onPlay:n,onError:i,onMetaLoaded:()=>{l.setAttribute("metaloaded","true"),vn(l,void 0,o)}})})({thumbFit:f,stream:c.stream,video:c.video,onPlay:()=>l(Ln({modelId:s})),onError:e=>l(An(Sl(Sl({},e),{},{modelId:s})))}),l(In(e.failedToPlayCount+1))),c.recoveryTimeout||a.update(s,{recoveryTimeout:setTimeout(()=>{l(An({modelId:s,fatal:!0})),c.hls&&c.hls.destroy()},3e3)}))}}),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return()=>(r,n)=>(n(Rn(e)),n(...r.modelsList.map((e,n)=>{var{id:i}=e;return On(r,i,n)?Tn({modelId:i,force:t}):Mn({modelId:i,force:t})})))},M=ue.effect(E(O)),L=le.effect(E(S,!0)),A=cl.effect(E(w)),P=dl.effect(E(T)),j=se.effect(()=>{u.destroy(),clearInterval(null)});return{reducer:s,effects:[A,P,v,m,(0,_.I0)((i=/Chrome/.test(o.userAgent)&&/Google Inc/.test(o.vendor),{acceptedParamsConfig:[yl,{key:"player",title:"Player engine",description:"",section:_e,type:me.A.ENUM,enum:Object.values(U),isAccepted:e=>!(!_l(e,U)||e===U.HLS&&!bl()),default:U.HLS,convertValue:e=>e===U.HLS&&100*Math.random()<=100&&bl()?U.HLS:U.CANVAS,private:!0},{key:"thumbFit",section:_e,type:me.A.ENUM,default:b.Cover,enum:Object.values(b),title:"Thumb Fit",multiple:!1},{key:"hideLiveBadge",title:"Hide live badge",description:"",type:me.A.BOOL,section:_e,default:!1,convertValue:(e,t)=>{var{hideLiveBadge:r,showLiveBadge:n="1"}=t;return r?Boolean(Number(r)):!Number(n)}},{key:"hideModelName",title:"Hide model name",description:"",type:me.A.BOOL,section:_e,default:!1,convertValue:(e,t)=>{var{hideModelName:r,showModelName:n="1"}=t;return r?Boolean(Number(r)):!Number(n)}},{key:"autoplayForce",section:_e,type:me.A.BOOL,default:!i},{key:"playButton",title:"Show play button",section:_e,type:me.A.BOOL,default:!1},{key:"quality",title:"Video quality for models list",description:"It`s possible to choose quality for models videos",type:me.A.ENUM,section:_e,enum:["original","optimal","720p","480p","240p","160p"],default:"original",multiple:!1}],initialConfig:{randomAutoplayEnabled:!1}})),h,p,g,y,M,L,j,c,l,d,f],actions:{play:e=>(t,r)=>{(e?[e]:t.modelsList.map(e=>{var{id:t}=e;return t})).forEach(e=>{r(Tn({modelId:e,force:!0}))})},pause:e=>(t,r)=>r(...wn(t,e).map(e=>Mn({modelId:e}))),createVideo:e=>{var{video:t,stream:r,modelId:n}=e;return(e,i)=>(0,_.zj)(e).player===U.HLS&&a.create(n,ul({video:t,stream:r,modelId:n},e,i))}}}}).requires("window","Api","location","LocalStorage"),Pl=Al,jl=o(9773),Dl=e=>_l(e,z),Rl=(0,jl.A)(Dl,e=>!!V[e]),Nl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.S_CHAT_BEST;return{acceptedParamsConfig:[{key:"thumbType",title:"Thumb type",description:"determines which property to use as thumb SChatBest: best icon of stripchat (popularSnapshotUrl) SCashBest: ab - testing of snapshots using stripcash api snapshot: latest snapshot (snapshotUrl) preview: icon setted by model as preview depreated thumb: alias of snapshot SCbest: alias of SChatBest",section:_e,type:me.A.ENUM,multiple:!1,enum:[z.S_CHAT_BEST,z.DEFAULT,z.AVATAR],isAccepted:(e,t)=>{var{thumbsSource:r,thumbs:n,xhThumbType:i}=t;return[e,r,n,i].some(Rl)},default:e,convertValue:(t,r)=>{var{thumbsSource:n,thumbs:i,xhThumbType:o}=r;return(e=>Dl(e)?e:V[e])([n,i,o,t].find(Rl)||e)}}]}},Il=["id"];function Cl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(r),!0).forEach(function(t){xl(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xl(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bl=e=>t=>{var{modelId:r}=t;return t=>{var{thumbsByModelId:n}=t;return{thumbsByModelId:kl(kl({},n),{},{[r]:kl(kl({},n[r]),e)})}}},Fl=function(){var e,{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?e=>e.id===t:(e=!0,()=>e)},Ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.S_CHAT_BEST;return(0,Z.A)(()=>{var t=(0,re.A)({thumbsByModelId:{}}).on(cl,Bl({visible:!0})).on(dl,Bl({visible:!1})).on(Xt.modelsReadyEvent,e=>t=>{var r=Fl(e);return{modelsList:t.modelsList.map(e=>r(e)?kl(kl({},e),{},{thumbUrl:e[yn(t,e)]}):e)}}).on(ll,e=>{var{id:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Il);return e=>{var{modelsList:n=[]}=e;return{modelsList:n.map(e=>e.id===t?kl(kl({},e),r):e)}}}),r=Xt.modelsReadyEvent.effect(e=>(t,r)=>{var{modelsList:n}=t;return n.filter(Fl(e)).forEach(e=>{var t,{id:n,snapshotUrl:i,thumbUrl:o,broadcastMobile:a}=e;r(hl(a?15:25)),(t=o,new Promise((e,r)=>{var n=new Image;n.onerror=()=>r(),n.onload=()=>e(t),n.src=t})).catch(()=>r(ll({id:n,thumbUrl:i})))})});return{reducer:t,effects:[(0,_.I0)(Nl(e)),r]}}).requires("Api")},zl=Ul,Vl=o(4343),ql="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Wl="9.46.0",Yl=globalThis;function Gl(){return Hl(Yl),Yl}function Hl(e){var t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Wl,t[Wl]=t[Wl]||{}}function Ql(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yl,n=r.__SENTRY__=r.__SENTRY__||{},i=n[Wl]=n[Wl]||{};return i[e]||(i[e]=t())}var Kl=["debug","info","warn","error","log","assert","trace"],Xl={};function Jl(e){if(!("console"in Yl))return e();var t=Yl.console,r={},n=Object.keys(Xl);n.forEach(e=>{var n=Xl[e];r[e]=t[e],t[e]=n});try{return e()}finally{n.forEach(e=>{t[e]=r[e]})}}function $l(){oc().enabled=!0}function Zl(){oc().enabled=!1}function ec(){return oc().enabled}function tc(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ic("log",...t)}function rc(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ic("warn",...t)}function nc(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ic("error",...t)}function ic(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];ql&&ec()&&Jl(()=>{Yl.console[e]("".concat("Sentry Logger ","[").concat(e,"]:"),...r)})}function oc(){return ql?Ql("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var ac={enable:$l,disable:Zl,isEnabled:ec,log:tc,warn:rc,error:nc},sc=[];function uc(e){var t,r=e.defaultIntegrations||[],n=e.integrations;if(r.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(n))t=[...r,...n];else if("function"==typeof n){var i=n(r);t=Array.isArray(i)?i:[i]}else t=r;return function(e){var t={};return e.forEach(e=>{var{name:r}=e,n=t[r];n&&!n.isDefaultInstance&&e.isDefaultInstance||(t[r]=e)}),Object.values(t)}(t)}function lc(e,t){for(var r of t)null!=r&&r.afterAllSetup&&r.afterAllSetup(e)}function cc(e,t,r){if(r[t.name])ql&&ac.log("Integration skipped because it was already installed: ".concat(t.name));else{if(r[t.name]=t,-1===sc.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),sc.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){var n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"==typeof t.processEvent){var i=t.processEvent.bind(t),o=Object.assign((t,r)=>i(t,r,e),{id:t.name});e.addEventProcessor(o)}ql&&ac.log("Integration installed: ".concat(t.name))}}function dc(e){var t=[];e.message&&t.push(e.message);try{var r=e.exception.values[e.exception.values.length-1];null!=r&&r.value&&(t.push(r.value),r.type&&t.push("".concat(r.type,": ").concat(r.value)))}catch(n){}return t}var fc=Object.prototype.toString;function hc(e){switch(fc.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Sc(e,Error)}}function pc(e,t){return fc.call(e)==="[object ".concat(t,"]")}function gc(e){return pc(e,"ErrorEvent")}function vc(e){return pc(e,"DOMError")}function mc(e){return pc(e,"String")}function _c(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function yc(e){return null===e||_c(e)||"object"!=typeof e&&"function"!=typeof e}function bc(e){return pc(e,"Object")}function Ec(e){return"undefined"!=typeof Event&&Sc(e,Event)}function Oc(e){return Boolean((null==e?void 0:e.then)&&"function"==typeof e.then)}function Sc(e,t){try{return e instanceof t}catch(r){return!1}}function wc(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}var Tc=Yl;function Mc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{for(var r,n=e,i=[],o=0,a=0,s=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||80;n&&o++<5&&!("html"===(r=Lc(n,s))||o>1&&a+3*i.length+r.length>=u);)i.push(r),a+=r.length,n=n.parentNode;return i.reverse().join(" > ")}catch(l){return"<unknown>"}}function Lc(e,t){var r=e,n=[];if(null==r||!r.tagName)return"";if(Tc.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());var i=null!=t&&t.length?t.filter(e=>r.getAttribute(e)).map(e=>[e,r.getAttribute(e)]):null;if(null!=i&&i.length)i.forEach(e=>{n.push("[".concat(e[0],'="').concat(e[1],'"]'))});else{r.id&&n.push("#".concat(r.id));var o=r.className;if(o&&mc(o)){var a=o.split(/\s+/);for(var s of a)n.push(".".concat(s))}}for(var u of["aria-label","type","name","title","alt"]){var l=r.getAttribute(u);l&&n.push("[".concat(u,'="').concat(l,'"]'))}return n.join("")}function Ac(){try{return Tc.document.location.href}catch(e){return""}}function Pc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===t||e.length<=t?e:"".concat(e.slice(0,t),"...")}function jc(e,t){if(!Array.isArray(e))return"";for(var r=[],n=0;n<e.length;n++){var i=e[n];try{wc(i)?r.push("[VueViewModel]"):r.push(String(i))}catch(o){r.push("[value cannot be serialized]")}}return r.join(t)}function Dc(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!mc(e)&&(pc(t,"RegExp")?t.test(e):!!mc(t)&&(r?e===t:e.includes(t)))}function Rc(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some(r=>Dc(e,r,t))}function Nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(r),!0).forEach(function(t){Cc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kc(e,t,r){if(t in e){var n=e[t];if("function"==typeof n){var i=r(n);"function"==typeof i&&Bc(i,n);try{e[t]=i}catch(o){ql&&ac.log('Failed to replace method "'.concat(t,'" in object'),e)}}}}function xc(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(n){ql&&ac.log('Failed to add non-enumerable property "'.concat(t,'" to object'),e)}}function Bc(e,t){try{var r=t.prototype||{};e.prototype=t.prototype=r,xc(e,"__sentry_original__",t)}catch(n){}}function Fc(e){return e.__sentry_original__}function Uc(e){if(hc(e))return Ic({message:e.message,name:e.name,stack:e.stack},Vc(e));if(Ec(e)){var t=Ic({type:e.type,target:zc(e.target),currentTarget:zc(e.currentTarget)},Vc(e));return"undefined"!=typeof CustomEvent&&Sc(e,CustomEvent)&&(t.detail=e.detail),t}return e}function zc(e){try{return t=e,"undefined"!=typeof Element&&Sc(t,Element)?Mc(e):Object.prototype.toString.call(e)}catch(r){return"<unknown>"}var t}function Vc(e){if("object"==typeof e&&null!==e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function qc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(r),!0).forEach(function(t){Yc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gc(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e=Yl).crypto||e.msCrypto,r=()=>16*Math.random();try{if(null!=t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");null!=t&&t.getRandomValues&&(r=()=>{var e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(n){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&r())>>e/4).toString(16))}function Hc(e){var t;return null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t?void 0:t[0]}function Qc(e){var{message:t,event_id:r}=e;if(t)return t;var n=Hc(e);return n?n.type&&n.value?"".concat(n.type,": ").concat(n.value):n.type||n.value||r||"<unknown>":r||"<unknown>"}function Kc(e,t,r){var n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function Xc(e,t){var r=Hc(e);if(r){var n=r.mechanism;if(r.mechanism=Wc(Wc(Wc({},{type:"generic",handled:!0}),n),t),t&&"data"in t){var i=Wc(Wc({},null==n?void 0:n.data),t.data);r.mechanism.data=i}}}function Jc(e){if(function(e){try{return e.__sentry_captured__}catch(t){}}(e))return!0;try{xc(e,"__sentry_captured__",!0)}catch(t){}return!1}function $c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(r),!0).forEach(function(t){ed(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ed(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var td=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],rd=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"EventFilters",setup(r){var n=r.getOptions();e=id(t,n)},processEvent(r,n,i){if(!e){var o=i.getOptions();e=id(t,o)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(null==t||!t.length)return!1;var r=e.transaction;return!!r&&Rc(r,t)}(e,t.ignoreTransactions))return ql&&ac.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(Qc(e))),!0}else{if(function(e,t){if(null==t||!t.length)return!1;return dc(e).some(e=>Rc(e,t))}(e,t.ignoreErrors))return ql&&ac.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(Qc(e))),!0;if(function(e){var t;if(null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t||!t.length)return!1;return!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value)}(e))return ql&&ac.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(Qc(e))),!0;if(function(e,t){if(null==t||!t.length)return!1;var r=od(e);return!!r&&Rc(r,t)}(e,t.denyUrls))return ql&&ac.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(Qc(e),".\nUrl: ").concat(od(e))),!0;if(!function(e,t){if(null==t||!t.length)return!0;var r=od(e);return!r||Rc(r,t)}(e,t.allowUrls))return ql&&ac.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(Qc(e),".\nUrl: ").concat(od(e))),!0}return!1}(r,e)?null:r}}},nd=function(){return Zc(Zc({},rd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),{},{name:"InboundFilters"})};function id(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:td],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function od(e){try{var t,r,n,i=[...null!==(t=null===(r=e.exception)||void 0===r?void 0:r.values)&&void 0!==t?t:[]].reverse().find(e=>{var t,r;return void 0===(null===(t=e.mechanism)||void 0===t?void 0:t.parent_id)&&(null===(r=e.stacktrace)||void 0===r||null===(r=r.frames)||void 0===r?void 0:r.length)}),o=null==i||null===(n=i.stacktrace)||void 0===n?void 0:n.frames;return o?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length-1;t>=0;t--){var r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(o):null}catch(a){return ql&&ac.error("Cannot extract url for event ".concat(Qc(e))),null}}var ad;function sd(){return Date.now()/1e3}function ud(){return(null!=ad?ad:ad=function(){var{performance:e}=Yl;if(null==e||!e.now||!e.timeOrigin)return sd;var t=e.timeOrigin;return()=>(t+e.now())/1e3}())()}function ld(e){var t=ud(),r={sid:Gc(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(r)};return e&&cd(r,e),r}function cd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ud(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Gc()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{var r=e.timestamp-e.started;e.duration=r>=0?r:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function dd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!t||"object"!=typeof t||r<=0)return t;if(e&&0===Object.keys(t).length)return e;var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dd(Object(r),!0).forEach(function(t){fd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=hd(n[i],t[i],r-1));return n}function pd(){return Gc()}function gd(){return Gc().substring(16)}var vd="_sentrySpan";function md(e,t){t?xc(e,vd,t):delete e[vd]}function _d(e){return e[vd]}function yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(r),!0).forEach(function(t){Ed(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ed(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Od;class Sd{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:pd(),sampleRand:Math.random()}}clone(){var e=new Sd;return e._breadcrumbs=[...this._breadcrumbs],e._tags=bd({},this._tags),e._extra=bd({},this._extra),e._contexts=bd({},this._contexts),this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata=bd({},this._sdkProcessingMetadata),e._propagationContext=bd({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,md(e,_d(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&cd(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags=bd(bd({},this._tags),e),this._notifyScopeListeners(),this}setTag(e,t){return this._tags=bd(bd({},this._tags),{},{[e]:t}),this._notifyScopeListeners(),this}setExtras(e){return this._extra=bd(bd({},this._extra),e),this._notifyScopeListeners(),this}setExtra(e,t){return this._extra=bd(bd({},this._extra),{},{[e]:t}),this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;var t="function"==typeof e?e(this):e,r=t instanceof Sd?t.getScopeData():bc(t)?e:void 0,{tags:n,extra:i,user:o,contexts:a,level:s,fingerprint:u=[],propagationContext:l}=r||{};return this._tags=bd(bd({},this._tags),n),this._extra=bd(bd({},this._extra),i),this._contexts=bd(bd({},this._contexts),a),o&&Object.keys(o).length&&(this._user=o),s&&(this._level=s),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,md(this,void 0),this._attachments=[],this.setPropagationContext({traceId:pd(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){var r="number"==typeof t?t:100;if(r<=0)return this;var n,i=bd(bd({timestamp:sd()},e),{},{message:e.message?Pc(e.message,2048):e.message});(this._breadcrumbs.push(i),this._breadcrumbs.length>r)&&(this._breadcrumbs=this._breadcrumbs.slice(-r),null===(n=this._client)||void 0===n||n.recordDroppedEvent("buffer_overflow","log_item"));return this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_d(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=hd(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){var r=(null==t?void 0:t.event_id)||Gc();if(!this._client)return ql&&ac.warn("No client configured on scope - will not capture exception!"),r;var n=new Error("Sentry syntheticException");return this._client.captureException(e,bd(bd({originalException:e,syntheticException:n},t),{},{event_id:r}),this),r}captureMessage(e,t,r){var n=(null==r?void 0:r.event_id)||Gc();if(!this._client)return ql&&ac.warn("No client configured on scope - will not capture message!"),n;var i=new Error(e);return this._client.captureMessage(e,t,bd(bd({originalException:e,syntheticException:i},r),{},{event_id:n}),this),n}captureEvent(e,t){var r=(null==t?void 0:t.event_id)||Gc();return this._client?(this._client.captureEvent(e,bd(bd({},t),{},{event_id:r}),this),r):(ql&&ac.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class wd{constructor(e,t){var r,n;r=e||new Sd,n=t||new Sd,this._stack=[{scope:r}],this._isolationScope=n}withScope(e){var t,r=this._pushScope();try{t=e(r)}catch(Ev){throw this._popScope(),Ev}return Oc(t)?t.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){var e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Td(){var e=Hl(Gl());return e.stack=e.stack||new wd(Ql("defaultCurrentScope",()=>new Sd),Ql("defaultIsolationScope",()=>new Sd))}function Md(e){return Td().withScope(e)}function Ld(e,t){var r=Td();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function Ad(e){return Td().withScope(()=>e(Td().getIsolationScope()))}function Pd(e){var t=Hl(e);return t.acs?t.acs:{withIsolationScope:Ad,withScope:Md,withSetScope:Ld,withSetIsolationScope:(e,t)=>Ad(t),getCurrentScope:()=>Td().getScope(),getIsolationScope:()=>Td().getIsolationScope()}}function jd(){return Pd(Gl()).getCurrentScope()}function Dd(){return Pd(Gl()).getIsolationScope()}function Rd(){return jd().getClient()}function Nd(e){var t=e.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:i}=t,o={trace_id:r,span_id:i||gd()};return n&&(o.parent_span_id=n),o}var Id=new WeakMap,Cd=()=>({name:"FunctionToString",setupOnce(){Od=Function.prototype.toString;try{Function.prototype.toString=function(){for(var e=Fc(this),t=Id.has(Rd())&&void 0!==e?e:this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Od.apply(t,n)}}catch(e){}},setup(e){Id.set(e,!0)}});function kd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(r),!0).forEach(function(t){Bd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Bd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fd="?",Ud=/\(error: (.*)\)/,zd=/captureMessage|captureException/;function Vd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],o=e.split("\n"),a=t;a<o.length;a++){var s=o[a];if(!(s.length>1024)){var u=Ud.test(s)?s.replace(Ud,"$1"):s;if(!u.match(/\S*Error: /)){for(var l of n){var c=l(u);if(c){i.push(c);break}}if(i.length>=50+r)break}}}return function(e){if(!e.length)return[];var t=Array.from(e);/sentryWrapped/.test(qd(t).function||"")&&t.pop();t.reverse(),zd.test(qd(t).function||"")&&(t.pop(),zd.test(qd(t).function||"")&&t.pop());return t.slice(0,50).map(e=>xd(xd({},e),{},{filename:e.filename||qd(t).filename,function:e.function||Fd}))}(i.slice(r))}}function qd(e){return e[e.length-1]||{}}var Wd="<anonymous>";function Yd(e){try{return e&&"function"==typeof e&&e.name||Wd}catch(t){return Wd}}function Gd(e){var t=e.exception;if(t){var r=[];try{return t.values.forEach(e=>{e.stacktrace.frames&&r.push(...e.stacktrace.frames)}),r}catch(n){return}}}var Hd=()=>{var e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){var r=e.message,n=t.message;if(!r&&!n)return!1;if(r&&!n||!r&&n)return!1;if(r!==n)return!1;if(!Kd(e,t))return!1;if(!Qd(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){var r=Xd(t),n=Xd(e);if(!r||!n)return!1;if(r.type!==n.type||r.value!==n.value)return!1;if(!Kd(e,t))return!1;if(!Qd(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return ql&&ac.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(r){}return e=t}}};function Qd(e,t){var r=Gd(e),n=Gd(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i],a=r[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function Kd(e,t){var r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(i){return!1}}function Xd(e){var t;return null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t?void 0:t[0]}function Jd(e,t){!0===t.debug&&(ql?ac.enable():Jl(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),jd().update(t.initialScope);var r=new e(t);return function(e){jd().setClient(e)}(r),r.init(),r}function $d(e){var t=e.protocol?"".concat(e.protocol,":"):"",r=e.port?":".concat(e.port):"";return"".concat(t,"//").concat(e.host).concat(r).concat(e.path?"/".concat(e.path):"","/api/")}function Zd(e,t,r){return t||"".concat(function(e){return"".concat($d(e)).concat(e.projectId,"/envelope/")}(e),"?").concat(function(e,t){var r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client="".concat(t.name,"/").concat(t.version)),new URLSearchParams(r).toString()}(e,r))}var ef="production",tf=/^o(\d+)\./,rf=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function nf(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{host:r,path:n,pass:i,port:o,projectId:a,protocol:s,publicKey:u}=e;return"".concat(s,"://").concat(u).concat(t&&i?":".concat(i):"")+"@".concat(r).concat(o?":".concat(o):"","/").concat(n?"".concat(n,"/"):n).concat(a)}function of(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function af(e){var t="string"==typeof e?function(e){var t=rf.exec(e);if(t){var[r,n,i="",o="",a="",s=""]=t.slice(1),u="",l=s,c=l.split("/");if(c.length>1&&(u=c.slice(0,-1).join("/"),l=c.pop()),l){var d=l.match(/^\d+/);d&&(l=d[0])}return of({host:o,pass:i,path:u,projectId:l,port:a,protocol:r,publicKey:n})}Jl(()=>{console.error("Invalid Sentry Dsn: ".concat(e))})}(e):of(e);if(t&&function(e){if(!ql)return!0;var{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(ac.error("Invalid Sentry Dsn: ".concat(t," missing")),!0))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(ac.error("Invalid Sentry Dsn: Invalid port ".concat(t)),1):(ac.error("Invalid Sentry Dsn: Invalid protocol ".concat(n)),1):(ac.error("Invalid Sentry Dsn: Invalid projectId ".concat(r)),1)))}(t))return t}function sf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return lf("",e,t,r)}catch(n){return{ERROR:"**non-serializable** (".concat(n,")")}}}function uf(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400,i=sf(e,r);return t=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(t))>n?uf(e,r-1,n):i}function lf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){var e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function r(t){e.delete(t)}return[t,r]}(),[o,a]=i;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;var s=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(wc(t))return"[VueViewModel]";if(bc(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return"[".concat(t,"]");if("function"==typeof t)return"[Function: ".concat(Yd(t),"]");if("symbol"==typeof t)return"[".concat(String(t),"]");if("bigint"==typeof t)return"[BigInt: ".concat(String(t),"]");var r=function(e){var t=Object.getPrototypeOf(e);return null!=t&&t.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?"[HTMLElement: ".concat(r,"]"):"[object ".concat(r,"]")}catch(i){return"**non-serializable** (".concat(i,")")}var n}(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;var u="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===u)return s.replace("object ","");if(o(t))return"[Circular ~]";var l=t;if(l&&"function"==typeof l.toJSON)try{return lf("",l.toJSON(),u-1,n,i)}catch(g){}var c=Array.isArray(t)?[]:{},d=0,f=Uc(t);for(var h in f)if(Object.prototype.hasOwnProperty.call(f,h)){if(d>=n){c[h]="[MaxProperties ~]";break}var p=f[h];c[h]=lf(h,p,u-1,n,i),d++}return a(t),c}function cf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function df(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(r),!0).forEach(function(t){ff(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ff(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hf(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}function pf(e,t){var[r,n]=e;return[r,[...n,t]]}function gf(e,t){var r=e[1];for(var n of r){if(t(n,n[0].type))return!0}return!1}function vf(e){var t=Hl(Yl);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function mf(e){var[t,r]=e,n=JSON.stringify(t);function i(e){"string"==typeof n?n="string"==typeof e?n+e:[vf(n),e]:n.push("string"==typeof e?vf(e):e)}for(var o of r){var[a,s]=o;if(i("\n".concat(JSON.stringify(a),"\n")),"string"==typeof s||s instanceof Uint8Array)i(s);else{var u=void 0;try{u=JSON.stringify(s)}catch(l){u=JSON.stringify(sf(s))}i(u)}}return"string"==typeof n?n:function(e){var t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t),n=0;for(var i of e)r.set(i,n),n+=i.length;return r}(n)}function _f(e){var t="string"==typeof e.data?vf(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var yf={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function bf(e){return yf[e]}function Ef(e){if(null!=e&&e.sdk){var{name:t,version:r}=e.sdk;return{name:t,version:r}}}function Of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(r),!0).forEach(function(t){wf(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Of(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tf(e,t,r,n){var i=Ef(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,null==r?void 0:r.sdk);var a=function(e,t,r,n){var i,o=null===(i=e.sdkProcessingMetadata)||void 0===i?void 0:i.dynamicSamplingContext;return df(df(df({event_id:e.event_id,sent_at:(new Date).toISOString()},t&&{sdk:t}),!!r&&n&&{dsn:nf(n)}),o&&{trace:o})}(e,i,n,t);return delete e.sdkProcessingMetadata,hf(a,[[{type:o},e]])}var Mf="sentry.profile_id",Lf="sentry.exclusive_time",Af=/^sentry-/;function Pf(e){var t=function(e){if(!e||!mc(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{var r=jf(t);return Object.entries(r).forEach(t=>{var[r,n]=t;e[r]=n}),e},{});return jf(e)}(e);if(t){var r=Object.entries(t).reduce((e,t)=>{var[r,n]=t;r.match(Af)&&(e[r.slice(7)]=n);return e},{});return Object.keys(r).length>0?r:void 0}}function jf(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch(t){return}})).reduce((e,t)=>{var[r,n]=t;return r&&n&&(e[r]=n),e},{})}function Df(e){var t;if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;var r=e||(null===(t=Rd())||void 0===t?void 0:t.getOptions());return!(!r||null==r.tracesSampleRate&&!r.tracesSampler)}var Rf="_sentryScope",Nf="_sentryIsolationScope";function If(e){return{scope:e[Rf],isolationScope:e[Nf]}}var Cf=["spanId","traceId","traceFlags"];function kf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bf=!1;function Ff(e){var{spanId:t,traceId:r,isRemote:n}=e.spanContext(),i=n?t:qf(e).parent_span_id,o=If(e).scope;return{parent_span_id:i,span_id:n?(null==o?void 0:o.getPropagationContext().propagationSpanId)||gd():t,trace_id:r}}function Uf(e){return e&&e.length>0?e.map(e=>{var{context:{spanId:t,traceId:r,traceFlags:n},attributes:i}=e,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e.context,Cf);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kf(Object(r),!0).forEach(function(t){xf(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({span_id:t,trace_id:r,sampled:1===n,attributes:i},o)}):void 0}function zf(e){return"number"==typeof e?Vf(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Vf(e.getTime()):ud()}function Vf(e){return e>9999999999?e/1e3:e}function qf(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();var{spanId:t,traceId:r}=e.spanContext();if(function(e){var t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){var n,{attributes:i,startTime:o,name:a,endTime:s,status:u,links:l}=e;return{span_id:t,trace_id:r,data:i,description:a,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?null===(n=e.parentSpanContext)||void 0===n?void 0:n.spanId:void 0,start_timestamp:zf(o),timestamp:zf(s)||void 0,status:Yf(u),op:i["sentry.op"],origin:i["sentry.origin"],links:Uf(l)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function Wf(e){var{traceFlags:t}=e.spanContext();return 1===t}function Yf(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}var Gf="_sentryRootSpan";function Hf(e){return e[Gf]||e}function Qf(){Bf||(Jl(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Bf=!0)}var Kf="_frozenDsc";function Xf(e,t){var r,n=t.getOptions(),{publicKey:i,host:o}=t.getDsn()||{};n.orgId?r=String(n.orgId):o&&(r=function(e){var t=e.match(tf);return null==t?void 0:t[1]}(o));var a={environment:n.environment||ef,release:n.release,public_key:i,trace_id:e,org_id:r};return t.emit("createDsc",a),a}function Jf(e){var t,r,n=Rd();if(!n)return{};var i=Hf(e),o=qf(i),a=o.data,s=i.spanContext().traceState,u=null!==(t=null!==(r=null==s?void 0:s.get("sentry.sample_rate"))&&void 0!==r?r:a["sentry.sample_rate"])&&void 0!==t?t:a["sentry.previous_trace_sample_rate"];function l(e){return"number"!=typeof u&&"string"!=typeof u||(e.sample_rate="".concat(u)),e}var c=i[Kf];if(c)return l(c);var d=null==s?void 0:s.get("sentry.dsc"),f=d&&Pf(d);if(f)return l(f);var h,p,g=Xf(e.spanContext().traceId,n),v=a["sentry.source"],m=o.description;("url"!==v&&m&&(g.transaction=m),Df())&&(g.sampled=String(Wf(i)),g.sample_rand=null!==(h=null==s?void 0:s.get("sentry.sample_rand"))&&void 0!==h?h:null===(p=If(i).scope)||void 0===p?void 0:p.getPropagationContext().sampleRand.toString());return l(g),n.emit("createDsc",g,i),g}var $f,Zf,eh;function th(e){return new nh(t=>{t(e)})}function rh(e){return new nh((t,r)=>{r(e)})}class nh{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new nh((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(Ev){n(Ev)}else r(t)},e=>{if(t)try{r(t(e))}catch(Ev){n(Ev)}else n(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new nh((t,r)=>{var n,i;return this.then(t=>{i=!1,n=t,e&&e()},t=>{i=!0,n=t,e&&e()}).then(()=>{i?r(n):t(n)})})}_executeHandlers(){if(0!==this._state){var e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}}_runExecutor(e){var t=(e,t)=>{0===this._state&&(Oc(t)?t.then(r,n):(this._state=e,this._value=t,this._executeHandlers()))},r=e=>{t(1,e)},n=e=>{t(2,e)};try{e(r,n)}catch(Ev){n(Ev)}}}function ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ah(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new nh((i,o)=>{var a=e[n];if(null===t||"function"!=typeof a)i(t);else{var s=a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(r),!0).forEach(function(t){oh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ih(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t),r);ql&&a.id&&null===s&&ac.log('Event processor "'.concat(a.id,'" dropped event')),Oc(s)?s.then(t=>ah(e,t,r,n+1).then(i)).then(null,o):ah(e,s,r,n+1).then(i).then(null,o)}})}function sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(r),!0).forEach(function(t){lh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function lh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e,t){var{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){var{extra:r,tags:n,user:i,contexts:o,level:a,transactionName:s}=t;Object.keys(r).length&&(e.extra=uh(uh({},r),e.extra));Object.keys(n).length&&(e.tags=uh(uh({},n),e.tags));Object.keys(i).length&&(e.user=uh(uh({},i),e.user));Object.keys(o).length&&(e.contexts=uh(uh({},o),e.contexts));a&&(e.level=a);s&&"transaction"!==e.type&&(e.transaction=s)}(e,t),n&&function(e,t){e.contexts=uh({trace:Ff(t)},e.contexts),e.sdkProcessingMetadata=uh({dynamicSamplingContext:Jf(t)},e.sdkProcessingMetadata);var r=Hf(t),n=qf(r).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,n),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,r),function(e,t){var r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata=uh(uh({},e.sdkProcessingMetadata),t)}(e,o)}function dh(e,t){var{extra:r,tags:n,user:i,contexts:o,level:a,sdkProcessingMetadata:s,breadcrumbs:u,fingerprint:l,eventProcessors:c,attachments:d,propagationContext:f,transactionName:h,span:p}=t;fh(e,"extra",r),fh(e,"tags",n),fh(e,"user",i),fh(e,"contexts",o),e.sdkProcessingMetadata=hd(e.sdkProcessingMetadata,s,2),a&&(e.level=a),h&&(e.transactionName=h),p&&(e.span=p),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),c.length&&(e.eventProcessors=[...e.eventProcessors,...c]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext=uh(uh({},e.propagationContext),f)}function fh(e,t,r){e[t]=hd(e[t],r,1)}function hh(e){var t=Yl._sentryDebugIds;if(!t)return{};var r=Object.keys(t);return eh&&r.length===Zf||(Zf=r.length,eh=r.reduce((r,n)=>{$f||($f={});var i=$f[n];if(i)r[i[0]]=i[1];else for(var o=e(n),a=o.length-1;a>=0;a--){var s=o[a],u=null==s?void 0:s.filename,l=t[n];if(u&&l){r[u]=l,$f[n]=[u,l];break}}return r},{})),eh}function ph(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ph(Object(r),!0).forEach(function(t){vh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ph(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mh(e,t,r,n,i,o){var{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,u=gh(gh({},t),{},{event_id:t.event_id||r.event_id||Gc(),timestamp:t.timestamp||sd()}),l=r.integrations||e.integrations.map(e=>e.name);!function(e,t){var{environment:r,release:n,dist:i,maxValueLength:o=250}=t;e.environment=e.environment||r||ef,!e.release&&n&&(e.release=n);!e.dist&&i&&(e.dist=i);var a=e.request;null!=a&&a.url&&(a.url=Pc(a.url,o))}(u,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(u,l),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){var r,n=hh(t);null===(r=e.exception)||void 0===r||null===(r=r.values)||void 0===r||r.forEach(e=>{var t;null===(t=e.stacktrace)||void 0===t||null===(t=t.frames)||void 0===t||t.forEach(e=>{e.filename&&(e.debug_id=n[e.filename])})})}(u,e.stackParser);var c=function(e,t){if(!t)return e;var r=e?e.clone():new Sd;return r.update(t),r}(n,r.captureContext);r.mechanism&&Xc(u,r.mechanism);var d=i?i.getEventProcessors():[],f=Ql("globalScope",()=>new Sd).getScopeData();o&&dh(f,o.getScopeData());c&&dh(f,c.getScopeData());var h=[...r.attachments||[],...f.attachments];return h.length&&(r.attachments=h),ch(u,f),ah([...d,...f.eventProcessors],u,r).then(e=>(e&&function(e){var t,r={};if(null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t||t.forEach(e=>{var t;null===(t=e.stacktrace)||void 0===t||null===(t=t.frames)||void 0===t||t.forEach(e=>{e.debug_id&&(e.abs_path?r[e.abs_path]=e.debug_id:e.filename&&(r[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(r).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];var n=e.debug_meta.images;Object.entries(r).forEach(e=>{var[t,r]=e;n.push({type:"sourcemap",code_file:t,debug_id:r})})}(e),"number"==typeof a&&a>0?function(e,t,r){var n,i;if(!e)return null;var o=gh(gh(gh(gh(gh({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>gh(gh({},e),e.data&&{data:sf(e.data,t,r)}))}),e.user&&{user:sf(e.user,t,r)}),e.contexts&&{contexts:sf(e.contexts,t,r)}),e.extra&&{extra:sf(e.extra,t,r)});null!==(n=e.contexts)&&void 0!==n&&n.trace&&o.contexts&&(o.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(o.contexts.trace.data=sf(e.contexts.trace.data,t,r)));e.spans&&(o.spans=e.spans.map(e=>gh(gh({},e),e.data&&{data:sf(e.data,t,r)})));null!==(i=e.contexts)&&void 0!==i&&i.flags&&o.contexts&&(o.contexts.flags=sf(e.contexts.flags,3,r));return o}(e,a,s):e))}function _h(e){if(e)return function(e){return e instanceof Sd||"function"==typeof e}(e)||function(e){return Object.keys(e).some(e=>yh.includes(e))}(e)?{captureContext:e}:e}var yh=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function bh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bh(Object(r),!0).forEach(function(t){Oh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Oh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(r),!0).forEach(function(t){Th(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Th(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mh="Not capturing exception because it's already been captured.",Lh="Discarded session because of missing or non-string release",Ah=Symbol.for("SentryInternalError"),Ph=Symbol.for("SentryDoNotSendEventError");function jh(e){return{message:e,[Ah]:!0}}function Dh(e){return{message:e,[Ph]:!0}}function Rh(e){return!!e&&"object"==typeof e&&Ah in e}function Nh(e){return!!e&&"object"==typeof e&&Ph in e}class Ih{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=af(e.dsn):ql&&ac.warn("No DSN provided, client will not send events."),this._dsn){var t=Zd(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport(wh(wh({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},e.transportOptions),{},{url:t}))}}captureException(e,t,r){var n=Gc();if(Jc(e))return ql&&ac.log(Mh),n;var i=wh({event_id:n},t);return this._process(this.eventFromException(e,i).then(e=>this._captureEvent(e,i,r))),i.event_id}captureMessage(e,t,r,n){var i=wh({event_id:Gc()},r),o=_c(e)?e:String(e),a=yc(e)?this.eventFromMessage(o,t,i):this.eventFromException(e,i);return this._process(a.then(e=>this._captureEvent(e,i,n))),i.event_id}captureEvent(e,t,r){var n=Gc();if(null!=t&&t.originalException&&Jc(t.originalException))return ql&&ac.log(Mh),n;var i=wh({event_id:n},t),o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,s=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,a||r,s)),i.event_id}captureSession(e){this.sendSession(e),cd(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){var t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(e=>r&&e))):th(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(e=>{var{name:t}=e;return t.startsWith("Spotlight")}))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){var t=this._integrations[e.name];cc(this,e,this._integrations),t||lc(this,[e])}sendEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,t);var r=Tf(e,this._dsn,this._options._metadata,this._options.tunnel);for(var n of t.attachments||[])r=pf(r,_f(n));var i=this.sendEnvelope(r);i&&i.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){var{release:t,environment:r=ef}=this._options;if("aggregates"in e){var n=e.attrs||{};if(!n.release&&!t)return void(ql&&ac.warn(Lh));n.release=n.release||t,n.environment=n.environment||r,e.attrs=n}else{if(!e.release&&!t)return void(ql&&ac.warn(Lh));e.release=e.release||t,e.environment=e.environment||r}this.emit("beforeSendSession",e);var i=function(e,t,r,n){var i=Ef(r);return hf(Sf(Sf({sent_at:(new Date).toISOString()},i&&{sdk:i}),!!n&&t&&{dsn:nf(t)}),["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this._options.sendClientReports){var n="".concat(e,":").concat(t);ql&&ac.log('Recording outcome: "'.concat(n,'"').concat(r>1?" (".concat(r," times)"):"")),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(e,t){var r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{var e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=this._hooks[e];i&&i.forEach(e=>e(...r))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(ql&&ac.error("Error while sending envelope:",e),e)):(ql&&ac.error("Transport disabled"),th({}))}_setupIntegrations(){var{integrations:e}=this._options;this._integrations=function(e,t){var r={};return t.forEach(t=>{t&&cc(e,t,r)}),r}(this,e),lc(this,e)}_updateSessionFromEvent(e,t){var r,n="fatal"===t.level,i=!1,o=null===(r=t.exception)||void 0===r?void 0:r.values;if(o)for(var a of(i=!0,o)){var s=a.mechanism;if(!1===(null==s?void 0:s.handled)){n=!0;break}}var u="ok"===e.status;(u&&0===e.errors||u&&n)&&(cd(e,wh(wh({},n&&{status:"crashed"}),{},{errors:e.errors||Number(i||n)})),this.captureSession(e))}_isClientDoneProcessing(e){return new nh(t=>{var r=0,n=setInterval(()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n){var i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&null!=o&&o.length&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||n.setLastEventId(e.event_id||t.event_id),mh(i,e,t,r,this,n).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts=wh({trace:Nd(r)},e.contexts);var n,i,o=(n=this,(i=r.getPropagationContext()).dsc||Xf(i.traceId,n));return e.sdkProcessingMetadata=wh({dynamicSamplingContext:o},e.sdkProcessingMetadata),e})}_captureEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jd(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dd();return ql&&Ch(e)&&ac.log("Captured error event `".concat(dc(e)[0]||"<unknown>","`")),this._processEvent(e,t,r,n).then(e=>e.event_id,e=>{ql&&(Nh(e)?ac.log(e.message):Rh(e)?ac.warn(e.message):ac.warn(e))})}_processEvent(e,t,r,n){var i=this.getOptions(),{sampleRate:o}=i,a=kh(e),s=Ch(e),u=e.type||"error",l="before send for type `".concat(u,"`"),c=void 0===o?void 0:function(e){if("boolean"==typeof e)return Number(e);var t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(o);if(s&&"number"==typeof c&&Math.random()>c)return this.recordDroppedEvent("sample_rate","error"),rh(Dh("Discarding event because it's not included in the random sample (sampling rate = ".concat(o,")")));var d="replay_event"===u?"replay":u;return this._prepareEvent(e,t,r,n).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",d),Dh("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;var r=function(e,t,r,n){var{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:a}=t,s=r;if(Ch(s)&&i)return i(s,n);if(kh(s)){if(a){var u=a(function(e){var t,r,n,{trace_id:i,parent_span_id:o,span_id:a,status:s,origin:u,data:l,op:c}=null!==(t=null===(r=e.contexts)||void 0===r?void 0:r.trace)&&void 0!==t?t:{};return{data:null!=l?l:{},description:e.transaction,op:c,parent_span_id:o,span_id:null!=a?a:"",start_timestamp:null!==(n=e.start_timestamp)&&void 0!==n?n:0,status:s,timestamp:e.timestamp,trace_id:null!=i?i:"",origin:u,profile_id:null==l?void 0:l[Mf],exclusive_time:null==l?void 0:l[Lf],measurements:e.measurements,is_segment:!0}}(s));if(u?s=hd(r,function(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:Eh(Eh(Eh({},e.data),e.profile_id&&{[Mf]:e.profile_id}),e.exclusive_time&&{[Lf]:e.exclusive_time})}},measurements:e.measurements}}(u)):Qf(),s.spans){var l=[];for(var c of s.spans){var d=a(c);d?l.push(d):(Qf(),l.push(c))}s.spans=l}}if(o){if(s.spans){var f=s.spans.length;s.sdkProcessingMetadata=wh(wh({},r.sdkProcessingMetadata),{},{spanCountBeforeProcessing:f})}return o(s,n)}}return s}(0,i,e,t);return function(e,t){var r="".concat(t," must return `null` or a valid event.");if(Oc(e))return e.then(e=>{if(!bc(e)&&null!==e)throw jh(r);return e},e=>{throw jh("".concat(t," rejected with ").concat(e))});if(!bc(e)&&null!==e)throw jh(r);return e}(r,l)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",d),a){var o=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",o)}throw Dh("".concat(l," returned `null`, will not send event."))}var u=r.getSession()||n.getSession();if(s&&u&&this._updateSessionFromEvent(u,i),a){var c,f=((null===(c=i.sdkProcessingMetadata)||void 0===c?void 0:c.spanCountBeforeProcessing)||0)-(i.spans?i.spans.length:0);f>0&&this.recordDroppedEvent("before_send","span",f)}var h=i.transaction_info;if(a&&h&&i.transaction!==e.transaction){i.transaction_info=wh(wh({},h),{},{source:"custom"})}return this.sendEvent(i,t),i}).then(null,e=>{if(Nh(e)||Rh(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),jh("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(e))})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){var e=this._outcomes;return this._outcomes={},Object.entries(e).map(e=>{var[t,r]=e,[n,i]=t.split(":");return{reason:n,category:i,quantity:r}})}_flushOutcomes(){ql&&ac.log("Flushing outcomes...");var e=this._clearOutcomes();if(0!==e.length)if(this._dsn){ql&&ac.log("Sending outcomes:",e);var t,r,n,i=(t=e,hf((r=this._options.tunnel&&nf(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:n||sd(),discarded_events:t}]]));this.sendEnvelope(i)}else ql&&ac.log("No dsn provided, will not send outcomes");else ql&&ac.log("No outcomes to send")}}function Ch(e){return void 0===e.type}function kh(e){return"transaction"===e.type}function xh(e,t){var r,n=null!==(r=null!=t?t:Bh(e))&&void 0!==r?r:[];if(0!==n.length){var i,o,a,s,u,l,c=e.getOptions(),d=(i=n,o=c._metadata,a=c.tunnel,s=e.getDsn(),l={},null!=o&&o.sdk&&(l.sdk={name:o.sdk.name,version:o.sdk.version}),a&&s&&(l.dsn=nf(s)),hf(l,[(u=i,[{type:"log",item_count:u.length,content_type:"application/vnd.sentry.items.log+json"},{items:u}])]));Fh().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(d)}}function Bh(e){return Fh().get(e)}function Fh(){return Ql("clientToLogBufferMap",()=>new WeakMap)}function Uh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uh(Object(r),!0).forEach(function(t){Vh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qh(e){var t;void 0===(null===(t=e.user)||void 0===t?void 0:t.ip_address)&&(e.user=zh(zh({},e.user),{},{ip_address:"{{auto}}"}))}function Wh(e){var t;"aggregates"in e?void 0===(null===(t=e.attrs)||void 0===t?void 0:t.ip_address)&&(e.attrs=zh(zh({},e.attrs),{},{ip_address:"{{auto}}"})):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function Yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yh(Object(r),!0).forEach(function(t){Hh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Hh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qh(e,t){var r=Jh(e,t),n={type:ep(t),value:tp(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Kh(e,t,r,n){var i=Rd(),o=null==i?void 0:i.getOptions().normalizeDepth,a=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(r instanceof Error)return r}return}(t),s={__serialized__:uf(t,o)};if(a)return{exception:{values:[Qh(e,a)]},extra:s};var u={exception:{values:[{type:Ec(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:ip(t,{isUnhandledRejection:n})}]},extra:s};if(r){var l=Jh(e,r);l.length&&(u.exception.values[0].stacktrace={frames:l})}return u}function Xh(e,t){return{exception:{values:[Qh(e,t)]}}}function Jh(e,t){var r=t.stacktrace||t.stack||"",n=function(e){if(e&&$h.test(e.message))return 1;return 0}(t),i=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(r,n,i)}catch(o){}return[]}var $h=/Minified React error #\d+;/i;function Zh(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function ep(e){var t=null==e?void 0:e.name;return!t&&Zh(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}function tp(e){var t=null==e?void 0:e.message;return Zh(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function rp(e,t,r,n,i){var o;if(gc(t)&&t.error)return Xh(e,t.error);if(vc(t)||pc(t,"DOMException")){var a=t;if("stack"in t)o=Xh(e,t);else{var s=a.name||(vc(a)?"DOMError":"DOMException"),u=a.message?"".concat(s,": ").concat(a.message):s;Kc(o=np(e,u,r,n),u)}return"code"in a&&(o.tags=Gh(Gh({},o.tags),{},{"DOMException.code":"".concat(a.code)})),o}return hc(t)?Xh(e,t):bc(t)||Ec(t)?(Xc(o=Kh(e,t,r,i),{synthetic:!0}),o):(Kc(o=np(e,t,r,n),"".concat(t),void 0),Xc(o,{synthetic:!0}),o)}function np(e,t,r,n){var i={};if(n&&r){var o=Jh(e,r);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]}),Xc(i,{synthetic:!0})}if(_c(t)){var{__sentry_template_string__:a,__sentry_template_values__:s}=t;return i.logentry={message:a,params:s},i}return i.message=t,i}function ip(e,t){var{isUnhandledRejection:r}=t,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,r=Object.keys(Uc(e));r.sort();var n=r[0];if(!n)return"[object has no keys]";if(n.length>=t)return Pc(n,t);for(var i=r.length;i>0;i--){var o=r.slice(0,i).join(", ");if(!(o.length>t))return i===r.length?o:Pc(o,t)}return""}(e),i=r?"promise rejection":"exception";if(gc(e))return"Event `ErrorEvent` captured as ".concat(i," with message `").concat(e.message,"`");if(Ec(e)){var o=function(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(r){}}(e);return"Event `".concat(o,"` (type=").concat(e.type,") captured as ").concat(i)}return"Object captured as ".concat(i," with keys: ").concat(n)}function op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ap(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?op(Object(r),!0).forEach(function(t){sp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):op(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function up(e,t){return jd().captureEvent(e,t)}function lp(e){var t=Dd(),r=jd(),{userAgent:n}=Yl.navigator||{},i=ld(ap(ap({user:r.getUser()||t.getUser()},n&&{userAgent:n}),e)),o=t.getSession();return"ok"===(null==o?void 0:o.status)&&cd(o,{status:"exited"}),cp(),t.setSession(i),i}function cp(){var e=Dd(),t=jd().getSession()||e.getSession();t&&function(e,t){var r={};t?r={status:t}:"ok"===e.status&&(r={status:"exited"}),cd(e,r)}(t),dp(),e.setSession()}function dp(){var e=Dd(),t=Rd(),r=e.getSession();r&&t&&t.captureSession(r)}function fp(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?cp():dp()}function hp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(r),!0).forEach(function(t){gp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vp=Yl,mp=0;function _p(){return mp>0}function yp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){return"function"==typeof e}(e))return e;try{var r=e.__sentry_wrapped__;if(r)return"function"==typeof r?r:e;if(Fc(e))return e}catch(o){return e}var n=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];try{var o=n.map(e=>yp(e,t));return e.apply(this,o)}catch(a){throw mp++,setTimeout(()=>{mp--}),function(){for(var e=Pd(Gl()),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(2===r.length){var[i,o]=r;return i?e.withSetScope(i,o):e.withScope(o)}e.withScope(r[0])}(e=>{var r,i;e.addEventProcessor(e=>(t.mechanism&&(Kc(e,void 0,void 0),Xc(e,t.mechanism)),e.extra=pp(pp({},e.extra),{},{arguments:n}),e)),r=a,jd().captureException(r,_h(i))}),a}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}catch(a){}Bc(n,e),xc(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return e.name}})}catch(s){}return n}function bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ep(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Op extends Ih{constructor(e){var t,r,n=(t=e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(r),!0).forEach(function(t){Ep(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null===(r=vp.SENTRY_RELEASE)||void 0===r?void 0:r.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0},t));!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[t],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm",i=e._metadata||{};i.sdk||(i.sdk={name:"sentry.javascript.".concat(t),packages:r.map(e=>({name:"".concat(n,":@sentry/").concat(e),version:Wl})),version:Wl}),e._metadata=i}(n,"browser",["browser"],vp.SENTRY_SDK_SOURCE||"npm"),super(n);var{sendDefaultPii:i,sendClientReports:o,enableLogs:a,_experiments:s}=this._options,u=null!=a?a:null==s?void 0:s.enableLogs;vp.document&&(o||u)&&vp.document.addEventListener("visibilitychange",()=>{"hidden"===vp.document.visibilityState&&(o&&this._flushOutcomes(),u&&xh(this))}),u&&(this.on("flush",()=>{xh(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{xh(this)},5e3)})),i&&(this.on("postprocessEvent",qh),this.on("beforeSendSession",Wh))}eventFromException(e,t){return function(e,t,r,n){var i=rp(e,t,(null==r?void 0:r.syntheticException)||void 0,n);return Xc(i),i.level="error",null!=r&&r.event_id&&(i.event_id=r.event_id),th(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2?arguments[2]:void 0;return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=np(e,t,(null==n?void 0:n.syntheticException)||void 0,i);return o.level=r,null!=n&&n.event_id&&(o.event_id=n.event_id),th(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}_prepareEvent(e,t,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r,n)}}var Sp={},wp={};function Tp(e,t){Sp[e]=Sp[e]||[],Sp[e].push(t)}function Mp(e,t){if(!wp[e]){wp[e]=!0;try{t()}catch(Ev){ql&&ac.error("Error while instrumenting ".concat(e),Ev)}}}function Lp(e,t){var r=e&&Sp[e];if(r)for(var n of r)try{n(t)}catch(Ev){ql&&ac.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Yd(n),"\nError:"),Ev)}}function Ap(){"console"in Yl&&Kl.forEach(function(e){e in Yl.console&&kc(Yl.console,e,function(t){return Xl[e]=t,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Lp("console",{args:r,level:e});var i=Xl[e];null==i||i.apply(Yl.console,r)}})})}var Pp=Yl;function jp(){if(!("fetch"in Pp))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Dp(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Rp(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function Np(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Rp(o,n,i,a,s,"next",e)}function s(e){Rp(o,n,i,a,s,"throw",e)}a(void 0)})}}function Ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Cp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ip(Object(r),!0).forEach(function(t){kp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xp(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!function(){if("string"==typeof EdgeRuntime)return!0;if(!jp())return!1;if(Dp(Pp.fetch))return!0;var e=!1,t=Pp.document;if(t&&"function"==typeof t.createElement)try{var r,n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),null!==(r=n.contentWindow)&&void 0!==r&&r.fetch&&(e=Dp(n.contentWindow.fetch)),t.head.removeChild(n)}catch(i){ql&&ac.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}()||kc(Yl,"fetch",function(t){return function(){for(var r=new Error,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var{method:a,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){var[t,r]=e;return{url:Fp(t),method:Bp(r,"method")?String(r.method).toUpperCase():"GET"}}var n=e[0];return{url:Fp(n),method:Bp(n,"method")?String(n.method).toUpperCase():"GET"}}(i),u={args:i,fetchData:{method:a,url:s},startTimestamp:1e3*ud(),virtualError:r,headers:Up(i)};return e||Lp("fetch",Cp({},u)),t.apply(Yl,i).then(function(){var t=Np(function*(t){return e?e(t):Lp("fetch",Cp(Cp({},u),{},{endTimestamp:1e3*ud(),response:t})),t});return function(e){return t.apply(this,arguments)}}(),e=>{if(Lp("fetch",Cp(Cp({},u),{},{endTimestamp:1e3*ud(),error:e})),hc(e)&&void 0===e.stack&&(e.stack=r.stack,xc(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{var t=new URL(u.fetchData.url);e.message="".concat(e.message," (").concat(t.host,")")}catch(n){}throw e})}})}function Bp(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Fp(e){return"string"==typeof e?e:e?Bp(e,"url")?e.url:e.toString?e.toString():"":""}function Up(e){var t,[r,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(t=r,"undefined"!=typeof Request&&Sc(t,Request))return new Headers(r.headers)}catch(i){}}function zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qp=100;function Wp(e,t){var r=Rd(),n=Dd();if(r){var{beforeBreadcrumb:i=null,maxBreadcrumbs:o=qp}=r.getOptions();if(!(o<=0)){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(r),!0).forEach(function(t){Vp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({timestamp:sd()},e),s=i?Jl(()=>i(a,t)):a;null!==s&&(r.emit&&r.emit("beforeAddBreadcrumb",s,t),n.addBreadcrumb(s,o))}}}function Yp(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function Gp(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function Hp(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}var Qp,Kp,Xp,Jp=Yl;function $p(){if(Jp.document){var e=Lp.bind(null,"dom"),t=Zp(e,!0);Jp.document.addEventListener("click",t,!1),Jp.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{var r,n,i=null===(r=Jp[t])||void 0===r?void 0:r.prototype;null!=i&&null!==(n=i.hasOwnProperty)&&void 0!==n&&n.call(i,"addEventListener")&&(kc(i,"addEventListener",function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[r]=o[r]||{refCount:0};if(!a.handler){var s=Zp(e);a.handler=s,t.call(this,r,s,i)}a.refCount++}catch(u){}return t.call(this,r,n,i)}}),kc(i,"removeEventListener",function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(a){}return e.call(this,t,r,n)}}))})}}function Zp(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=>{if(r&&!r._sentryCaptured){var n=function(e){try{return e.target}catch(t){return null}}(r);if(!function(e,t){return"keypress"===e&&(null==t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n)){xc(r,"_sentryCaptured",!0),n&&!n._sentryId&&xc(n,"_sentryId",Gc());var i="keypress"===r.type?"input":r.type;if(!function(e){if(e.type!==Kp)return!1;try{if(!e.target||e.target._sentryId!==Xp)return!1}catch(t){}return!0}(r))e({event:r,name:i,global:t}),Kp=r.type,Xp=n?n._sentryId:void 0;clearTimeout(Qp),Qp=Jp.setTimeout(()=>{Xp=void 0,Kp=void 0},1e3)}}}}var eg,tg="__sentry_xhr_v3__";function rg(){if(Jp.XMLHttpRequest){var e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,r){var n=new Error,i=1e3*ud(),o=mc(r[0])?r[0].toUpperCase():void 0,a=function(e){if(mc(e))return e;try{return e.toString()}catch(t){}return}(r[1]);if(!o||!a)return e.apply(t,r);t[tg]={method:o,url:a,request_headers:{}},"POST"===o&&a.match(/sentry_key/)&&(t.__sentry_own_request__=!0);var s=()=>{var e=t[tg];if(e&&4===t.readyState){try{e.status_code=t.status}catch(r){}Lp("xhr",{endTimestamp:1e3*ud(),startTimestamp:i,xhr:t,virtualError:n})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,r){return s(),e.apply(t,r)}}):t.addEventListener("readystatechange",s),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,r){var[n,i]=r,o=t[tg];return o&&mc(n)&&mc(i)&&(o.request_headers[n.toLowerCase()]=i),e.apply(t,r)}}),e.apply(t,r)}}),e.send=new Proxy(e.send,{apply(e,t,r){var n=t[tg];return n?(void 0!==r[0]&&(n.body=r[0]),Lp("xhr",{startTimestamp:1e3*ud(),xhr:t}),e.apply(t,r)):e.apply(t,r)}})}}function ng(e){var t="history";Tp(t,e),Mp(t,ig)}function ig(){function e(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.length>2?r[2]:void 0;if(i){var o=eg,a=function(e){try{return new URL(e,Jp.location.origin).toString()}catch(t){return e}}(String(i));if(eg=a,o===a)return e.apply(this,r);Lp("history",{from:o,to:a})}return e.apply(this,r)}}Jp.addEventListener("popstate",()=>{var e=Jp.location.href,t=eg;(eg=e,t!==e)&&Lp("history",{from:t,to:e})}),"history"in Pp&&Pp.history&&(kc(Jp.history,"pushState",e),kc(Jp.history,"replaceState",e))}var og="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function ag(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ag(Object(r),!0).forEach(function(t){ug(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ag(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ug(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lg=1024,cg=function(){var e=sg({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"Breadcrumbs",setup(t){var r,n;e.console&&(r=function(e){return function(t){if(Rd()===e){var r={category:"console",data:{arguments:t.args,logger:"console"},level:Yp(t.level),message:jc(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;r.message="Assertion failed: ".concat(jc(t.args.slice(1)," ")||"console.assert"),r.data.arguments=t.args.slice(1)}Wp(r,{input:t.args,level:t.level})}}}(t),Tp(n="console",r),Mp(n,Ap)),e.dom&&function(e){Tp("dom",e),Mp("dom",$p)}(function(e,t){return function(r){if(Rd()===e){var n,i,o="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>lg&&(og&&ac.warn("`dom.maxStringLength` cannot exceed ".concat(lg,", but a value of ").concat(a," was configured. Sentry will use ").concat(lg," instead.")),a=lg),"string"==typeof o&&(o=[o]);try{var s=r.event,u=function(e){return!!e&&!!e.target}(s)?s.target:s;n=Mc(u,{keyAttrs:o,maxStringLength:a}),i=function(e){if(!Tc.HTMLElement)return null;for(var t=e,r=0;r<5;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(u)}catch(c){n="<unknown>"}if(0!==n.length){var l={category:"ui.".concat(r.name),message:n};i&&(l.data={"ui.component_name":i}),Wp(l,{event:r.event,name:r.name,global:r.global})}}}}(t,e.dom)),e.xhr&&function(e){Tp("xhr",e),Mp("xhr",rg)}(function(e){return function(t){if(Rd()===e){var{startTimestamp:r,endTimestamp:n}=t,i=t.xhr[tg];if(r&&n&&i){var{method:o,url:a,status_code:s,body:u}=i,l={method:o,url:a,status_code:s},c={xhr:t.xhr,input:u,startTimestamp:r,endTimestamp:n},d={category:"xhr",data:l,type:"http",level:Gp(s)};e.emit("beforeOutgoingRequestBreadcrumb",d,c),Wp(d,c)}}}}(t)),e.fetch&&function(e,t){var r="fetch";Tp(r,e),Mp(r,()=>xp(void 0,t))}(function(e){return function(t){if(Rd()===e){var{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){var i=t.fetchData,o={data:t.error,input:t.args,startTimestamp:r,endTimestamp:n},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,o),Wp(a,o)}else{var s=t.response,u=sg(sg({},t.fetchData),{},{status_code:null==s?void 0:s.status});t.fetchData.request_body_size,t.fetchData.response_body_size,null==s||s.status;var l={input:t.args,response:s,startTimestamp:r,endTimestamp:n},c={category:"fetch",data:u,type:"http",level:Gp(u.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,l),Wp(c,l)}}}}(t)),e.history&&ng(function(e){return function(t){var r;if(Rd()===e){var n=t.from,i=t.to,o=Hp(vp.location.href),a=n?Hp(n):void 0,s=Hp(i);null!==(r=a)&&void 0!==r&&r.path||(a=o),o.protocol===s.protocol&&o.host===s.host&&(i=s.relative),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),Wp({category:"navigation",data:{from:n,to:i}})}}}(t)),e.sentry&&t.on("beforeSendEvent",function(e){return function(t){Rd()===e&&Wp({category:"sentry.".concat("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Qc(t)},{event:t})}}(t))}}};function dg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fg(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hg=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],pg=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(r),!0).forEach(function(t){fg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&kc(vp,"setTimeout",gg),e.setInterval&&kc(vp,"setInterval",gg),e.requestAnimationFrame&&kc(vp,"requestAnimationFrame",vg),e.XMLHttpRequest&&"XMLHttpRequest"in vp&&kc(XMLHttpRequest.prototype,"send",mg);var t=e.eventTarget;t&&(Array.isArray(t)?t:hg).forEach(t=>function(e,t){var r,n,i=null===(r=vp[e])||void 0===r?void 0:r.prototype;if(null==i||null===(n=i.hasOwnProperty)||void 0===n||!n.call(i,"addEventListener"))return;kc(i,"addEventListener",function(r){return function(n,i,o){try{"function"==typeof i.handleEvent&&(i.handleEvent=yp(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Yd(i),target:e},handled:!1,type:"instrument"}}))}catch(a){}return t.unregisterOriginalCallbacks&&function(e,t,r){e&&"object"==typeof e&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,r)}(this,n,i),r.apply(this,[n,yp(i,{mechanism:{data:{function:"addEventListener",handler:Yd(i),target:e},handled:!1,type:"instrument"}}),o])}}),kc(i,"removeEventListener",function(e){return function(t,r,n){try{var i=r.__sentry_wrapped__;i&&e.call(this,t,i,n)}catch(o){}return e.call(this,t,r,n)}})}(t,e))}}};function gg(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];return r[0]=yp(i,{mechanism:{data:{function:Yd(e)},handled:!1,type:"instrument"}}),e.apply(this,r)}}function vg(e){return function(t){return e.apply(this,[yp(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Yd(e)},handled:!1,type:"instrument"}})])}}function mg(e){return function(){var t=this;["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in t&&"function"==typeof t[e]&&kc(t,e,function(t){var r={mechanism:{data:{function:e,handler:Yd(t)},handled:!1,type:"instrument"}},n=Fc(t);return n&&(r.mechanism.data.handler=Yd(n)),yp(t,r)})});for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.apply(this,n)}}var _g=()=>({name:"BrowserSession",setupOnce(){void 0!==vp.document?(lp({ignoreDuration:!0}),fp(),ng(e=>{var{from:t,to:r}=e;void 0!==t&&t!==r&&(lp({ignoreDuration:!0}),fp())})):og&&ac.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),yg=null;function bg(){yg=Yl.onerror,Yl.onerror=function(e,t,r,n,i){return Lp("error",{column:n,error:i,line:r,msg:e,url:t}),!!yg&&yg.apply(this,arguments)},Yl.onerror.__SENTRY_INSTRUMENTED__=!0}var Eg=null;function Og(){Eg=Yl.onunhandledrejection,Yl.onunhandledrejection=function(e){return Lp("unhandledrejection",e),!Eg||Eg.apply(this,arguments)},Yl.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Sg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wg(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tg=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sg(Object(r),!0).forEach(function(t){wg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onerror:!0,onunhandledrejection:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(!function(e){t=t=>{var{stackParser:r,attachStacktrace:n}=Lg();if(Rd()===e&&!_p()){var{msg:i,url:o,line:a,column:s,error:u}=t,l=function(e,t,r,n){var i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},u=s.frames=s.frames||[],l=n,c=r,d=mc(t)&&t.length>0?t:Ac();return 0===u.length&&u.push({colno:l,filename:d,function:Fd,in_app:!0,lineno:c}),e}(rp(r,u||i,void 0,n,!1),o,a,s);l.level="error",up(l,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}},r="error",Tp(r,t),Mp(r,bg);var t,r}(t),Mg("onerror")),e.onunhandledrejection&&(!function(e){t=t=>{var{stackParser:r,attachStacktrace:n}=Lg();if(Rd()===e&&!_p()){var i=function(e){if(yc(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}(t),o=yc(i)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(i))}]}}:rp(r,i,void 0,n,!0);o.level="error",up(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})}},r="unhandledrejection",Tp(r,t),Mp(r,Og);var t,r}(t),Mg("onunhandledrejection"))}}};function Mg(e){og&&ac.log("Global Handler attached: ".concat(e))}function Lg(){var e=Rd();return(null==e?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function Ag(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(r),!0).forEach(function(t){jg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ag(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jg(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dg=()=>({name:"HttpContext",preprocessEvent(e){var t;if(vp.navigator||vp.location||vp.document){var r=function(){var e=Ac(),{referrer:t}=vp.document||{},{userAgent:r}=vp.navigator||{};return{url:e,headers:pp(pp({},t&&{Referer:t}),r&&{"User-Agent":r})}}(),n=Pg(Pg({},r.headers),null===(t=e.request)||void 0===t?void 0:t.headers);e.request=Pg(Pg(Pg({},r),e.request),{},{headers:n})}}});function Rg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ng(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(r),!0).forEach(function(t){Ig(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ig(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cg(e,t,r,n,i,o){var a;if(null!==(a=i.exception)&&void 0!==a&&a.values&&o&&Sc(o.originalException,Error)){var s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;s&&(i.exception.values=kg(e,t,n,o.originalException,r,i.exception.values,s,0))}}function kg(e,t,r,n,i,o,a,s){if(o.length>=r+1)return o;var u=[...o];if(Sc(n[i],Error)){xg(a,s);var l=e(t,n[i]),c=u.length;Bg(l,i,c,s),u=kg(e,t,r,n[i],i,[l,...u],l,c)}return Array.isArray(n.errors)&&n.errors.forEach((n,o)=>{if(Sc(n,Error)){xg(a,s);var l=e(t,n),c=u.length;Bg(l,"errors[".concat(o,"]"),c,s),u=kg(e,t,r,n,i,[l,...u],l,c)}}),u}function xg(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=Ng(Ng(Ng({},e.mechanism),"AggregateError"===e.type&&{is_exception_group:!0}),{},{exception_id:t})}function Bg(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=Ng(Ng({},e.mechanism),{},{type:"chained",source:t,exception_id:r,parent_id:n})}var Fg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit||5,r=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,n,i){Cg(Qh,i.getOptions().stackParser,r,t,e,n)}}};function Ug(e,t,r,n){var i={filename:e,function:"<anonymous>"===t?Fd:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}var zg=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Vg=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qg=/\((\S*)(?::(\d+))(?::(\d+))\)/,Wg=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yg=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Gg=Vd(...[[30,e=>{var t=zg.exec(e);if(t){var[,r,n,i]=t;return Ug(r,Fd,+n,+i)}var o=Vg.exec(e);if(o){if(o[2]&&0===o[2].indexOf("eval")){var a=qg.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[s,u]=Hg(o[1]||Fd,o[2]);return Ug(u,s,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,e=>{var t=Wg.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var r=Yg.exec(t[3]);r&&(t[1]=t[1]||"eval",t[3]=r[1],t[4]=r[2],t[5]="")}var n=t[3],i=t[1]||Fd;return[i,n]=Hg(i,n),Ug(n,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),Hg=(e,t)=>{var r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Fd,r?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]},Qg=Symbol.for("SentryBufferFullError");function Kg(e){var t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return rh(Qg);var i=n();return-1===t.indexOf(i)&&t.push(i),i.then(()=>r(i)).then(null,()=>r(i).then(null,()=>{})),i},drain:function(e){return new nh((r,n)=>{var i=t.length;if(!i)return r(!0);var o=setTimeout(()=>{e&&e>0&&r(!1)},e);t.forEach(e=>{th(e).then(()=>{--i||(clearTimeout(o),r(!0))},n)})})}}}function Xg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jg(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $g(e,t){var{statusCode:r,headers:n}=t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xg(Object(r),!0).forEach(function(t){Jg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),a=null==n?void 0:n["x-sentry-rate-limits"],s=null==n?void 0:n["retry-after"];if(a)for(var u of a.trim().split(",")){var[l,c,,,d]=u.split(":",5),f=parseInt(l,10),h=1e3*(isNaN(f)?60:f);if(c)for(var p of c.split(";"))"metric_bucket"===p&&d&&!d.split(";").includes("custom")||(o[p]=i+h);else o.all=i+h}else s?o.all=i+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),r=parseInt("".concat(e),10);if(!isNaN(r))return 1e3*r;var n=Date.parse("".concat(e));return isNaN(n)?6e4:n-t}(s,i):429===r&&(o.all=i+6e4);return o}function Zg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kg(e.bufferSize||64),n={};return{send:function(i){var o=[];if(gf(i,(t,r)=>{var i=bf(r);!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)?o.push(t):e.recordDroppedEvent("ratelimit_backoff",i)}),0===o.length)return th({});var a=hf(i[0],o),s=t=>{gf(a,(r,n)=>{e.recordDroppedEvent(t,bf(n))})};return r.add(()=>t({body:mf(a)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&ql&&ac.warn("Sentry responded with status code ".concat(e.statusCode," to sent event.")),n=$g(n,e),e),e=>{throw s("network_error"),ql&&ac.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===Qg)return ql&&ac.error("Skipped sending event because buffer is full."),s("queue_overflow"),th({});throw e})},flush:e=>r.drain(e)}}var ev="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,tv={};function rv(e){var t=tv[e];if(t)return t;var r=Jp[e];if(Dp(r))return tv[e]=r.bind(Jp);var n=Jp.document;if(n&&"function"==typeof n.createElement)try{var i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);var o=i.contentWindow;null!=o&&o[e]&&(r=o[e]),n.head.removeChild(i)}catch(Ev){ev&&ac.warn("Could not create sandbox iframe for ".concat(e," check, bailing to window.").concat(e,": "),Ev)}return r?tv[e]=r.bind(Jp):r}function nv(e){tv[e]=void 0}function iv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ov(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function av(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rv("fetch"),r=0,n=0;return Zg(e,function(i){var o=i.body.length;r+=o,n++;var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iv(Object(r),!0).forEach(function(t){ov(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&n<15},e.fetchOptions);if(!t)return nv("fetch"),rh("No fetch implementation available");try{return t(e.url,a).then(e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(Ev){return nv("fetch"),r-=o,n--,rh(Ev)}})}function sv(){return!!function(){var e;if(void 0===vp.window)return!1;var t=vp;if(t.nw)return!1;var r=t.chrome||t.browser;if(null==r||null===(e=r.runtime)||void 0===e||!e.id)return!1;var n=Ac(),i=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(vp===vp.top&&i.some(e=>n.startsWith("".concat(e,"://"))))}()&&(og&&Jl(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0)}function uv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uv(Object(r),!0).forEach(function(t){cv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dv(e){return[nd(),Cd(),pg(),cg(),Tg(),Fg(),Hd(),Dg(),_g()]}function fv(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!t.skipBrowserExtensionCheck&&sv(),n=lv(lv({},t),{},{enabled:!r&&t.enabled,stackParser:(e=t.stackParser||Gg,Array.isArray(e)?Vd(...e):e),integrations:uc({integrations:t.integrations,defaultIntegrations:null==t.defaultIntegrations?dv():t.defaultIntegrations}),transport:t.transport||av});return Jd(Op,n)}function hv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hv(Object(r),!0).forEach(function(t){gv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vv=e=>{var[t,r,n]=document.location.hostname.split(".").reverse(),i=/(creative|gate)\..*\.(com|local|dev)/,o="dev"===t,a={beforeSend:t=>{var r;return(null===(r=t.exception)||void 0===r||null===(r=r.values)||void 0===r?void 0:r.some(e=>{var t;return null===(t=e.stacktrace)||void 0===t||null===(t=t.frames)||void 0===t?void 0:t.some(e=>{if(!e.filename)return!1;try{var{hostname:t}=new URL(e.filename);return null!==(null==t?void 0:t.match(i))}catch(r){return!1}})}))?(t.tags=t.tags||{},t.tags.creative=e,o&&(t.tags.stage=n),t):null}},s=pv(pv({},a),{},{defaultIntegrations:!1,dsn:"https://3930fc5086c7463e8fa5bd6970c93880@sentry.".concat(k.jv,".com/2"),integrations:dv().filter(e=>"InboundFilters"!==e.name)});o?fv(pv({environment:"stage"},s)):"com"===t&&Math.random()<.01&&fv(pv({environment:"production"},s))},mv=(0,Z.A)((e,t,r)=>{var n=!1,i=oe(i=>{var{urls:{domainCheckGet:o="",domainCheckResult:a=""}}=i,s=(0,pl.A)(t),u=s.split("//").pop(),l=t=>e.post(a,t),c=e=>r.getEntriesByType("resource").find(t=>"fetch"===t.initiatorType&&e(t));e.post(o).then(e=>{var{checkUrl:t}=e;if(!n&&t){n=!0;var r="https://".concat(t.domain).concat(t.path);fetch(r,{headers:{"Accept-Language":we}}).then(e=>(e=>e.ok?e.text().then(e=>{try{return JSON.stringify(JSON.parse(e))}catch(Ev){return e}}):Promise.resolve(null))(e).then(n=>{var i=c(e=>{var{name:t}=e;return t.startsWith("".concat(s,"/config?"))}),o=c(e=>{var{name:t}=e;return t===r}),a=t.expectedContent===n&&200===e.status?"success":"error";l({checkId:t.id,result:a,currentDomain:u,requestSignature:t.requestSignature,configLoadTimeMs:i?parseInt(i.duration,10):void 0,checkPerformTimeMs:o?parseInt(o.duration,10):void 0,resultResponse:"".concat(n).slice(0,255),resultStatusCode:e.status})})).catch(e=>{var r=c(e=>{var{name:t}=e;return t.startsWith("".concat(s,"/config?"))});l({checkId:t.id,result:"fail",currentDomain:u,requestSignature:t.requestSignature,configLoadTimeMs:r?parseInt(r.duration,10):void 0,resultResponse:e.message})})}})},100);return{effects:[te.z.effect(()=>(e,t)=>i(e,t))]}}).requires("Api","location","performance"),_v=mv;function yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ev=-1,Ov=e=>{addEventListener("pageshow",t=>{t.persisted&&(Ev=t.timeStamp,e(t))},!0)},Sv=(e,t,r,n)=>{var i,o;return a=>{t.value>=0&&(a||n)&&(((o=t.value-(null!=i?i:0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,r),e(t)))}},wv=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},Tv=()=>{var e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Mv=()=>{var e,t=Tv();return null!==(e=null==t?void 0:t.activationStart)&&void 0!==e?e:0},Lv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=Tv(),n="navigate";return Ev>=0?n="back-forward-cache":r&&(document.prerendering||Mv()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},Av=new WeakMap;function Pv(e,t){return Av.get(e)||Av.set(e,new t),Av.get(e)}class jv{constructor(){bv(this,"t",void 0),bv(this,"i",0),bv(this,"o",[])}h(e){var t;if(!e.hadRecentInput){var r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),null===(t=this.t)||void 0===t||t.call(this,e)}}}var Dv,Rv=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return n.observe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yv(Object(r),!0).forEach(function(t){bv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:e,buffered:!0},r)),n}}catch(i){}},Nv=e=>{var t=!1;return()=>{t||(e(),t=!0)}},Iv=-1,Cv=new Set,kv=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,xv=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(var t of Cv)t();isFinite(Iv)||(Iv="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",xv,!0))}},Bv=()=>{if(Iv<0){var e,t=Mv(),r=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0])||void 0===e?void 0:e.startTime;Iv=null!=r?r:kv(),addEventListener("visibilitychange",xv,!0),addEventListener("prerenderingchange",xv,!0),Ov(()=>{setTimeout(()=>{Iv=kv()})})}return{get firstHiddenTime(){return Iv},onHidden(e){Cv.add(e)}}},Fv=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Uv=[1800,3e3],zv=[.1,.25],Vv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Bv();!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fv(()=>{var r,n=Bv(),i=Lv("FCP"),o=Rv("paint",e=>{for(var t of e)"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-Mv(),0),i.entries.push(t),r(!0)))});o&&(r=Sv(e,i,Uv,t.reportAllChanges),Ov(n=>{i=Lv("FCP"),r=Sv(e,i,Uv,t.reportAllChanges),wv(()=>{i.value=performance.now()-n.timeStamp,r(!0)})}))})}(Nv(()=>{var n,i=Lv("CLS",0),o=Pv(t,jv),a=e=>{for(var t of e)o.h(t);o.i>i.value&&(i.value=o.i,i.entries=o.o,n())},s=Rv("layout-shift",a);s&&(n=Sv(e,i,zv,t.reportAllChanges),r.onHidden(()=>{a(s.takeRecords()),n(!0)}),Ov(()=>{o.i=0,i=Lv("CLS",0),n=Sv(e,i,zv,t.reportAllChanges),wv(()=>n())}),setTimeout(n))}))},qv=0,Wv=1/0,Yv=0,Gv=e=>{for(var t of e)t.interactionId&&(Wv=Math.min(Wv,t.interactionId),Yv=Math.max(Yv,t.interactionId),qv=Yv?(Yv-Wv)/7+1:0)},Hv=()=>{var e;return Dv?qv:null!==(e=performance.interactionCount)&&void 0!==e?e:0},Qv=0;class Kv{constructor(){bv(this,"u",[]),bv(this,"l",new Map),bv(this,"m",void 0),bv(this,"p",void 0)}v(){Qv=Hv(),this.u.length=0,this.l.clear()}L(){var e=Math.min(this.u.length-1,Math.floor((Hv()-Qv)/50));return this.u[e]}h(e){var t;if(null!==(t=this.m)&&void 0!==t&&t.call(this,e),e.interactionId||"first-input"===e.entryType){var r=this.u.at(-1),n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.P){var i;if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort((e,t)=>t.P-e.P),this.u.length>10){var o=this.u.splice(10);for(var a of o)this.l.delete(a.id)}null===(i=this.p)||void 0===i||i.call(this,n)}}}}var Xv=e=>{var t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=Nv(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},Jv=[200,500],$v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype){var r=Bv();Fv(()=>{var n;"interactionCount"in performance||Dv||(Dv=Rv("event",Gv,{type:"event",buffered:!0,durationThreshold:0}));var i,o=Lv("INP"),a=Pv(t,Kv),s=e=>{Xv(()=>{for(var t of e)a.h(t);var r=a.L();r&&r.P!==o.value&&(o.value=r.P,o.entries=r.entries,i())})},u=Rv("event",s,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=Sv(e,o,Jv,t.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),r.onHidden(()=>{s(u.takeRecords()),i(!0)}),Ov(()=>{a.v(),o=Lv("INP"),i=Sv(e,o,Jv,t.reportAllChanges)}))})}};class Zv{constructor(){bv(this,"m",void 0)}h(e){var t;null===(t=this.m)||void 0===t||t.call(this,e)}}var em=[2500,4e3],tm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fv(()=>{var r,n=Bv(),i=Lv("LCP"),o=Pv(t,Zv),a=e=>{for(var a of(t.reportAllChanges||(e=e.slice(-1)),e))o.h(a),a.startTime<n.firstHiddenTime&&(i.value=Math.max(a.startTime-Mv(),0),i.entries=[a],r())},s=Rv("largest-contentful-paint",a);if(s){r=Sv(e,i,em,t.reportAllChanges);var u=Nv(()=>{a(s.takeRecords()),s.disconnect(),r(!0)}),l=e=>{e.isTrusted&&(Xv(u),removeEventListener(e.type,l,{capture:!0}))};for(var c of["keydown","click","visibilitychange"])addEventListener(c,l,{capture:!0});Ov(n=>{i=Lv("LCP"),r=Sv(e,i,em,t.reportAllChanges),wv(()=>{i.value=performance.now()-n.timeStamp,r(!0)})})}})},rm=(o(7727),(0,Z.A)(e=>({effects:[te.z.effect(()=>t=>{if(!(Math.random()>=.03)){var r=(0,Tt.FB)(t,"webVitalUrl"),{landing:n}=(0,_.zj)(t);r&&[Vv,$v,tm].forEach(t=>{t(t=>{var{name:i,navigationType:o,rating:a,value:s}=t,u=JSON.stringify({message:{name:i,navigationType:o,rating:a,value:s,creative:n}});navigator.sendBeacon?navigator.sendBeacon(r,u):e.post(r,u)})})}})]})).requires("Api")),nm=rm,im={initialConfig:{landing:"Player",modelsLimit:20},acceptedParamsConfig:[{key:"modelName",type:me.A.STRING,default:"",section:_e,title:"Model name"}]},om=(0,ae.A)("player started"),am=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return(0,Z.A)(()=>e({effects:[om.effect(()=>(e,t,r)=>{Jr(r,Xt.modelsLoadedEvent)(e=>{var{models:r}=e;return r.forEach(e=>{var{id:r}=e;return t(cl({modelId:r}))})})}),(0,_.I0)(im)]}))},sm=["modelName"];function um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?um(Object(r),!0).forEach(function(t){cm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):um(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cm(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}vv("Player");var dm=[_.Ay,(0,Tt.Ay)(),ve,Kr(),zl(),_v,Pl,Vl.default,nm,am(e=>{var{effects:t}=e;return{effects:[...t,om.effect(()=>(e,t)=>{t((0,Xt.startLoadingModels)((e=>{var{modelName:t,strict:r}=(0,_.zj)(e);return t&&r?{status:["public","private","groupShow","p2p","virtualPrivate","p2pVoice"]}:void 0})(e)))}),te.z.effect(()=>function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(e,r)=>{var{modelName:n}=(0,_.zj)(e);n&&r((0,_._M)({modelsList:n})),t.forEach(e=>r(e()))}}(om)),(0,_.I0)({acceptedParamsConfig:[{key:"nonStopPlaying",title:"Play one minute or non stop",default:!0,type:me.A.BOOL,section:_e},lm(lm({},yl),{},{default:F.ALL,enum:Object.values(F).filter(e=>"onHover"!==e)})]})],actions:{setParams:$r(om,e=>{var{modelName:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,sm);return lm(lm({},r),(0,K.A)(t)?{}:{modelsList:t})})}}})],fm=(sn({modules:dm}),{acceptedParamsConfig:[{key:"language",title:"Language",description:"",section:_e,type:me.A.ENUM,multiple:!1,enum:Se,default:we}]});function hm(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}var pm=(0,Z.A)(function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){hm(o,n,i,a,s,"next",e)}function s(e){hm(o,n,i,a,s,"throw",e)}a(void 0)})}}(function*(e,t,r){return function(e,t,r){var n=Array.isArray(e)?e:[e];return new Wt(n,r.host||r.hostname).init(Bt(r,t.navigator,Se))}(e,t,r).then(e=>({reducer:(0,re.A)({i18n:e}),effects:[(0,_.I0)(fm)]}))});return function(t,r,n){return e.apply(this,arguments)}}()).requires("i18nPaths","window","location"),gm=pm,vm=(e,t)=>{var r;return function(){var n=arguments;r||(e.apply(this,n),r=!0,setTimeout(function(){r=!1},t))}},mm=o(3554);function _m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ym(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(r),!0).forEach(function(t){bm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bm(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Em=(0,Z.A)(e=>{var t=(0,re.A)({modelsApiCachedResponse:{tags:[],models:[],meta:{}}}).on(Xt.modelsApiCacheResponseSuccess,e=>{var{models:t,tags:r,meta:n}=e;return()=>({modelsApiCachedResponse:{tags:r,models:t,meta:n}})}),r=vm((t,r)=>{var n=wr(t);return sr(e,t,ym(ym({},n),{},{limit:2*n.limit})).then(e=>r((0,Xt.modelsApiCacheResponseSuccess)(e)))},3e3),n=Xt.updateModelsApiCache.effect(()=>r),i=Xt.replaceModelWithRandomModel.effect(e=>{var{modelId:t}=e;return(e,r,n)=>{var{modelsList:i,modelsApiCachedResponse:{models:o}}=e,a=((e,t)=>{var r=e.filter(e=>{var{id:r}=e;return!t.includes(r)});return r.length?(0,mm.A)(r).id:null})(o,i.map(e=>{var{id:t}=e;return t}));if(!a)return n(Xt.modelsApiCacheResponseSuccess,()=>r((0,Xt.replaceModelWithRandomModel)({modelId:t})),!0),void r((0,Xt.updateModelsApiCache)());r((0,Xt.replaceModelByModel)({modelId:t,replaceBy:o.find(e=>{var{id:t}=e;return t===a})}))}});return{reducer:t,effects:[n,i,An.effect(e=>{var{modelId:t,fatal:r}=e;return(e,n)=>{if(!(0,_.zj)(e).queryParams.ignoreStreamErrors){var i=e.modelsList.find(e=>{var{id:r}=e;return r===t});(null==i?void 0:i.snapshotUrl.includes("lovescape"))||(n((0,Xt.updateModelsApiCache)()),r&&n((0,Xt.replaceModelWithRandomModel)({modelId:t})))}}})]}}).requires("Api"),Om=Em,Sm={initialConfig:{landing:"Spot"},acceptedParamsConfig:[{key:"hideButton",title:"Hide button",description:"",section:_e,type:me.A.BOOL,default:!1},{key:"delay",title:"Delay",description:"",section:_e,type:me.A.INT,default:1},{key:"closeButtonDelay",title:"Show close button delay",description:"",section:_e,type:me.A.INT,default:5},{key:"autoclose",title:"Auto close",description:"",section:_e,type:me.A.BOOL,default:!0},{key:"animate",title:"Open animation",description:"",section:_e,type:me.A.BOOL,default:!1},{key:"width",title:"Width",description:"",section:_e,type:me.A.INT,min:0,max:3840},{key:"height",title:"Height",description:"",section:_e,type:me.A.INT,min:0,max:2160},{key:"thumbsMargin",title:"Thumbs margin",type:me.A.UNSIGNED_INT,disableNonNumeric:!0,section:_e,default:2,min:0,max:25,placeholder:"0 - 25"},{key:"limit",title:"Limit of models to show",description:"Limit can not be greater than defined by creative",type:me.A.INT,min:1,max:2,default:1},{key:"limitAfterClosure",title:"Limit after closure",description:"",section:_e,type:me.A.INT,default:void 0},{key:"placeCorner",title:"Video placement",description:"",section:_e,type:me.A.ENUM,default:M.BottomRight,enum:Object.values(M),multiple:!1}]};function wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wm(Object(r),!0).forEach(function(t){Mm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Mm(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}vv("Spot");var Lm=(0,ae.A)("change spot closable"),Am=(0,ae.A)("inject"),Pm=sn({modules:[...dm,gm,Om,(0,Z.A)(()=>{var e,t,r=t=>{clearTimeout(e),e=setTimeout(()=>{t(se())},2e4)};return{reducer:(0,re.A)({spot:{closable:!1},isWidgetUnInjected:!0}).on(Lm,e=>t=>{var{spot:r}=t;return{spot:Tm(Tm({},r),{},{closable:e})}}).on(Am,e=>({isWidgetUnInjected:!e})),effects:[(0,_.I0)(Sm),te.z.effect(()=>(e,n)=>{var{delay:i,autoclose:o,closeButtonDelay:a}=(0,_.zj)(e);setTimeout(()=>{n(Am(!0)),t=setTimeout(()=>{n(Lm(!0))},1e3*a),o&&r(n)},1e3*i)}),se.effect(()=>(r,n)=>{n(Am(!1)),clearTimeout(t),clearTimeout(e)})],actions:{handleClose:()=>(e,t)=>{var{limitAfterClosure:r}=(0,_.zj)(e);r&&s.set(f.LAST_VIEWED_TIME,(new Date).toISOString()),t(se())},handleTakeInterest:()=>clearTimeout(e),handleLostInterest:()=>(e,t)=>{var{autoclose:n}=(0,_.zj)(e);n&&r(t)}}}})]});function jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jm(Object(r),!0).forEach(function(t){Rm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rm(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.StripchatSpot=p(g("SCSpotScript").src,Pm,(t,r)=>{var{isWidgetUnInjected:n}=t,{width:i,height:o,animate:a,queryParams:{placeCorner:s=M.BottomRight}}=(0,_.zj)(t);return n?null:e("div",{className:m()(D.root,D[s],{[D.slideAnimation]:a}),style:y(i,o),onmouseenter:r.handleTakeInterest,onmouseleave:r.handleLostInterest},e(Kt,{actions:r}))},e=>Dm(Dm({},e),{},{i18nPaths:["/widgets/Spot/lang"]}))}()}();