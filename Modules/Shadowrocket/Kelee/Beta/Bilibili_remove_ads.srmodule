#!name=哔哩哔哩去广告
#!desc=过滤哔哩哔哩广告、移除青少年模式弹窗和交互式弹幕、移除无用功能和链接跟踪参数，增加空降助手以便跳过视频中插入的广告。此插件仅建议iOS 15以上设备使用，且必须启用MitM-over-HTTP/2功能。\n\n空降助手是第三方提供的功能，依赖于Android版空降助手的服务器数据运作，可能会存在不准确或者失效的问题，此功能与哔哩哔哩官方无关。
#!author=kokoryh[https://github.com/kokoryh]
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Bilibili.png
#!category=Jacob

#!openUrl=https://apps.apple.com/app/id736536022
#!tag=去广告
#!system=iOS, iPadOS
#!system_version=15
#!loon_version=3.2.9(837)
#!homepage=https://hub.kelee.one
#!date=2025-11-20 01:32:11
#!arguments=showUpList:"auto",purifyTopReplies:true,airborne:false,logLevel:"off"

[Rule]
DOMAIN,api.biliapi.com,REJECT
DOMAIN,app.biliapi.com,REJECT
DOMAIN,api.biliapi.net,REJECT
DOMAIN,app.biliapi.net,REJECT
DOMAIN,line3-h5-mobile-api.biligame.com,REJECT
DOMAIN-SUFFIX,chat.bilibili.com,REJECT
AND,((DOMAIN-SUFFIX,chat.bilibili.com),(OR,((DOMAIN-KEYWORD,stun),(DOMAIN-KEYWORD,tracker)))),REJECT

[URL Rewrite]
undefined undefined undefined
^https:\/\/line3-h5-mobile-api\.biligame\.com\/game\/live\/large_card_material\? - reject-dict
^https:\/\/api\.live\.bilibili\.com\/xlive\/e-commerce-interface\/v1\/ecommerce-user\/get_shopping_info\? - reject-dict

[Body Rewrite]
http-response-jq ^https:\/\/api\.bilibili\.com\/x\/pd-proxy\/tracker\? '.data[][]?="stun.chat.bilibili.com:3478"'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/splash\/(list|show|event\/list2)\? '.data |= with_entries(if .key | IN("show", "event_list") then .value = [] else . end)'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/tab\/v2\? '<!DOCTYPE html><html lang="en-US"><head><title>Just a moment...</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="robots" content="noindex,nofollow"><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{box-sizing:border-box;margin:0;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%;color:#313131;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}body{display:flex;flex-direction:column;height:100vh;min-height:100vh}.main-content{margin:8rem auto;padding-left:1.5rem;max-width:60rem}@media (width <= 720px){.main-content{margin-top:4rem}}.h2{line-height:2.25rem;font-size:1.5rem;font-weight:500}@media (width <= 720px){.h2{line-height:1.5rem;font-size:1.25rem}}#challenge-error-text{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI0IyMEYwMyIgZD0iTTE2IDNhMTMgMTMgMCAxIDAgMTMgMTNBMTMuMDE1IDEzLjAxNSAwIDAgMCAxNiAzbTAgMjRhMTEgMTEgMCAxIDEgMTEtMTEgMTEuMDEgMTEuMDEgMCAwIDEtMTEgMTEiLz48cGF0aCBmaWxsPSIjQjIwRjAzIiBkPSJNMTcuMDM4IDE4LjYxNUgxNC44N0wxNC41NjMgOS41aDIuNzgzem0tMS4wODQgMS40MjdxLjY2IDAgMS4wNTcuMzg4LjQwNy4zODkuNDA3Ljk5NCAwIC41OTYtLjQwNy45ODQtLjM5Ny4zOS0xLjA1Ny4zODktLjY1IDAtMS4wNTYtLjM4OS0uMzk4LS4zODktLjM5OC0uOTg0IDAtLjU5Ny4zOTgtLjk4NS40MDYtLjM5NyAxLjA1Ni0uMzk3Ii8+PC9zdmc+");background-repeat:no-repeat;background-size:contain;padding-left:34px}@media (prefers-color-scheme: dark){body{background-color:#222;color:#d9d9d9}}</style><meta http-equiv="refresh" content="360"></head><body><div class="main-wrapper" role="main"><div class="main-content"><noscript><div class="h2"><span id="challenge-error-text">Enable JavaScript and cookies to continue</span></div></noscript></div></div><script>(function(){window._cf_chl_opt = {cvId: '3',cZone: 'kelee.one',cType: 'managed',cRay: '9a172f6ce9732996',cH: 'AVRnAdqralIVV1_.SN4uzbRpG2Y6hIs5INp8OQ4fusM-1763633717-1.2.1.1-9u9qoaObiwzWbIyehGtVvfBak57A0gp5tR1kHElVNINMgbL7S4mxLuMIYqa1u0gr',cUPMDTk:"\/Resource\/JQLang\/Bilibili\/tab_Bilibili_remove_ads.jq?__cf_chl_tk=NYlQGn.Mg28nipxqa4Rx9HDz9LbI2M1IDlROJrov_qc-1763633717-1.0.1.1-9fUdMPHTW5lbWK_FHgtavG0xkqj46lKOy2unDj9hjko",cFPWv: 'g',cITimeS: '1763633717',cTplC:0,cTplV:5,cTplB: '0',fa:"\/Resource\/JQLang\/Bilibili\/tab_Bilibili_remove_ads.jq?__cf_chl_f_tk=NYlQGn.Mg28nipxqa4Rx9HDz9LbI2M1IDlROJrov_qc-1763633717-1.0.1.1-9fUdMPHTW5lbWK_FHgtavG0xkqj46lKOy2unDj9hjko",md: 'eMj8uqWh9lQEC9tRlVCqCrh1eBrGzUbYOnN8W9foCog-1763633717-1.2.1.1-lwGGt0ANqR2IULhpAXFWSN1.H21G.NO9gI1MvV.dVzsRuE3ztnkj3pw9lJrS3_6yx0wBMqd1k4hzEiT5czFE0M2t2WiomKWXzou3ocdg1fRm8lRUnnID6c6w5Nm1AyLXb006i8BVJvQkag8osfsJR06If4g5N9H_AF1o51GaoaDtzWTiLkVD_TYd78vV0T81QgIq3PIZLj0INzFrDgFkEudlg2B5Fo2.txBcKWQ2tTmPjr4YyyOadicLgBTfhjeXFb3K6EJ0X2xBjV8EsnwFLvshGgvVWvZ1mQBLBSXyilpIs_UFc.em2DfLl8TOs3QBPxKQfwKbMSVEltHUzZ1M5WfCxw4fHhl2mNmJSqVaqZkKlj3dh2MlZrsO6_3zI1xV4k33YGN90hUnwDoahyR9ezdkAEDjZ.NQCqSgffArJkdxGRqStKy4OGXi46msRkjJOovNz_2A7ElklPlLGfcepK2Db.ILzbzsUN0w.r5eCECcdpqpekR3vRcTlr9oIVEYBcnc_v_hVISSt4ftwFz89pQye60_c7lLMUUIQcnEuxdh_AicU8qwp3rFtaKBdbvxFAAGYcY7_mHPuKf3_FzqWc4sGNW8tkjBixPKSzwJYbucu3cqSwZxHrL2dlqofQtXo9NPW5icXjaVwO.WTPbQK7M7nB.46ikS7zZpWkY1RC5cFT.jKSVCaSNBd108OiuUhml8pVYNClIT..d5kmEOt3j0Uiafa3ISmAFu.jZ0UWMYDPRVLwSEX2hjo8H2cW_8JwUlI8uGLEn_KvWQQRTx1Wly0orxSxx02WVy.yd13gF5JXVe16QDewzXdLRDVJPCRcbumYhWZ_8l1URjrFGkIEDyLd4sHoSWKk.qal0Ptio',mdrd: 'W0ogr5hsoED6L2qzuuihnqEYUMUfWbgsVXmZqiaye88-1763633717-1.2.1.1-pdHT4.YuUy9sVcxf2noOzRU.cr15wFNT3Ly6VkdJLzMy.r_8vZidjwXk1eDGtw6zsS8m4pV49dZLx44YKK9n34hHz0C.itVp_xarNOwtKpJyftMc7n.5yBjGDqwXbE.XGBLCoLXXGcZONuH9b34pyZNWuUYXcqA5TqJbB3BoQ_g4clBi1tZgjDIvlUmABNz.iUpR4DXmBWm4kG8KyYQxbUT9w4i5zMPRdYnBE2F0353SsJ1AjxT3bOp4jkkCmY7zoSUzxkGg0VzDYUHZAnf1a3Bc5ODwBOVcz598CmRlIOHHGULr2aB0nOLzSwpc6VYn.g8nT9bpywvMNOPeg_0So9_MDYkAdrZSLRSvQP8wPq_OAw2nc19goINkJIz.MXIOveHytuXvPU.OIylOL76R0dJu_OlQF5LCh.r6KFR2BSIZm4dqqjL0Lm9ENbG7NX0HIBIVbnaL1FsU1__w9OkZPa0aQQ8epj02qs.8gF.KNdkH2ACB9QZ4pOZhjjYx3lep9Hrvsy3uX0A6svjboN.AGu6kp4C6qCX6zLqGy8wATqkECvx7LQTiRU9iY.gcAMDKi4iQRodvWq43ZUXZV12hzldO4wBYv3MJE9ph1yR4zptBqOkg_x6Ds3KFYUfNkrWkliM40X3wibalHj_gndJRakO5eEf0QtOt3RTnpd91g43UIu2nDDFuBOxLAyOkKanFf.tPtU3WzguqFbfEQB5w9fzvdJq_wXWvpniuDdOENc1gVmwg0_Brjj6fHScVO19s83TqRA6VmWFHrTNVlfYc4dv71bMIldsqUa4gJ0RxxGszO1_bzgkSjE4mDqd1fBS8HelnNFo4Fgu4PozDdjXU_qQmN9NCJR1CO.A7IyHHUYmGAL05Jua5QcbQ3_JdPC.YTIsR.fCi6GTw.Qw6KyaBLDjTrXDkef3NT4s.kW14nsy6USaccqbvZh6lyuQs3Ah_AH7ldm3zgbpkoFQChneOvADais3YbREH.0S3.uuA9.6TPddzFPOkePK147vQu5J9qZFmpPuLhe9myURUwNVlQR3Rzs70KmXeIusWdkCPLG9foOxO.H1FrKEYKcPHKVMPqWRXF_CZFI1acNsvcUD0Fuf8c9_e9ImFGbxpeWilgrZ90AINMZNyDYQCJuIQS7zdvqtXS27.hARN9ki_pPQlZHKQCYyXPLtma1axJhB.IFrBbkAi5HsDyNvGNcg_SIg0NG1mcst1MsioQJuFIANBGCZdonopWZpBsCqwGfF_KWCwbzhsedEmKhUV3a1M_T44zFbFlcs1yrOnmGamofAfTayG8WDIX1gkA.CnwbulDjDDmULk5zAzmNFPxQyEm6fGNW.Oi6epHbncalYnaOeOfF7NdJdaD4q82fq1yb6DlXxOKPtH6qXJBOMoGGQAvE00t0CEaJNOe_ehMWRaB49a4Ttv5.xnGmVGGCCB57BOW9iVqrMYRRdsyEeZ6PsKZKf0UjoW9wsKnXorV5awQVH3unkDpgHWLJOS9N.dmN4.sbKx6vy8mtOoDrc9zv2hOCQRv6kfqiXy.MuM.BsrxU4C0b9SB5rlFsUzmSNp_sd24PNaUMflKvcCQYdudsADDCP_T0cTFD4Y2C6lj1sXzwMBA.A2B6ef_GPaRKQyWu_LAqTztHubCrtaTZDb5cDB_8Ln9YDAUTU_PWab3.Id67Z2haKq5lfNmjS8P0ixJTtGD4DqyKfvmequ81J62DqVfUxAe3jw0l1hfJycS0hZJ97ILyYKQ6rfYwaezTCmjIa7SIbUMx4URmeejFurdUg5m6YPAvIh9.Yg4.QGbnd1iJQ7ikiM.sQA4wHFH6NY_jHC_QyVBrQ96VNu9n5e7S8WVGPtNh3wXn5EO6LtOQL9ziR53u8EANpjUo4SFEC55424TBnu4m6ZwVdP3GAp_CR5_MikpB17PKfMDrMJTcq7Y0M1fntBjVqnnalXsh8cSgJOEl8xe2XV_ULbu_LkKjHkZpSk6eBn20hOGMfqWGnYb.GzLdjbp6yLqCw8nn04VZD96UF3caLsUHKjyi0ZXe19ou_7Kwlg7T2oQEFYRFlSomzlqBnnPZV8yjXhGlySSijOWh8sxAlx8zt6AoI2zFhVHDo5Sx0lYLafvoQFBKLby.hm9S61BT9wsVvDN_nT1jsd9dbpqrw8yz_wa_nAtNp29nFmeorAXYsTpyVL1OKGeXJG0btAv4sROmV3sc0MAPJ1PWr.0Bwi4QzO9vXnBhd9qV7DtLn8Nue_LgCrr2ByWhhLPInlUuZCA.fPEs4_r.XCWFU945pQFpHilgU5m5GF1..AkN46eHzuctFGycD2fyMAlgU9GyN6VKlzRLO25mEMYp7tmyW.ZKcInQv2cMp239tIWgA76vDq4LgH04ZHULqbiBGGUMxLfNFQJdba3WiGUZFuazJaevT2kfAZj4UKine8Gfd3wTqKDhM8.YOSUbJ5AA',};var a = document.createElement('script');a.src = '/cdn-cgi/challenge-platform/h/g/orchestrate/chl_page/v1?ray=9a172f6ce9732996';window._cf_chl_opt.cOgUHash = location.hash === '' && location.href.indexOf('#') !== -1 ? '#' : location.hash;window._cf_chl_opt.cOgUQuery = location.search === '' && location.href.slice(0, location.href.length - window._cf_chl_opt.cOgUHash.length).indexOf('?') !== -1 ? '?' : location.search;if (window.history && window.history.replaceState) {var ogU = location.pathname + window._cf_chl_opt.cOgUQuery + window._cf_chl_opt.cOgUHash;history.replaceState(null, null,"\/Resource\/JQLang\/Bilibili\/tab_Bilibili_remove_ads.jq?__cf_chl_rt_tk=NYlQGn.Mg28nipxqa4Rx9HDz9LbI2M1IDlROJrov_qc-1763633717-1.0.1.1-9fUdMPHTW5lbWK_FHgtavG0xkqj46lKOy2unDj9hjko"+ window._cf_chl_opt.cOgUHash);a.onload = function() {history.replaceState(null, null, ogU);}}document.getElementsByTagName('head')[0].appendChild(a);}());</script></body></html>'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/feed\/index\? 'if .data.items then .data.items |= map(select((.banner_item == null) and (.ad_info == null) and (.card_goto == "av") and (.card_type | IN("small_cover_v2", "large_cover_single_v9", "large_cover_v1")))) end'
http-response-jq ^https:\/\/api\.bilibili\.com\/pgc\/view\/v2\/app\/season\? 'del(.data.payment)'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/feed\/index\/story\? 'if .data.items then .data.items |= map(select((.ad_info == null) and (.card_goto | IN("vertical_ad_av", "vertical_ad_live", "vertical_ad_picture") | not)) | del(.story_cart_icon, .free_flow_toast, .image_infos, .course_info, .game_info)) end'
http-response-jq ^https:\/\/api\.live\.bilibili\.com\/xlive\/(app-interface\/v2\/index\/feed|app-room\/v1\/index\/getInfoBy(Room|User))\? '.data |= (del(.play_together_info, .play_together_info_v2, .activity_banner_info) | if .function_card then .function_card[] = null end | if .new_tab_info.outer_list then .new_tab_info.outer_list |= map(select(.biz_id != 33)) end | if .card_list then .card_list |= map(select(.card_type | IN("banner_v2", "activity_card_v1") | not)) end | reduce ([["show_reserve_status"], false], [["reserve_info", "show_reserve_status"], false], [["shopping_info", "is_show"], 0]) as [$path, $value] (.; if getpath($path) then setpath($path; $value) end))'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/skin\? 'delpaths([["data","common_equip"]])'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/account\/mine(\/ipad)?\? '<!DOCTYPE html><html lang="en-US"><head><title>Just a moment...</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="robots" content="noindex,nofollow"><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{box-sizing:border-box;margin:0;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%;color:#313131;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}body{display:flex;flex-direction:column;height:100vh;min-height:100vh}.main-content{margin:8rem auto;padding-left:1.5rem;max-width:60rem}@media (width <= 720px){.main-content{margin-top:4rem}}.h2{line-height:2.25rem;font-size:1.5rem;font-weight:500}@media (width <= 720px){.h2{line-height:1.5rem;font-size:1.25rem}}#challenge-error-text{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI0IyMEYwMyIgZD0iTTE2IDNhMTMgMTMgMCAxIDAgMTMgMTNBMTMuMDE1IDEzLjAxNSAwIDAgMCAxNiAzbTAgMjRhMTEgMTEgMCAxIDEgMTEtMTEgMTEuMDEgMTEuMDEgMCAwIDEtMTEgMTEiLz48cGF0aCBmaWxsPSIjQjIwRjAzIiBkPSJNMTcuMDM4IDE4LjYxNUgxNC44N0wxNC41NjMgOS41aDIuNzgzem0tMS4wODQgMS40MjdxLjY2IDAgMS4wNTcuMzg4LjQwNy4zODkuNDA3Ljk5NCAwIC41OTYtLjQwNy45ODQtLjM5Ny4zOS0xLjA1Ny4zODktLjY1IDAtMS4wNTYtLjM4OS0uMzk4LS4zODktLjM5OC0uOTg0IDAtLjU5Ny4zOTgtLjk4NS40MDYtLjM5NyAxLjA1Ni0uMzk3Ii8+PC9zdmc+");background-repeat:no-repeat;background-size:contain;padding-left:34px}@media (prefers-color-scheme: dark){body{background-color:#222;color:#d9d9d9}}</style><meta http-equiv="refresh" content="360"></head><body><div class="main-wrapper" role="main"><div class="main-content"><noscript><div class="h2"><span id="challenge-error-text">Enable JavaScript and cookies to continue</span></div></noscript></div></div><script>(function(){window._cf_chl_opt = {cvId: '3',cZone: 'kelee.one',cType: 'managed',cRay: '9a172f6d5bb4d6f4',cH: 'oyLuT.r99gDtgIVeAUMGZN0XgHgvqKFJPfFhRrBTTQM-1763633717-1.2.1.1-wQebkJxVK.g9hnBDAW.CRcLWKJGRq8zexgB3zMxvI042_TKc1.ieDOp1xWRwS8oV',cUPMDTk:"\/Resource\/JQLang\/Bilibili\/mine_Bilibili_remove_ads.jq?__cf_chl_tk=xa02fCgzXApauNnS2sLsKPb1ehxxaWJ7khy.c7EOlos-1763633717-1.0.1.1-R4AmpswLK3Ns0NvdH15Tr4J3Y0FCfDoUWMfJdn_0mHM",cFPWv: 'g',cITimeS: '1763633717',cTplC:0,cTplV:5,cTplB: '0',fa:"\/Resource\/JQLang\/Bilibili\/mine_Bilibili_remove_ads.jq?__cf_chl_f_tk=xa02fCgzXApauNnS2sLsKPb1ehxxaWJ7khy.c7EOlos-1763633717-1.0.1.1-R4AmpswLK3Ns0NvdH15Tr4J3Y0FCfDoUWMfJdn_0mHM",md: 'hwHTgAniFEW.j26lVkq52719iPqauWo_VFNUu_FeEQs-1763633717-1.2.1.1-b1U99IY4rjI3h_Vx1BZSdJUpSibr6Nuri3daTfcFwibpfJBmgE1gnXJaWhG3SP8T_YWySUWLaJrtw.8Eu6S31UtUTYca.2I2zH8_SzwRlg8..qbIfr7sDpB.nQWlpCsUiSSCP8l7xxmT4LZ7EuQ7WDu89miC9gw8yQJdg19HmZEIxorILcUJsjVuECaSsKTKYgH7fQ_fVEt.MSlISwOOn4UNglxQbBu3KYaxbLMkM9dTUalMBOeWLuo31P2jXXm7ur4iNpcsPUWJ95KCpPWvYaSewXhdSftDT9Kdhz3Jeto0tG83x8q35B6VPIL50AFhIly92.VykYLjyEb8QKWHppI4JKP.I2WqrI34YyLIaO6kRPiBMi8DxahJHlGOSfBL0raghC39ZfqPGpWw4rr1KwxGRq3cyRWxWhLaYzeTKN5uCjvzRdtsRIXIbbx3QKXVQh9qlF_99WThsYltkeR0ufSgkgJ55VM2uW4rWvK0g1IcQ9.K7id3tVFpCVUyJMx.hYBLcS2DoJ43TQ2q5l6twMdbRyK7zMEUZtrfW.67FxP74SdXL_akVMmAzlMEMZF3Z23j7GRu_q5V7i.Sm9Som99BoobhGpl4zJMAu7jGWbVLOrtEYvW68U_ERz80i8TMXbKJ5TAkZFuOXjMZuDeb6j8HLNHAyxy5pq0RoY70VczoUYqbYO09okzqWXQySuHqdF6zqPR_OESl6Iuu7J9NXSTKT3plkPM7Qlp9eahsM5YxWl_uGY9WuGMNPxcG_TrpKD3y2dr9uOTkzCye6S01ulqAn4Elv2V9Mf5eRbDwQeJjHUOtgS1YnzlkVYgeJZWzk1y2ti1Fee8AJ_YC_Ftw5VOmCQZ4EM9TFf555reEKFA',mdrd: 'HvyoyzJApxNXWnZTPP5Tflew0w8qfWSf7MBJ0k7Mcd4-1763633717-1.2.1.1-pXVo_v4CInbaN8MvtFdoQaGZu928SxKxrbusXh8xKBRM3ouHNmhOZF4xRXan1d6UBXAczHM.jJrREwAwcpQYcweb80ES2iJWheh53hjoTFSwO6E46.ae8u8hdzhT56VPSRbEF.1UGgWanvK0cvp6fkQ5z57ClV4VMfasO2PxVONxJujCZK9UlLlJ1B2XkTmb4AUXxzvRtBuM6TVUxQ2JDcBNR7NACV55kB1Pb1lEsqbEtXVgZJ2DQqZFw5ZATPNofZbhw84qRpuE8bqhJkHJW2Cd3ioNY0C6PFhRKtf3oVQ3dJTEz61v3fEyaV2hGl9ctR39r4OPvo.TWHjx3VKIpbfW4RpssK83ICKZCQa01w.mw4Cf8BFLyoG1tzw6msIcpmgBJ8XJjIyCGfxJOkvTaCkwBglThAuhO7qflU4_tejLlGfU1D1GbF9rkAJsCaMfkLs6NELlZT6YgevBO7tNhqRiFo_A.MV90HUUjRvLpzKA1f.btPseSWgc5dsEfykVlA9AEyDcVkn_LskhGWQSO2UIQX9ae1omECunEkj.eTbKW6ehJ2iezzLbj4WaXxt0lUs0iMTzrLpibmdk9ovV67WqGIlqB5soVIdPbn0jvCpMAGI3Kxc_VdSESLKUWfcN802dbO3h6kRkZQcJI0o1J1dq8scRTxs8yQliMK_pfufnl4eWyxw9cCIfRLh.reo9tRfUNDxowj4uRahpwI92atffUf1eclrrA8IuI6YTWYxRbXrb7.Pj7B9GFgcPuxky4_wbrsLiSQvz.1XUUvZ272mXZ4Oeu8K1..VTK.ggHcVHHOBCHiD3zrD3BtVpls7Bk3aHDqaVHYovwMOsEOgf7SIZqsX6N4Nqym7U6vlxSIkXYDqq4uNVFxrXicV6YQAEXyRD6RN1xdTHUgTErTgNfKCjQ8UlANre__phdXIqsa4g7C2cW2pc5Z5H1JGOpkw09uimxsG1LCrbHjYhcKV6mZL2UzocKSng2dSgL5qKaE16SYYMhICjHVCTD4AeDQiKJ0c3kfN.BC.YgnNSoXusM5xUo4vF4.xlodV1I8Gi4inVRD1LOFpVdzp2vE6lAte4.xRzv1DQnP6nwb5K5nn.VwPjjXQhdQ.OIgrqdtsgVFRMFa6pOjmxBhY6c7LCYhU_gbFd5j3URmowMX3StrkoX1bvheHvCVM_Ui8htzRlLmivygBKGjjHtmcz7knqU862tE.LQGo42innBZ8AUKDmHrPvBjd0OD7y8G4BUbeKL.5lo42upzsFexe6qQ9Jtdkbuei55jwMEiKBeAhT2wp5KqLUAOqSjTnIPk71aLvJ7xQQClcVI.UtZfhyrf0Urb3a7zoHZzhG0.3w4y2j6YIW_5xQLu8I2clREvo8lpcjCECr3neZGQV07DkxQ9KXApf915RvD0aPr1kmk4VVLOBVkO7VwxCe8oKav1Jj.JSHjRYYNptyJLWmi6X34rEGTT7EHBw3IK.4HTJWeroDermDnTedQlAg21hnK_piVleFMTPClBlLbk.Hxa2tD2KH2QRXHiiaZl3e8Fo77VFOKBQJ2YaWwQTGpjP9fHHpz0zq3E1P7RBhrcjS9ru.rGk1LH6DWxt8EPETypXyM34g7FmTPISFAkECLlCcGuAa.LFQj3ymYzp7ayGyrTg_cHu70hMX2D3VOdksq486uhlb2S4AHN6PC3OSjzjlJktOhjdkbfmzr7pR0RtNvIN18gX3sU1dvt37buKPL3thYFEkAzMIjvTXbG1z0pMGFcpdDjoVJtC5p.76jm.8nbCKIM7qksH85VWaAZE_.re1IBzxMyKvunOoYnCLCS_CYvcY7_lOTW4evH7C1LWl19AfLBVlwMpcTkwkRZ7FUWx2ySG1pR5TtfSGLFtK8pts1gwP3CsvYczVXIii1PrZ5nRlGJUN54JiHcurUUekdrw7yRJ0WfcsS.akRWVH30Lp3Ix20i.o0o9NJZVW6Oka0e7YljwGb0xQ.Ew9EkdoDgCYtm_0ii0baJ3hIJWwj8ByP4RyhYL6lV7WyY0HyMq4PSTGlzNR6b6sEDD7OWm0C7uDd.aBRw1bJCxXxkLMc60vWdq5OExqgOJ7JXtiElqnz4REqm2JsbWvDIYUpq5jtQLxI5fs.e6dEZqRqrZKVySqg2gXGdP0EL7FUUY9FmWaiuaUfB9_s2kaqn48ZoKyzzC6j71HSF4M4l8VK654VopmkIQdDBFZyjKZvJvoZq.ZtOraKzYxenNODRpNLT_q5NZpbHCIq2rO_Cnf6yN9Qd47TUZC9kzPY2lCWF5rimLvCY2lTUJGGu8HdYngDfzsEEYQeB6q9AD6uCrXHCih1utZmgVRO7UUYeAZH9vYEAPZgMbSZ5YzCTN2g3mzpHLHjfSkGMMDBGWK5yKuMpko.rR..bnC.IDFWEVfSNZ0Y50JzNjIwDu1Wlb1',};var a = document.createElement('script');a.src = '/cdn-cgi/challenge-platform/h/g/orchestrate/chl_page/v1?ray=9a172f6d5bb4d6f4';window._cf_chl_opt.cOgUHash = location.hash === '' && location.href.indexOf('#') !== -1 ? '#' : location.hash;window._cf_chl_opt.cOgUQuery = location.search === '' && location.href.slice(0, location.href.length - window._cf_chl_opt.cOgUHash.length).indexOf('?') !== -1 ? '?' : location.search;if (window.history && window.history.replaceState) {var ogU = location.pathname + window._cf_chl_opt.cOgUQuery + window._cf_chl_opt.cOgUHash;history.replaceState(null, null,"\/Resource\/JQLang\/Bilibili\/mine_Bilibili_remove_ads.jq?__cf_chl_rt_tk=xa02fCgzXApauNnS2sLsKPb1ehxxaWJ7khy.c7EOlos-1763633717-1.0.1.1-R4AmpswLK3Ns0NvdH15Tr4J3Y0FCfDoUWMfJdn_0mHM"+ window._cf_chl_opt.cOgUHash);a.onload = function() {history.replaceState(null, null, ogU);}}document.getElementsByTagName('head')[0].appendChild(a);}());</script></body></html>'
http-response-jq ^https:\/\/app\.bilibili\.com\/x\/v2\/account\/myinfo\? '.data.vip |= if . != null and .status == 0 then . + { status: 1, type: 2, due_date: 9005270400000, role: 15 } else . end'

[Map Local]
^https:\/\/api\.bilibili\.com\/pgc\/activity\/deliver\/material\/receive\? data-type=text data="{"code":0,"data":{"closeType":"close_win","container":[],"showTime":""},"message":"success"}" header="Content-Type:text/plain"

^https:\/\/ap[ip]\.bilibili\.com\/x\/(resource\/(top\/activity|patch\/tab)|v2\/search\/square|vip\/ads\/materials)\? data-type=text data="{"code":-404,"message":"-404","ttl":1,"data":null}" header="Content-Type:text/plain"

^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.interface\.v1\.Teenagers\/ModeStatus$ data-type=base64 data="AAAAABMKEQgCEgl0ZWVuYWdlcnMgAioA"

^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.interface\.v1\.Search\/DefaultWords$ data-type=base64 data="AAAAACkaHeaQnOe0ouinhumikeOAgeeVquWJp+aIlnVw5Li7IgAoAToAQgBKAA=="

^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.(view\.v1\.View\/TFInfo|viewunite\.v1\.View\/ViewEndPage)$ data-type=base64 data="AAAAAAA="

[Script]
空降助手 = type=http-request, pattern=^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.community\.service\.dm\.v1\.DM\/DmSegMobile$, script-path=https://raw.githubusercontent.com/ifflagged/Romeo/main/Modules/JS/Kelee/Bilibili_remove_ads/Bilibili_proto_request_kokoryh.js, requires-body=true, binary-body-mode=true, argument=[{{{logLevel}}}]

ProtoBuf处理 = type=http-response, pattern=^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.(app\.(show\.v1\.Popular\/Index|dynamic\.v2\.Dynamic\/DynAll|view(unite)?\.v1\.View\/(View|ViewProgress|RelatesFeed)|playurl\.v1\.PlayURL\/PlayView|playerunite\.v1\.Player\/PlayViewUnite)|polymer\.app\.search\.v1\.Search\/SearchAll|community\.service\.dm\.v1\.DM\/DmView|main\.community\.reply\.v1\.Reply\/MainList|pgc\.gateway\.player\.v2\.PlayURL\/PlayView)$, script-path=https://raw.githubusercontent.com/ifflagged/Romeo/main/Modules/JS/Kelee/Bilibili_remove_ads/Bilibili_proto_response_kokoryh.js, requires-body=true, binary-body-mode=true, argument="[{{{showUpList}}}, {{{purifyTopReplies}}}, {{{airborne}}}, {{{logLevel}}}]"

[MITM]
hostname = %APPEND% grpc.biliapi.net, app.bilibili.com, api.bilibili.com, api.live.bilibili.com, line3-h5-mobile-api.biligame.com

